// ==UserScript==
// @name        Spaces+
// @version     3.1.2
// @author      Vitalij Ryndin
// @description üöÄ Powerful userscript for Spaces.ru
// @homepage    https://spaces-dev.github.io/SpacesPlus
// @match       *://(spaces.ru|spac.me|spcs.me|spaces.im|gdespaces.com|spac1.com|spac1.net|spaces-blogs.com)/*
// @namespace   https://spaces-dev.github.io/SpacesPlus
// @icon        https://spaces-dev.github.io/SpacesPlus/icons/logo_96.png
// @include     /^(http|https)://(spaces.ru|spac.me|spcs.me|spaces.im|gdespaces.com|spac1.com|spac1.net|spaces-blogs.com).*$/
// @homepageURL https://github.com/spaces-dev/SpacesPlus
// @require     https://spaces-dev.github.io/SpacesPlus/libs/colorpicker.js
// @grant       none
// ==/UserScript==

!function(e){var t={};function s(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=t,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=12)}([function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.readSettings=t.notification=t.modifyObject=t.setSettings=t.historyPush=t.messageBox=t.isValidUrl=t.confirmBox=t.setCookie=t.playSound=t.getParams=t.getCookie=t.delCookie=t.declOfNum=t.getQuery=t.toUpper=t.getPath=t.extend=t.logger=t.rever=t.trim=t.http=t.css=t.qsa=t.qs=t.ce=void 0;const n=s(14);Object.defineProperty(t,"ce",{enumerable:!0,get:function(){return n.ce}});const r=s(5);Object.defineProperty(t,"css",{enumerable:!0,get:function(){return r.css}});const i=s(15);Object.defineProperty(t,"http",{enumerable:!0,get:function(){return i.http}});const o=s(6);Object.defineProperty(t,"trim",{enumerable:!0,get:function(){return o.trim}});const l=s(17);Object.defineProperty(t,"qs",{enumerable:!0,get:function(){return l.qs}}),Object.defineProperty(t,"qsa",{enumerable:!0,get:function(){return l.qsa}});const a=s(18);Object.defineProperty(t,"rever",{enumerable:!0,get:function(){return a.rever}});const c=s(3);Object.defineProperty(t,"logger",{enumerable:!0,get:function(){return c.logger}});const d=s(7);Object.defineProperty(t,"extend",{enumerable:!0,get:function(){return d.extend}});const p=s(19);Object.defineProperty(t,"getPath",{enumerable:!0,get:function(){return p.getPath}});const u=s(20);Object.defineProperty(t,"toUpper",{enumerable:!0,get:function(){return u.toUpper}});const _=s(21);Object.defineProperty(t,"getQuery",{enumerable:!0,get:function(){return _.getQuery}});const f=s(22);Object.defineProperty(t,"declOfNum",{enumerable:!0,get:function(){return f.declOfNum}});const g=s(23);Object.defineProperty(t,"delCookie",{enumerable:!0,get:function(){return g.delCookie}});const h=s(25);Object.defineProperty(t,"getCookie",{enumerable:!0,get:function(){return h.getCookie}});const S=s(26);Object.defineProperty(t,"getParams",{enumerable:!0,get:function(){return S.getParams}});const b=s(27);Object.defineProperty(t,"playSound",{enumerable:!0,get:function(){return b.playSound}});const m=s(8);Object.defineProperty(t,"setCookie",{enumerable:!0,get:function(){return m.setCookie}});const v=s(28);Object.defineProperty(t,"confirmBox",{enumerable:!0,get:function(){return v.confirmBox}});const y=s(29);Object.defineProperty(t,"isValidUrl",{enumerable:!0,get:function(){return y.isValidUrl}});const E=s(30);Object.defineProperty(t,"messageBox",{enumerable:!0,get:function(){return E.messageBox}});const P=s(31);Object.defineProperty(t,"historyPush",{enumerable:!0,get:function(){return P.historyPush}});const T=s(32);Object.defineProperty(t,"modifyObject",{enumerable:!0,get:function(){return T.modifyObject}});const k=s(33);Object.defineProperty(t,"notification",{enumerable:!0,get:function(){return k.notification}});const C=s(34);Object.defineProperty(t,"readSettings",{enumerable:!0,get:function(){return C.readSettings}}),Object.defineProperty(t,"setSettings",{enumerable:!0,get:function(){return C.setSettings}})},function(e,t,s){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PKG_VERSION=t.REVISION=t.ENV_PATH=t.BASE_URL=t.SPACES=t.GITHUB=t.DEVICE=t.HTTP=t.DATA=t.DEV=void 0;const r=n(s(24));t.DEV=!1;const i=document.location.protocol;t.HTTP=i;const o=document.location.hostname;t.BASE_URL=o;const l=`${i}//${o}`;t.SPACES=l;const a=r.default.version;t.PKG_VERSION=a;const c=r.default.homepage;t.GITHUB=c;const d=Number(new Date);t.REVISION=d;const p=window.Device||unsafeWindow.Device;t.DEVICE=p;const u=c;t.ENV_PATH=u;const _={CK:"",SID:"",USERNAME:"",BANNED:null,ONLINE:null,NICKNAME:null,CONTENT:null,EVENTS:0,PLAYER:0,VERSION:Number(a.split(".").join(""))};t.DATA=_},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._SETTINGS=t._SETSTRINGS=t._DESCSTRINGS=void 0;const n=s(1);t._DESCSTRINGS={blogsd:`–§—É–Ω–∫—Ü–∏—è –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–¥–∞–ª—è—Ç—å —Å—Ä–∞–∑—É –Ω–µ—Å–∫–æ–ª—å–∫–æ –±–ª–æ–≥–æ–≤.</br></br><img src="${n.ENV_PATH}/screens/sort-blogs.png"></br>–†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤ <a href="${n.SPACES}/diary/view/?Short=0&sort=0">"–†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–º –≤–∏–¥–µ"</a> (–Ω–∞–∂–º–∏—Ç–µ –Ω–∞ —Å—Å—ã–ª–∫—É, —á—Ç–æ–±—ã –≤–∫–ª—é—á–∏—Ç—å —ç—Ç–æ—Ç –≤–∏–¥ - –æ—Ç–∫—Ä–æ–µ—Ç—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –≤–∞—à–∏–º–∏ –±–ª–æ–≥–∞–º–∏).`,readersd:"–§—É–Ω–∫—Ü–∏—è –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–¥–∞–ª—è—Ç—å —Å—Ä–∞–∑—É –Ω–µ—Å–∫–æ–ª—å–∫–æ —á–∏—Ç–∞—Ç–µ–ª–µ–π, –º–æ–∂–µ—Ç –±—ã—Ç—å –≤–∞–º —ç—Ç–æ –ø—Ä–∏–≥–æ–¥–∏—Ç—å—Å—è.",comments:"–§—É–Ω–∫—Ü–∏—è –±—É–¥–µ—Ç –ø–æ–ª–µ–∑–Ω–∞ —Ç–µ–º, –∫—Ç–æ —á–∞—Å—Ç–æ —É–¥–∞–ª—è–µ—Ç –º–Ω–æ–≥–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤. –†–∞–±–æ—Ç–∞–µ—Ç –≤ –ª—é–±–æ–º –º–µ—Å—Ç–µ, –≥–¥–µ —É –í–∞—Å –µ—Å—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É–¥–∞–ª—è—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏, –±—É–¥—å —ç—Ç–æ –≤–∞—à –±–ª–æ–≥ –∏–ª–∏ –≥–æ—Å—Ç–µ–≤–∞—è.",blockedfiles:"–§—É–Ω–∫—Ü–∏—è –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–∫–∞—á–∏–≤–∞—Ç—å —Ñ–∞–π–ª—ã –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∞–Ω—Ç–∏–≤–∏—Ä—É—Å–æ–º (Spaces+ –Ω–µ –Ω–µ—Å–µ—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∑–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ —Å –≤–∏—Ä—É—Å–∞–º–∏!).",oldheader:"–§—É–Ω–∫—Ü–∏—è –º–µ–Ω—è–µ—Ç –∫–Ω–æ–ø–∫—É –ø–æ—á—Ç—ã –∏ –ª–µ–Ω—Ç—ã –º–µ—Å—Ç–∞–º–∏, –∫–∞–∫ –±—ã–ª–æ —Ä–∞–Ω—å—à–µ.",playerdn:`<img src="${n.ENV_PATH}/screens/player-download.png"></br>–î–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∫–Ω–æ–ø–∫–∞ –≤ –∞—É–¥–∏–æ–ø–ª–µ–µ—Ä, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–∫–∞—á–∏–≤–∞—Ç—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–Ω—ã–π –≤–∞–º–∏ —Ç—Ä–µ–∫.`,dredirect:"–§—É–Ω–∫—Ü–∏—è –∏–∑–±–∞–≤–ª—è–µ–º –í–∞—Å –æ—Ç –Ω–∞–∑–æ–π–ª–∏–≤–æ–≥–æ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è, –∫–æ–≥–¥–∞ –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø–µ—Ä–µ–π—Ç–∏ –ø–æ –≤–Ω–µ—à–Ω–µ–π —Å—Å—ã–ª–∫–µ.",online:"–§—É–Ω–∫—Ü–∏—è –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–º–æ—Ç—Ä–µ—Ç—å —Ç–æ—á–Ω–æ–µ –≤—Ä–µ–º—è –æ–Ω–ª–∞–π–Ω —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –∞–Ω–∫–µ—Ç–∞—Ö.",coins:"–§—É–Ω–∫—Ü–∏—è –≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–º —Ä–µ–∂–∏–º–µ –∏—â–µ—Ç –∏ —Å–æ–±–∏—Ä–∞–µ—Ç –±–æ–Ω—É—Å–Ω—ã–µ –º–æ–Ω–µ—Ç—ã.",rscroll:"–ü–µ—Ä–µ–º–µ—â–∞–µ—Ç –ø–æ–ª–æ—Å—É –∞–≤—Ç–æ—Å–∫—Ä–æ–ª–ª–∞ –Ω–∞ –ø—Ä–∞–≤—É—é —Å—Ç–æ—Ä–æ–Ω—É.",hrightbar:'–§—É–Ω–∫—Ü–∏—è —Å–∫—Ä—ã–≤–∞–µ—Ç –ø—Ä–∞–≤–æ–µ –º–µ–Ω—é (—Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è –Ω–∞ 25% —à–∏—Ä–µ).</br></br>–ö–æ–Ω—Ñ–ª–∏–∫—Ç—É–µ—Ç c —Ñ—É–Ω–∫—Ü–∏–µ–π "–í–∏–¥–∂–µ—Ç –ø–æ–≥–æ–¥—ã".',favorite:`<img src="${n.ENV_PATH}/screens/favorite-user.png"></br>–§—É–Ω–∫—Ü–∏—è –¥–æ–±–∞–≤–ª—è–µ—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∫–Ω–æ–ø–∫—É "–í –∑–∞–∫–ª–∞–¥–∫–∏". –ü–æ–≤—Ç–æ—Ä–Ω–æ –Ω–∞–∂–∞–≤ –Ω–∞ –∫–Ω–æ–ø–∫—É, –í—ã —Å–º–æ–∂–µ—Ç–µ —É–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –∑–∞–∫–ª–∞–¥–æ–∫.`,userbypass:`<img src="${n.ENV_PATH}/screens/bypass-profile.png"></br>–§—É–Ω–∫—Ü–∏—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Ä–∞–∑–¥–µ–ª—ã —É –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö/—É–¥–∞–ª–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –¥–∞–∂–µ –µ—Å–ª–∏ –æ–Ω —É –í–∞—Å –≤ —á–µ—Ä–Ω–æ–º —Å–ø–∏—Å–∫–µ.`,grotate:`<img src="${n.ENV_PATH}/screens/rotate-image.png"></br>–î–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∫–Ω–æ–ø–∫–∞ –≤ –ø—Ä–æ—Å–º–æ—Ç—Ä—â–∏–∫ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π, —Å –ø–æ–º–æ—â—å—é –µ–µ –º–æ–∂–Ω–æ –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ.`,adblock:"–§—É–Ω–∫—Ü–∏—è –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–∫—Ä—ã–≤–∞–µ—Ç –Ω–∞–∑–æ–π–ª–∏–≤—É—é —Ä–µ–∫–ª–∞–º—É –∏ –Ω–µ —Ç–æ–ª—å–∫–æ.",stickyheader:"–§—É–Ω–∫—Ü–∏—è –∑–∞–∫—Ä–µ–ø–ª—è–µ—Ç —à–∞–ø–∫—É —Å–∞–π—Ç–∞.",playback:`<img src="${n.ENV_PATH}/screens/video-speed.png"></br>–í –≤–∏–¥–µ–æ–ø–ª–µ–µ—Ä–µ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∫–Ω–æ–ø–∫–∞ —É—Å–∫–æ—Ä–µ–Ω–∏—è –≤–∏–¥–µ–æ, –ø—Ä–∏–º–µ—Ä–Ω–æ –∫–∞–∫ –Ω–∞ YouTube.`,recents:`<img src="${n.ENV_PATH}/screens/recent-smiles.png"></br>–í –º–µ–Ω—é —Å–º–∞–π–ª–∏–∫–æ–≤ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è —Ä–∞–∑–¥–µ–ª —Å —Ä–∞–Ω–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–º–∏ —Å–º–∞–π–ª–∏–∫–∞–º–∏, –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ —Ä–∞–∑–¥–µ–ª, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–º–∞–π–ª–∏–∫–∏/—Å—Ç–∏–∫–µ—Ä—ã –∏–∑ –º–µ–Ω—é —Å–º–∞–π–ª–∏–∫–æ–≤.`,karma:"–§—É–Ω–∫—Ü–∏—è –≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–º —Ä–µ–∂–∏–º–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –Ω–∞–∑–æ–π–ª–∏–≤—É—é –∫–∞—Ä–º—É.",friendsOn:`<img src="${n.ENV_PATH}/screens/friends-online.png"></br>–§—É–Ω–∫—Ü–∏—è –¥–æ–±–∞–≤–ª—è–µ—Ç –≤ –ª–µ–≤–æ–µ –º–µ–Ω—é –ø–∞–Ω–µ–ª—å —Å –¥—Ä—É–∑—å—è–º–∏ –æ–Ω–ª–∞–π–Ω. –î–ª—è —Ä–∞–±–æ—Ç—ã –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–∫–ª—é—á–∏—Ç—å —Ä–∞–∑–¥–µ–ª <a href="${n.SPACES}/sidebar/links/?T=4">–î—Ä—É–∑—å—è</a>, –µ—Å–ª–∏ –æ–Ω —É –≤–∞—Å –≤—ã–∫–ª—é—á–µ–Ω.</br></br>–ü–∞–Ω–µ–ª—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∞ –æ—Ç 1 –¥–æ 15 –¥—Ä—É–∑–µ–π –æ–Ω–ª–∞–π–Ω.`,bodystyle:"–ü–æ–∑–≤–æ–ª—è–µ—Ç —É–∫—Ä–∞—à–∞—Ç—å —Ñ–æ–Ω —Å–∞–π—Ç–∞ –Ω–∞ —Å–≤–æ–π –≤–∫—É—Å. –í –ø–æ–¥–±–æ—Ä–∫–µ –∏–º–µ–µ—Ç—Å—è 20 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –¥–ª—è —Ñ–æ–Ω–∞, —Ç–∞–∫–∂–µ –í—ã –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ —Ü–≤–µ—Ç–Ω–æ–π —Ñ–æ–Ω.",weather:`<img src="${n.ENV_PATH}/screens/weather-widget.png"></br>–û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–µ–∫—É—â–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –ø–æ–≥–æ–¥—ã, —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞, –æ–±–ª–∞—á–Ω–æ—Å—Ç—å, –≤–ª–∞–∂–Ω–æ—Å—Ç—å, –¥–∞–≤–ª–µ–Ω–∏–µ –∏ –≤–µ—Ç–µ—Ä.</br></br>–ò–º–µ–µ—Ç—Å—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏–∑–º–µ–Ω–∏—Ç—å –≥–æ—Ä–æ–¥, API-–ö–ª—é—á –∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ–≥–æ–¥—ã.`,sticker:`–§—É–Ω–∫—Ü–∏—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –±–µ—Å–ø–ª–∞—Ç–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–∏–∫–µ—Ä—ã. –†–∞–±–æ—Ç–∞–µ—Ç –≤ –ø–æ—á—Ç–µ (–ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∏–∑ <a href="${n.SPACES}/mail/write/">"–ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ"</a> –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç!), –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö, –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –±–ª–æ–≥–æ–≤ –∏–ª–∏ —Ç–µ–º –Ω–∞ —Ñ–æ—Ä—É–º–µ.`},t._SETSTRINGS={blogsd:"–ü–∞–∫–µ—Ç–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –±–ª–æ–≥–æ–≤",readersd:"–ü–∞–∫–µ—Ç–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —á–∏—Ç–∞—Ç–µ–ª–µ–π",comments:"–ü–∞–∫–µ—Ç–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤",blockedfiles:"–°—Å—ã–ª–∫–∏ –Ω–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã",oldheader:"–°—Ç–∞—Ä–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ –≤ —à–∞–ø–∫–µ",playerdn:"–ö–Ω–æ–ø–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç—Ä–µ–∫–∞ –∏–∑ –ø–ª–µ–µ—Ä–∞",dredirect:"–í–Ω–µ—à–Ω–∏–µ —Å—Å—ã–ª–∫–∏ –±–µ–∑ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞",online:"–¢–æ—á–Ω–æ–µ –≤—Ä–µ–º—è –æ–Ω–ª–∞–π–Ω –≤ –∞–Ω–∫–µ—Ç–∞—Ö",coins:"–°–æ–±–∏—Ä–∞—Ç—å –±–æ–Ω—É—Å–Ω—ã–µ –º–æ–Ω–µ—Ç—ã",rscroll:"–ü—Ä–æ–∫—Ä—É—Ç–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å–ø—Ä–∞–≤–∞",hrightbar:"–°–∫—Ä—ã—Ç—å –ø—Ä–∞–≤–æ–µ –º–µ–Ω—é",favorite:"–î–æ–±–∞–≤–∏—Ç—å –≤ –∑–∞–∫–ª–∞–¥–∫–∏",userbypass:"–ü—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–æ—Ñ–∏–ª–µ–π",grotate:"–ü–æ–≤–æ—Ä–æ—Ç —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π",adblock:"–°–∫—Ä—ã–≤–∞—Ç—å —Ä–µ–∫–ª–∞–º—É",stickyheader:"–ó–∞–∫—Ä–µ–ø–∏—Ç—å —à–∞–ø–∫—É",playback:"–ö–Ω–æ–ø–∫–∞ —É—Å–∫–æ—Ä–µ–Ω–∏—è –≤–∏–¥–µ–æ",recents:"–†–∞–Ω–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ —Å–º–∞–π–ª–∏–∫–∏",karma:"–°–æ–±–∏—Ä–∞—Ç—å –∫–∞—Ä–º—É",friendsOn:"–ü–∞–Ω–µ–ª—å –¥—Ä—É–∑–µ–π –æ–Ω–ª–∞–π–Ω",bodystyle:"–§–æ–Ω —Å–∞–π—Ç–∞",weather:"–í–∏–¥–∂–µ—Ç –ø–æ–≥–æ–¥—ã",sticker:"–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ —Å—Ç–∏–∫–µ—Ä—ã"},t._SETTINGS={blogsd:!1,readersd:!1,comments:!1,blockedfiles:!0,oldheader:!0,playerdn:!0,dredirect:!0,online:!0,coins:!0,rscroll:!1,hrightbar:!1,favorite:!0,grotate:!0,angle:0,userbypass:!0,adblock:!0,stickyheader:!0,apidebug:!1,karma:!0,sticker:!0,playback:!0,videoSpeed:1,upVersion:n.DATA.VERSION,beta:!1,hideNotify:{configImport:!1},recents:!0,recentSmiles:{show:!1,max:60},friendsOn:!0,friendsSet:{max:10},bodystyle:!0,bodystyleSet:{url:n.ENV_PATH+"/backgrounds/default.png",color:"#DAE1E8",urlchecked:!0,colorchecked:!1},weather:!1,weatherSet:{interval:3600,time:0,city:null,language:"ru",units:"metric",key:"5f11ea40424990937175d20a072e0c72"}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logger=void 0;const n=s(16);t.logger=new class{constructor(){this.logger=new n.Debugger(console,!0,"[S+]: "),this.styles=["background: steelblue","background: green","background: darkorange","background: darkred"]}log(e,t){this.logger.log("%c"+e,this.styles[0],t)}info(e,t){this.logger.info("%c"+e,this.styles[1],t)}warn(e,t){this.logger.warn("%c"+e,this.styles[2],t)}error(e,t){this.logger.error("%c"+e,this.styles[3],t)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.settingsRecentSmiles=t.settingsBackupMenu=t.settingsBackground=t.videoSpeedPlayback=t.settingsFeatures=t.settingsWeather=t.settingsFriends=t.settingsLogMenu=t.disableRedirect=t.settingsNotify=t.playerDownload=t.hiddenRightbar=t.deleteComments=t.weatherWidget=t.sidebarButton=t.galleryRotate=t.friendsOnline=t.deleteReaders=t.bypassProfile=t.stickyHeader=t.settingsMenu=t.recentSmiles=t.freeStickers=t.favoriteUser=t.checkUpdates=t.blockedFiles=t.betaFeatures=t.soundNotify=t.karmaAccept=t.firstLaunch=t.deleteBlogs=t.coinsAccept=t.apiDebugger=t.userOnline=t.userStatus=t.scrollMove=t.getUpdater=t.setStyles=t.oldHeader=t.ipWhois=t.adBlock=t.qrCode=void 0;const n=s(13);Object.defineProperty(t,"qrCode",{enumerable:!0,get:function(){return n.qrCode}});const r=s(35);Object.defineProperty(t,"adBlock",{enumerable:!0,get:function(){return r.adBlock}});const i=s(36);Object.defineProperty(t,"oldHeader",{enumerable:!0,get:function(){return i.oldHeader}});const o=s(9);Object.defineProperty(t,"setStyles",{enumerable:!0,get:function(){return o.setStyles}});const l=s(37);Object.defineProperty(t,"scrollMove",{enumerable:!0,get:function(){return l.scrollMove}});const a=s(38);Object.defineProperty(t,"userStatus",{enumerable:!0,get:function(){return a.userStatus}});const c=s(39);Object.defineProperty(t,"userOnline",{enumerable:!0,get:function(){return c.userOnline}});const d=s(40);Object.defineProperty(t,"apiDebugger",{enumerable:!0,get:function(){return d.apiDebugger}});const p=s(41);Object.defineProperty(t,"coinsAccept",{enumerable:!0,get:function(){return p.coinsAccept}});const u=s(42);Object.defineProperty(t,"deleteBlogs",{enumerable:!0,get:function(){return u.deleteBlogs}});const _=s(43);Object.defineProperty(t,"firstLaunch",{enumerable:!0,get:function(){return _.firstLaunch}});const f=s(44);Object.defineProperty(t,"karmaAccept",{enumerable:!0,get:function(){return f.karmaAccept}});const g=s(45);Object.defineProperty(t,"soundNotify",{enumerable:!0,get:function(){return g.soundNotify}});const h=s(46);Object.defineProperty(t,"betaFeatures",{enumerable:!0,get:function(){return h.betaFeatures}});const S=s(47);Object.defineProperty(t,"blockedFiles",{enumerable:!0,get:function(){return S.blockedFiles}});const b=s(48);Object.defineProperty(t,"favoriteUser",{enumerable:!0,get:function(){return b.favoriteUser}});const m=s(49);Object.defineProperty(t,"freeStickers",{enumerable:!0,get:function(){return m.freeStickers}});const v=s(50);Object.defineProperty(t,"recentSmiles",{enumerable:!0,get:function(){return v.recentSmiles}});const y=s(51);Object.defineProperty(t,"settingsMenu",{enumerable:!0,get:function(){return y.settingsMenu}});const E=s(52);Object.defineProperty(t,"stickyHeader",{enumerable:!0,get:function(){return E.stickyHeader}});const P=s(53);Object.defineProperty(t,"bypassProfile",{enumerable:!0,get:function(){return P.bypassProfile}});const T=s(54);Object.defineProperty(t,"deleteReaders",{enumerable:!0,get:function(){return T.deleteReaders}});const k=s(55);Object.defineProperty(t,"friendsOnline",{enumerable:!0,get:function(){return k.friendsOnline}});const C=s(56);Object.defineProperty(t,"galleryRotate",{enumerable:!0,get:function(){return C.galleryRotate}});const A=s(57);Object.defineProperty(t,"sidebarButton",{enumerable:!0,get:function(){return A.sidebarButton}});const N=s(58);Object.defineProperty(t,"weatherWidget",{enumerable:!0,get:function(){return N.weatherWidget}});const O=s(59);Object.defineProperty(t,"deleteComments",{enumerable:!0,get:function(){return O.deleteComments}});const x=s(60);Object.defineProperty(t,"hiddenRightbar",{enumerable:!0,get:function(){return x.hiddenRightbar}});const I=s(61);Object.defineProperty(t,"playerDownload",{enumerable:!0,get:function(){return I.playerDownload}});const w=s(62);Object.defineProperty(t,"settingsNotify",{enumerable:!0,get:function(){return w.settingsNotify}});const L=s(63);Object.defineProperty(t,"disableRedirect",{enumerable:!0,get:function(){return L.disableRedirect}});const j=s(64);Object.defineProperty(t,"settingsLogMenu",{enumerable:!0,get:function(){return j.settingsLogMenu}});const q=s(65);Object.defineProperty(t,"settingsFriends",{enumerable:!0,get:function(){return q.settingsFriends}});const R=s(66);Object.defineProperty(t,"settingsFeatures",{enumerable:!0,get:function(){return R.settingsFeatures}});const B=s(68);Object.defineProperty(t,"videoSpeedPlayback",{enumerable:!0,get:function(){return B.videoSpeedPlayback}});const M=s(69);Object.defineProperty(t,"settingsBackground",{enumerable:!0,get:function(){return M.settingsBackground}});const U=s(70);Object.defineProperty(t,"settingsBackupMenu",{enumerable:!0,get:function(){return U.settingsBackupMenu}});const G=s(11);Object.defineProperty(t,"checkUpdates",{enumerable:!0,get:function(){return G.checkUpdates}}),Object.defineProperty(t,"getUpdater",{enumerable:!0,get:function(){return G.getUpdater}});const $=s(10);Object.defineProperty(t,"settingsWeather",{enumerable:!0,get:function(){return $.settingsWeather}}),Object.defineProperty(t,"ipWhois",{enumerable:!0,get:function(){return $.ipWhois}});const D=s(72);Object.defineProperty(t,"settingsRecentSmiles",{enumerable:!0,get:function(){return D.settingsRecentSmiles}})},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.css=void 0;const n=s(6);t.css=(e,t)=>{let s=t.split(";");for(let t in s)if(""!==n.trim(s[t])){let r=n.trim(s[t]).split(":");-1!==r[0].indexOf("-")&&(r[0]=r[0].replace(/\-([a-z]{1})/g,e=>e.replace("-","").toUpperCase())),void 0!==r[1]&&(e.style[n.trim(r[0])]=n.trim(r[1]))}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.trim=void 0,t.trim=e=>e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extend=void 0,t.extend=(e,t)=>{if(t)for(let s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);return e}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setCookie=void 0;const n=s(7),r=s(1);t.setCookie=(e,t,s)=>{!(s=n.extend({path:"/",expires:365,secure:!1,domain:"."+r.BASE_URL},s)).expires||s.expires instanceof Date||(s.expires=new Date(+new Date+864e5*s.expires));let i=null!==t?encodeURIComponent(e)+"="+encodeURIComponent(t):encodeURIComponent(e)+"=";s.expires&&(i+="; expires="+s.expires.toUTCString()),s.domain&&(i+="; domain="+s.domain),s.path&&(i+="; path="+s.path),s.secure&&(i+="; secure"),document.cookie=i}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setStyles=void 0;const n=s(0),r=s(1),i=s(2);t.setStyles=()=>{let e=n.qs("#SP_PLUS_INJSTYLE")||n.ce("style",{id:"SP_PLUS_INJSTYLE",type:"text/css"});if(!n.qs("#SP_STICKER_CSS")){let e=n.ce("link",{rel:"stylesheet",type:"text/css",id:"SP_STICKER_CSS",href:`${r.ENV_PATH}/css/sticker.css?r=${r.REVISION}`});document.getElementsByTagName("head")[0].appendChild(e)}if(!n.qs("#SP_PLUS_MENU")){let e=n.ce("link",{rel:"stylesheet",type:"text/css",id:"SP_PLUS_MENU",href:`${r.ENV_PATH}/css/menu.css?r=${r.REVISION}`});document.getElementsByTagName("head")[0].appendChild(e)}i._SETTINGS.bodystyle&&(i._SETTINGS.bodystyleSet.url&&i._SETTINGS.bodystyleSet.urlchecked&&(e.innerHTML=`body,#main_wrap{background-image:url(${i._SETTINGS.bodystyleSet.url})}`),i._SETTINGS.bodystyleSet.color&&i._SETTINGS.bodystyleSet.colorchecked&&(e.innerHTML=`body,#main_wrap{background-color:${i._SETTINGS.bodystyleSet.color}}`)),document.getElementsByTagName("head")[0].appendChild(e)}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ipWhois=t.getWeather=t.settingsWeather=void 0;const n=s(0),r=s(2);t.settingsWeather=async e=>{var s,i;r._SETTINGS.hrightbar&&n.qs("#hrightbar").click(),null!==(s=r._SETTINGS.weatherSet.city)&&void 0!==s||t.ipWhois();let o=n.ce("div",{id:"SP_WEATHER_SETTINGS",class:"sp_settings-wrap"}),l=n.ce("label",{html:'API-–ö–ª—é—á:<div class="label__desc"><a href="https://openweathermap.org/appid" target="_blank">–ü–æ–ª—É—á–∏—Ç—å –∫–ª—é—á</a></div>',class:"label"}),a=n.ce("input",{type:"text",class:"text-input",style:"margin-bottom: 7px",size:"32",value:r._SETTINGS.weatherSet.key});a.addEventListener("keypress",e=>{13===e.keyCode&&(/^[a-f0-9]{32}$/i.test(e.target.value)?(n.setSettings("weatherSet.key",e.target.value),t.getWeather(),a.classList.remove("sp-input-error")):a.classList.add("sp-input-error"))});let c=n.ce("label",{html:"–ì–æ—Ä–æ–¥:",class:"label"}),d=n.ce("input",{type:"text",class:"text-input",style:"margin-bottom: 7px",size:"32",id:"SP-CITY-INPUT",value:r._SETTINGS.weatherSet.city});d.addEventListener("keypress",e=>{13===e.keyCode&&(/^([a-zA-Z–∞-—è–ê-–Ø—ë–Å]+[-]?[a-zA-Z–∞-—è–ê-–Ø—ë–Å]*[-]?[a-zA-Z–∞-—è–ê-–Ø—ë–Å]*[-]?[a-zA-Z–∞-—è–ê-–Ø—ë–Å]*)$/i.test(e.target.value)?(n.setSettings("weatherSet.city",e.target.value),t.getWeather(),d.classList.remove("sp-input-error")):d.classList.add("sp-input-error"))});let p=n.ce("label",{html:'–ò–Ω—Ç–µ—Ä–≤–∞–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:<div class="label__desc">–æ—Ç 1 –¥–æ 360 –º–∏–Ω—É—Ç</a></div>',class:"label"}),u=n.ce("input",{type:"text",class:"text-input",style:"margin-bottom: 7px",size:4,attr:{maxlength:3},value:r._SETTINGS.weatherSet.interval/60});u.addEventListener("input",e=>{/^([1-9]|[1-8][0-9]|9[0-9]|[12][0-9]{2}|3[0-5][0-9]|360)$/i.test(e.target.value)?(n.setSettings("weatherSet.interval",60*e.target.value),u.classList.remove("sp-input-error")):u.classList.add("sp-input-error")}),o.appendChild(c),o.appendChild(d),o.appendChild(l),o.appendChild(a),o.appendChild(p),o.appendChild(u),null===(i=e.parentElement)||void 0===i||i.after(o)},t.getWeather=async()=>{const{language:e,units:t,city:s,key:i}=r._SETTINGS.weatherSet;try{let r=`https://api.openweathermap.org/data/2.5/weather?lang=${e}&units=${t}&q=${s}&appid=${i}`;await n.http("GET",r,!1).then(e=>{var t;const r=e.parsedBody;return 404===e.status?(n.messageBox("–í–∏–¥–∂–µ—Ç –ø–æ–≥–æ–¥—ã",`–ì–æ—Ä–æ–¥ <b>${s}</b> –Ω–µ –Ω–∞–π–¥–µ–Ω`,!0,5),!1):(null==r?void 0:r.message)?(n.messageBox("–í–∏–¥–∂–µ—Ç –ø–æ–≥–æ–¥—ã",r.message,!0,5),!1):(n.qs("#SP-CITY-INPUT")&&(n.qs("#SP-CITY-INPUT").value=r.name),null===(t=n.qs("#SP_WIDGET_WEATHER"))||void 0===t||t.remove(),void(200===(null==r?void 0:r.cod)&&(n.setSettings("weatherSet.city",r.name),n.setCookie("SP_WEATHER",JSON.stringify(r)))))})}catch(e){n.logger.error("openweathermap",e)}},t.ipWhois=async()=>{try{await n.http("GET","https://ipwhois.app/json/?objects=city,success&lang=ru",!1).then(e=>{const s=e.parsedBody;(null==s?void 0:s.success)?(n.setSettings("weatherSet.city",s.city),t.getWeather()):n.messageBox("–û—à–∏–±–∫–∞ ipWhois","–û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É!",!0)})}catch(e){n.logger.error("ipWhois",e)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkUpdates=t.getUpdater=void 0;const n=s(0),r=s(2),i=s(1);t.getUpdater=e=>{try{n.http("GET",`${i.ENV_PATH}/updater.json?r=${i.REVISION}`,!1).then(t=>{const s=t.parsedBody;if(n.logger.info("–ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π",t),200===t.status&&(null==s?void 0:s.history))return e(s)})}catch(e){n.logger.error("getUpdater",e)}},t.checkUpdates=()=>{try{t.getUpdater(e=>{let t=0;if(r._SETTINGS.upVersion&&(t=r._SETTINGS.upVersion),i.DATA.VERSION=Math.max(t,i.DATA.VERSION),e.history[0].build>i.DATA.VERSION&&(n.messageBox("–î–æ—Å—Ç—É–ø–Ω–∞ –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è Spaces+ "+n.rever(e.history[0].build),`<div class="pad_t_a"></div>${e.history[0].changes}<div id="SP_UPDATER_BUTTONS" class="pad_t_a"><a class="btn btn_green btn_input" href="${i.ENV_PATH}/spaces-plus.user.js?r=${i.REVISION}" onclick="document.body.removeChild(this.parentNode.parentNode.parentNode.parentNode)">–û–±–Ω–æ–≤–∏—Ç—å</a></div>`,!0),n.qs("#SP_PLUS_ALERT"))){const t=n.ce("a",{href:"#",class:"btn btn_white btn_input right sticker-close_btn",html:"–ë–æ–ª—å—à–µ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å",onclick:()=>(n.setSettings("upVersion",e.history[0].build),n.qs("#SP_PLUS_ALERT").remove(),!1)});n.qs("#SP_UPDATER_BUTTONS").appendChild(t)}})}catch(e){n.logger.error("checkUpdates.ts",e)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(4),r=s(1),i=s(0),o=s(2);(()=>{if(i.qs("#main_wrap"))try{i.http("POST",r.SPACES+"/api/session/check",!1).then(e=>{const t=e.parsedBody;t&&n.userStatus(t.code)&&(r.DATA.USERNAME=t.attributes.name,r.DATA.CK=t.attributes.CK,r.DATA.SID=null==t?void 0:t.attributes.sid,l()),i.logger.info("–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Å—Å–∏–∏",e)})}catch(e){i.logger.error("main.ts",e)}})();const l=()=>{window.onerror=()=>!1,n.firstLaunch(),n.checkUpdates(),n.sidebarButton(),i.readSettings(),n.setStyles(),n.oldHeader(o._SETTINGS.oldheader),n.apiDebugger(o._SETTINGS.apidebug),n.freeStickers(o._SETTINGS.sticker),n.friendsOnline(o._SETTINGS.friendsOn),n.stickyHeader(o._SETTINGS.stickyheader),4===r.DEVICE.id&&(n.scrollMove(o._SETTINGS.rscroll),n.hiddenRightbar(o._SETTINGS.hrightbar)),setInterval(()=>{o._SETTINGS.adblock&&n.adBlock(),o._SETTINGS.beta&&n.betaFeatures(),o._SETTINGS.coins&&n.coinsAccept(),o._SETTINGS.karma&&n.karmaAccept(),o._SETTINGS.online&&n.userOnline(),o._SETTINGS.recents&&n.recentSmiles(),o._SETTINGS.grotate&&n.galleryRotate(),o._SETTINGS.favorite&&n.favoriteUser(),o._SETTINGS.weather&&n.weatherWidget(),o._SETTINGS.readersd&&n.deleteReaders(),o._SETTINGS.comments&&n.deleteComments(),o._SETTINGS.playerdn&&n.playerDownload(),o._SETTINGS.userbypass&&n.bypassProfile(),o._SETTINGS.dredirect&&n.disableRedirect(),o._SETTINGS.playback&&n.videoSpeedPlayback(),(o._SETTINGS.blogsd||"spaces-blogs.com"===r.BASE_URL)&&n.deleteBlogs(),(o._SETTINGS.blockedfiles||"spac1.net"===r.BASE_URL)&&n.blockedFiles(),n.settingsMenu(),n.qrCode()},200)}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.qrCode=void 0;const n=s(0),r=s(1);t.qrCode=()=>{try{let e=n.qs("#more_menu > div > div");if("mysite"===n.getPath(1)&&e&&!n.qs("#SP_QR_BUTTON")){let t=n.ce("a",{class:"stnd-link",id:"SP_QR_BUTTON",html:'\n                    <span class="sp sp-qrcode"></span>\n                    <span class="t js-text">–ü–æ–ª—É—á–∏—Ç—å QR-–∫–æ–¥</span>\n                ',onclick:()=>{n.messageBox("–°–∫–∞–Ω–∏—Ä—É–π—Ç–µ QR-–∫–æ–¥ c —Ç–µ–ª–µ—Ñ–æ–Ω–∞",`\n                            <div id="SP_QR_CODE">\n                                <img src="${r.HTTP}//spac.me/i/preloader.gif" class="sp_img-center" id="SP_QR_LOADER">\n                            </div>\n                        `,!0);let e=i("https://chart.googleapis.com/chart?cht=qr&chs=256x256&chl="+r.DATA.SID),t=n.qs("#SP_QR_LOADER"),s=n.qs("#SP_QR_CODE");return e.then(e=>{t.remove(),s.appendChild(e),s.appendChild(n.ce("ol",{html:"\n                                <li>–ó–∞–ø—É—Å—Ç–∏—Ç–µ <b>OpenSpaces</b> –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ</li>\n                                <li>–ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –Ω–∞–∂–º–∏—Ç–µ ¬´<b>Login by QR code</b>¬ª</li>\n                                <li>–°–∫–∞–Ω–∏—Ä—É–π—Ç–µ —ç—Ç–æ—Ç –∫–æ–¥ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏</li>\n                            "}))}),!1}});e.appendChild(t)}}catch(e){n.logger.error("qrCode.ts",e)}};const i=e=>new Promise((t,s)=>{const r=new Image;r.src=e,r.className="sp_img-center",r.onload=()=>t(r),r.onerror=()=>s(n.logger.error("qrCodeLoader",r))})},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ce=void 0;const n=s(5);t.ce=(e,t)=>{let s=document.createElement(e);for(let e in t)switch(e){case"html":s.innerHTML=t[e];break;case"style":n.css(s,t[e]);break;case"class":s.className=t[e];break;case"attr":for(let n in t[e])s.setAttribute(n,t[e][n]);break;default:s[e]=t[e]}return s}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.http=void 0;const n=s(3);t.http=async function(e,t,s,r){const i=new Headers;s?i.append("X-Proxy","spaces"):i.append("Content-Type","application/x-www-form-urlencoded");const o=await fetch(t,{method:e,headers:i,body:r});try{o.parsedBody=await o.json()}catch(e){n.logger.error("http.ts",e)}return o}},function(e,t,s){"use strict";s.r(t),s.d(t,"Debugger",(function(){return n}));var n=function(){function e(e,t,s){void 0===t&&(t=!0),void 0===s&&(s=""),this.prefix="",this.console=e,this.isEnabled=t,this.prefix=s}return Object.defineProperty(e.prototype,"memory",{get:function(){return this.doIfEnabled((function(){return console.hasOwnProperty("memory")&&console.memory}))},enumerable:!0,configurable:!0}),e.prototype.assert=function(e,t){for(var s=this,n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return this.doIfEnabled((function(){var r;return(r=s.console).assert.apply(r,[e,t].concat(n))}))},e.prototype.countReset=function(e){var t=this;return this.doIfEnabled((function(){return t.console.countReset(e)}))},e.prototype.dir=function(e){for(var t=this,s=[],n=1;n<arguments.length;n++)s[n-1]=arguments[n];return this.doIfEnabled((function(){var n;return(n=t.console).dir.apply(n,[e].concat(s))}))},e.prototype.error=function(e){for(var t=this,s=[],n=1;n<arguments.length;n++)s[n-1]=arguments[n];return this.doIfEnabled((function(){var n;return(n=t.console).error.apply(n,[t.addPrefix(e)].concat(s))}))},e.prototype.info=function(e){for(var t=this,s=[],n=1;n<arguments.length;n++)s[n-1]=arguments[n];return this.doIfEnabled((function(){var n;return(n=t.console).info.apply(n,[t.addPrefix(e)].concat(s))}))},e.prototype.log=function(e){for(var t=this,s=[],n=1;n<arguments.length;n++)s[n-1]=arguments[n];return this.doIfEnabled((function(){var n;return(n=t.console).log.apply(n,[t.addPrefix(e)].concat(s))}))},e.prototype.time=function(e){var t=this;return this.doIfEnabled((function(){return t.console.time(e)}))},e.prototype.timeEnd=function(e){var t=this;return this.doIfEnabled((function(){return t.console.timeEnd(e)}))},e.prototype.timeLog=function(e){for(var t=this,s=[],n=1;n<arguments.length;n++)s[n-1]=arguments[n];return this.doIfEnabled((function(){return t.console.timeLog(e,s)}))},e.prototype.timeStamp=function(e){var t=this;return this.doIfEnabled((function(){return t.console.timeStamp(e)}))},e.prototype.timeline=function(e){var t=this;return this.doIfEnabled((function(){return t.console.timeline(e)}))},e.prototype.timelineEnd=function(e){var t=this;return this.doIfEnabled((function(){return t.console.timelineEnd(e)}))},e.prototype.trace=function(e){for(var t=this,s=[],n=1;n<arguments.length;n++)s[n-1]=arguments[n];return this.doIfEnabled((function(){var n;return(n=t.console).trace.apply(n,[t.addPrefix(e)].concat(s))}))},e.prototype.warn=function(e){for(var t=this,s=[],n=1;n<arguments.length;n++)s[n-1]=arguments[n];return this.doIfEnabled((function(){var n;return(n=t.console).warn.apply(n,[t.addPrefix(e)].concat(s))}))},e.prototype.clear=function(){var e=this;return this.doIfEnabled((function(){return e.console.clear()}))},e.prototype.count=function(e){var t=this;return this.doIfEnabled((function(){return t.console.count()}))},e.prototype.debug=function(e){for(var t=this,s=[],n=1;n<arguments.length;n++)s[n-1]=arguments[n];return this.doIfEnabled((function(){var n;return(n=t.console).debug.apply(n,[t.addPrefix(e)].concat(s))}))},e.prototype.dirxml=function(e){var t=this;return this.doIfEnabled((function(){return t.console.dirxml(e)}))},e.prototype.exception=function(e){for(var t=this,s=[],n=1;n<arguments.length;n++)s[n-1]=arguments[n];return this.doIfEnabled((function(){var n;return(n=t.console).exception.apply(n,[t.addPrefix(e)].concat(s))}))},e.prototype.group=function(e){var t=this;return this.doIfEnabled((function(){return t.console.group(e)}))},e.prototype.groupCollapsed=function(e){var t=this;return this.doIfEnabled((function(){return t.console.groupCollapsed(e)}))},e.prototype.groupEnd=function(){var e=this;return this.doIfEnabled((function(){return e.console.groupEnd()}))},e.prototype.markTimeline=function(e){var t=this;return this.doIfEnabled((function(){return t.console.markTimeline(e)}))},e.prototype.profile=function(e){var t=this;return this.doIfEnabled((function(){return t.console.profile(e)}))},e.prototype.profileEnd=function(){var e=this;return this.doIfEnabled((function(){return e.console.profileEnd()}))},e.prototype.table=function(){for(var e=this,t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];return this.doIfEnabled((function(){var s;return(s=e.console).table.apply(s,t)}))},e.prototype.throw=function(e){if(e.message=this.addPrefix(e.message),this.isEnabled)throw e;setTimeout((function(){throw e}))},e.prototype.doIfEnabled=function(e){if(this.isEnabled)return e()},e.prototype.addPrefix=function(e){return!this.prefix||"string"!=typeof e&&e?e:this.prefix+e},e}()},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.qsa=t.qs=void 0,t.qs=e=>document.querySelector(e),t.qsa=e=>document.querySelectorAll(e)},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rever=void 0,t.rever=e=>e?e.toString().split("").join("."):e},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPath=void 0,t.getPath=e=>{let t=document.location.pathname,s=t.replace(/\/\s*$/,"").split("/");return e?s[e]:t}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toUpper=void 0,t.toUpper=e=>e[0].toUpperCase()+e.substring(1)},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getQuery=void 0;const n=s(3);t.getQuery=e=>{let t,s=document.location.search;try{return e=e.toLowerCase(),-1!==s.toLowerCase().indexOf(e)&&s.substring(1).split("&").forEach(s=>{let n=s.split("=");n[0].toLowerCase()===e&&(t=n[1])}),t}catch(e){n.logger.error("getQuery.ts",e)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.declOfNum=void 0,t.declOfNum=(e,t)=>t[e%100>4&&e%100<20?2:[2,0,1,1,1,2][e%10<5?e%10:5]]},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.delCookie=void 0;const n=s(8);t.delCookie=e=>n.setCookie(e,null,{expires:-1})},function(e){e.exports=JSON.parse('{"name":"spaces-plus","description":"üöÄ Powerful userscript for Spaces.ru","homepage":"https://spaces-dev.github.io/SpacesPlus","version":"3.1.2","author":{"name":"Vitalij Ryndin","email":"sys@crashmax.ru","url":"https://crashmax.ru"},"scripts":{"dev":"cross-env NODE_ENV=development webpack-dev-server --config-name main --host localhost --watch-poll","build":"cross-env NODE_ENV=production webpack --progress"},"devDependencies":{"@types/node":"^14.11.8","@types/resize-observer-browser":"^0.1.4","@types/webpack":"^4.41.22","@types/webpack-dev-server":"^3.11.0","clean-webpack-plugin":"^3.0.0","copy-webpack-plugin":"^6.2.1","cross-env":"^7.0.2","json-beautify":"^1.1.1","optimize-css-assets-webpack-plugin":"^5.0.4","ts-debug":"^1.3.0","ts-loader":"^8.0.4","ts-node":"^9.0.0","typescript":"^4.0.2","webpack":"^4.44.2","webpack-cli":"^3.3.12","webpack-dev-server":"^3.11.0","webpack-userscript":"^2.5.6","webpack-zip-files-plugin":"^1.0.0"}}')},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCookie=void 0,t.getCookie=e=>{let t=document.cookie.match(new RegExp(`(?:^|; )${e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")}=([^;]*)`));return t?decodeURIComponent(t[1]):void 0}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getParams=void 0,t.getParams=e=>{const t={};let s=document.createElement("a");s.href=e;let n=s.search.substring(1).split("&");for(let e=0;e<n.length;e++){let s=n[e].split("=");t[s[0]]=decodeURIComponent(s[1])}return t}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.playSound=void 0,t.playSound=(e,t)=>{let s=new Audio(e);s.volume=t/100,s.play()}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.confirmBox=void 0;const n=s(0);t.confirmBox=(e,t,s)=>{let i=n.qs("#SP_PLUS_ALERT"),o=n.qs("#SP_PLUS_CONFIRM"),l=n.ce("button",{html:"–î–∞",href:"#",class:"btn btn_red btn_input"}),a=n.ce("a",{html:"–û—Ç–º–µ–Ω–∞",href:"#",class:"btn btn_white btn_input right sticker-close_btn"}),c=n.ce("small",{class:"pad_t_a grey",html:"–≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –±—É–¥–µ—Ç –æ—Ç–º–µ–Ω–∏—Ç—å."}),d=n.ce("div",{class:"content-item3 wbg oh",html:e+'<div class="pad_t_a"></div>'}),p=n.ce("div",{class:"pad_t_a"});null==i||i.remove(),null==o||o.remove(),l.onclick=()=>(r(),s(),!1),a.onclick=()=>(r(),!1);let u=n.ce("div",{id:"SP_PLUS_CONFIRM",class:"sticker sp-sticker-anim"});t&&d.appendChild(c),d.appendChild(p),d.appendChild(l),d.appendChild(a),u.appendChild(d),document.body.appendChild(u)};const r=()=>n.qs("#SP_PLUS_CONFIRM").remove()},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isValidUrl=void 0,t.isValidUrl=e=>null!==e.match(/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)/g)},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.messageBox=void 0;const n=s(0);t.messageBox=(e,t,s,r)=>{let i=n.qs("#SP_PLUS_ALERT"),o=n.qs("#SP_PLUS_CONFIRM"),l=n.ce("div",{class:"sticker w400 sp-sticker-anim",id:"SP_PLUS_ALERT"});null==i||i.remove(),null==o||o.remove();let a=n.ce("div",{class:"content-item3 wbg oh",html:(s?'<span class="sp sp-remove-grey pointer right notif_close close_h" onclick="document.body.removeChild(this.parentNode.parentNode)" title="–ó–∞–∫—Ä—ã—Ç—å"></span>':"")+`${e}<div class="pad_t_a"></div><span style="font-size: 13px" class="grey">${t}</span>`});l.appendChild(a),document.body.appendChild(l),void 0!==r&&setTimeout(()=>{var e,t;null===(t=null===(e=a.parentNode)||void 0===e?void 0:e.parentNode)||void 0===t||t.removeChild(l)},1e3*r)}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.historyPush=void 0;const n=s(3);t.historyPush=(e,t,s)=>{try{document.title=s,history.pushState(e,s,t)}catch(e){n.logger.error("historyPush.ts",e)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.modifyObject=void 0,t.modifyObject=(e,t,s,n)=>{let r={},i=0;for(let o in e)e.hasOwnProperty(o)&&(i===n&&t&&s&&(r[t]=s),r[o]=e[o],i++);return!n&&t&&s&&(r[t]=s),r}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.notification=void 0,t.notification=(e,t,s)=>{const n=new Notification(e,{body:t,icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAWRSURBVHgB7VpdTBxVFP5mFujCDgos7GKM2pTSQtcirYEYS5smlb5Io/hgDMEaH0wfjEkbNfFNfWxiY3zQqA9GafWBJmKMbQKUSAvYCIa6CKz8BvCh+9eFdn9oKex478zOsuzuzNzZJSGb9EsmLNxzyfm+e849955ZDgQ1NS0fcxzOiiJKkAMgvq4A4vcu15Vz3P79pz7nOPEschOfcrW1Lcu5onwyiN8rfK46T0FCqYRHjuMRgZ1GHrKCmPQ7p2lL8o3GrY6dMWRMQBSj0rNJgiPO8bGf8u+JtjIBhQQXs+OQLZmMCCjOP9b8Ckpb30Q0EkJwoBvBwV5s3PFBjkxeIkIdprZHD7Xh4N6TeLAWwvBEF8Zmesi4SSKdDRGOVGHR2BQR0egGhCMnUPHOBymjwYEeLHddxDohQh2jqtdVn8CpYx9usVsJejBwq4MQuRYjkRkRwwSomtHoOp660IH8cruqHSUS6OrAQ58b771xCSXFlWntKJGxmW6JyL2wN7YqCgl9MgYJyOpbiPq2NOqnQ73rRzSsNiMUsmnaUSLTi0MYmezC3ZBPIpIun5JhKi/f9wlY3ZeSMApr2xnkV1QyzTn//NdoOHgZQrEPy4HdWFuzpLUz7xLwpK0WjY7X8Lhgg9s/I+WL4jxdFY7LioC8i5hrHChrPc00o848gdaSq9LnsrIFHHBcReUTk2Q1KhDWWBG7tQqNzypEZhOIcAnhZZCAon7pq+3Y9UwVyxS8b/sK9nzflr8Jgg97q/vJSgjw+6o158tEWqXw8gTmU5ynYK7ElEBeuQ3FR08y2dvzvKgrnFAdrz/UiYKCMFjQ/MKZ2NadOsZEQC5ERP3WdrCiveyy5jir8xTmAkHxJCUPGAmIMFmJ+k3s6jcX92vauG87VBM6Gc7pntgnLmUVdAmI0gwRQtNLYIWe+hRzs8fBirGZ3tgulFEOyMlrKPbNE5o2dBeaZSTgvjOHJfdY7JyVCh0CsvNCUzOpumz7fl3hZMrOkwznrdfBiuHxrqTqvBWaBOJbp5HkLe3UHDei/krQjX9mezWrsQYB4+rTxNVT3zXRAlbcGL0UCx11N1VHFPWLCQFW6KlPsbTUABZsqs+phg+FCgHl2FCHwtrnwAKauHrqz84cl0KIBVOLN3XVh9poRuozbJ3Ov40mb/oDXCJUCeSVV2zbsYHCiPq0cAUjXigHOC2kISAXLnpVZAWL+q7Jl8GKG6MXIV9J9ctUioUcPiIsh18ECyx8mOnYECB3ARY4p7vJzczHFD4UaSlud+vD2LHhWnznERnuiikE5C2Lx/IvHWBBOGrBzbD61pj5sYFNwDQXGnnig7l/yYXcg4Kn98BkETT/yfXQEWmaPc8HwRTZMjby59vM4fP7X9/Bu7wAns+KAOKFY21pHnd7fsZDvz6RsVUHWYlGzK/tRlXBgkSEqj80+C5YQAvXbwMXiPMmpuSN+6rdlRBjNyE5semRmtYGluJGE/uAKwTvPNvR4dfrn2F8rk8iYCT/GNsqYry40YdWaHo31iOycK4NjrJ6HDt8WrUvREHV/7LzrZj6JhgB46Wei+8M9Fn3+6Q24r3BbpiKhLSXfNrYCg/1wRtYwAhpJdKLud26R2qfJIO2Gv/zjCd057adQCIRfnObi0QQHv2DkOkBX2SJE1l1ORH46VvgfiTe//SSrgJ11EN2GqGoNL4ii7ed6Bv+Bhuk22dUfckj473RRIjx/KCf+aIi8ghkhTzxfudmPG/a0jCkLRM64gnMpbFlR5bvB5Swktvm4up9bJBHUV3dloOPbJcUctJm/p4lSwIK9HuYibY8z8VfdohZrD/FjrxiUpzO1nmKRy/5dhq5T0D+4kRuQvmqwRfIWUR/MPn90/1W675ScoKtIX8xIwcQi5rzU1NXPvof3uh4/Jx+XhEAAAAASUVORK5CYII=",tag:"events"});s?setTimeout(()=>n.close(),1e3*s):n.addEventListener("click",e=>console.log(e))}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setSettings=t.readSettings=void 0;const n=s(0),r=s(2);t.readSettings=()=>{let e=n.getCookie("SP_PLUS_SET");try{e&&(e=JSON.parse(e),r._SETTINGS=n.extend(r._SETTINGS,e))}catch(e){n.logger.error("readSettings",e)}},t.setSettings=(e,t)=>{try{if(-1!==e.indexOf(".")){let s=e.split(".");r._SETTINGS[s[0]][s[1]]=t}else r._SETTINGS[e]=t;n.setCookie("SP_PLUS_SET",JSON.stringify(r._SETTINGS))}catch(e){n.logger.error("setSettings",e)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.adBlock=void 0;const n=s(0);t.adBlock=()=>{try{if(n.qsa('img[src$="static/i/close3.png"]').forEach(e=>{var t,s;return null===(s=null===(t=e.parentElement)||void 0===t?void 0:t.parentElement)||void 0===s?void 0:s.remove()}),n.qsa('a[title="–†–µ–∫–ª–∞–º–∞"').forEach(e=>{var t;return null===(t=e.parentElement)||void 0===t?void 0:t.remove()}),n.qsa("#vk_groups").forEach(e=>{var t;return null===(t=e.parentElement)||void 0===t?void 0:t.remove()}),!n.qs("#SP_PLUS_ADBLOCK")){let e=n.ce("script",{type:"text/javascript",id:"SP_PLUS_ADBLOCK",html:'var rawOpen = XMLHttpRequest.prototype.open; XMLHttpRequest.prototype.open = function() { if (!this._hooked) { this._hooked = true; setupHook(this); }; rawOpen.apply(this, arguments); }; function setupHook(xhr) { function getter() { delete xhr.responseText; var ret = xhr.responseText; var json = JSON.parse(ret); json.reklama = ""; json.rightbar_reklama = ""; json.rightbar_app = ""; json.sidebar_reklama = ""; ret = JSON.stringify(json); setup(); return ret; }; function setup() { Object.defineProperty(xhr, "responseText", { get: getter, configurable: true }); } setup(); };'});document.getElementsByTagName("head")[0].appendChild(e)}}catch(e){n.logger.error("adBlock.ts",e)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.oldHeader=void 0;const n=s(0);t.oldHeader=e=>{n.qsa("span.horiz-menu__link-text").forEach(e=>e.remove());let t=n.qsa("a.horiz-menu__link"),s=t[2].cloneNode(!0),r=t[4].cloneNode(!0);(e||"/mail/"===t[2].pathname)&&(t[4].replaceWith(s),t[2].replaceWith(r))}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scrollMove=void 0;const n=s(0),r=s(2);t.scrollMove=e=>{let t=n.qs("#scroll_page");try{e&&!t.hasAttribute("sp-replace")?(t.style.left="auto",t.style.right="0",t.setAttribute("sp-replace","1")):!r._SETTINGS.rscroll&&t.hasAttribute("sp-replace")&&(t.style.left="0",t.style.right="auto",t.removeAttribute("sp-replace"))}catch(e){n.logger.error("scrollMove.ts",e)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.userStatus=void 0;const n=s(0),r=s(1);t.userStatus=e=>{let t=n.ce("div",{html:"–î–ª—è —Ä–∞–±–æ—Ç—ã <b>Spaces+</b> –Ω–µ–æ–±—Ö–æ–¥–∏–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è!"});if(1===r.DEVICE.id||2===r.DEVICE.id){let s=n.ce("div",{class:"oh busi",style:"border: 1px solid #ff9a95; background: #fdf3ef",html:"–ò—Å–ø–æ–ª—å–∑—É–µ–º–∞—è –≤–µ—Ä—Å–∏—è —Å–∞–π—Ç–∞ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –¥–ª—è —Ä–∞–±–æ—Ç—ã <b>Spaces+</b>"});return"01001"===e&&s.prepend(t),n.qs("#main_wrap").prepend(s),!1}if((3===r.DEVICE.id||4===r.DEVICE.id)&&"01001"===e){let e=n.ce("div",{class:"oh nl system-message",style:"border: 1px solid #ff9a95; background: #fdf3ef"});return e.prepend(t),n.qs("#top_info_block").prepend(e),!1}return!0}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.userOnline=void 0;const n=s(0),r=s(1);t.userOnline=()=>{let e=n.getPath(),t=n.getPath(3),s=`/anketa/index/${t}/`;if(e===s&&r.DATA.ONLINE!==t){let e=Array.from(n.qsa("div.info-item__title")).filter(e=>"–í—Ä–µ–º—è –æ–Ω–ª–∞–π–Ω:"===e.textContent);if(t&&e){r.DATA.ONLINE=t;try{n.http("GET",`${r.SPACES}/anketa/index/${t}/`,!0).then(t=>{var s,r;const i=null===(r=null===(s=t.parsedBody)||void 0===s?void 0:s.user_widget)||void 0===r?void 0:r.online_time;if(i){let s=(i/3600).toFixed(2).split("."),r=s[0]>0?`${s[0]} —á, ${Math.trunc(s[1]/(100/60))} –º–∏–Ω`:Math.trunc(s[1]/(100/60))+" –º–∏–Ω";e[0].nextElementSibling.textContent=r,n.logger.info("–í—Ä–µ–º—è –æ–Ω–ª–∞–π–Ω: "+r,t)}})}catch(e){n.logger.error("userOnline.ts",e)}}}else e!==s&&(r.DATA.ONLINE=null)}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.apiDebugger=void 0;const n=s(0);t.apiDebugger=e=>{if(e&&!n.qs("#spaces_api_debugger")){let e=n.ce("script",{type:"text/javascript",html:'var Arr=[\'<div class="widgets-group widgets-group_top js-container__block" id="spaces_api_debugger"><div class="content"><a href="#" class="stnd-link list-link-blue c-blue" id="api_debug-button"><div class="text-gray"><span class="sp"></span><span class="t darkblue c-darkblue b js-text" style="margin-left: 5px">API Debugger</span></div></a><div id="api_debug-place"></div></div></div>\',"append","parent","#location_header","debugger"];$(Arr[3])[Arr[2]]()[Arr[1]](Arr[0]),require(Arr[4]);void(0);'});document.getElementsByTagName("head")[0].appendChild(e)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.coinsAccept=void 0;const n=s(0),r=s(1);t.coinsAccept=()=>{try{n.qsa(`a[href^="${r.SPACES}/services/gift_get/"`).forEach(e=>{var t;e.click(),null===(t=e.parentElement)||void 0===t||t.remove(),n.logger.info("–°–æ–±—Ä–∞–ª–∏ –º–æ–Ω–µ—Ç–∫—É",e)})}catch(e){n.logger.error("coinsAccept.ts",e)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteBlogs=void 0;const n=s(0),r=s(1);t.deleteBlogs=()=>{var e,t;let s=n.getPath().split("/"),o=n.qs("#SP_PLUS_BUTTONS_B"),l=n.qsa(`a[href^="${r.SPACES}/diary/editaccess/"`);try{if("view"!==s[2]&&o&&o.remove(),"diary"===s[1]&&"view"===s[2]&&l&&!n.qs('input[id^="SP_DB_"')){let s=[];for(let r of l){let i="SP_DB_"+n.getParams(r.href).id,o=n.ce("input",{class:"sp-cbfb sp-checkbox-square",type:"checkbox",id:i});null===(e=r.parentElement)||void 0===e||e.appendChild(o),null===(t=r.parentElement)||void 0===t||t.appendChild(n.ce("label",{class:"sp-ch-blogs",style:"margin: 2px",attr:{for:i}})),s.push(o)}let o=n.ce("div",{class:"widgets-group user__tools_last",id:"SP_PLUS_BUTTONS_B"});const a=n.ce("button",{class:"user__tools-link table__cell sp_btn-list",html:'\n                    <span class="sp sp-ok-blue"></span>\n                    <span class="sp-ch-text">–í—ã–±—Ä–∞—Ç—å –≤—Å–µ</span>\n                ',onclick:e=>{if(e.target instanceof Element){let t="SPAN"===e.target.nodeName?e.target.parentNode:e.target;for(let e of s)e.checked=-1!==t.innerHTML.indexOf("–í—ã–±—Ä–∞—Ç—å –≤—Å–µ");t.innerHTML=`\n                            <span class="sp sp-ok-blue"></span>\n                                <span class="sp-ch-text">\n                                ${-1!==t.innerHTML.indexOf("–í—ã–±—Ä–∞—Ç—å –≤—Å–µ")?"–°–Ω—è—Ç—å –æ—Ç–º–µ—Ç–∫–∏":"–í—ã–±—Ä–∞—Ç—å –≤—Å–µ"}\n                            </span>\n                        `}}}),c=n.ce("button",{class:"user__tools-link table__cell sp_btn_line sp_btn-list",html:'\n                    <span class="sp sp-remove-red"></span>\n                    <span class="sp-del-text">–£–¥–∞–ª–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ</span>\n                ',onclick:()=>{let e=[];for(let t of s)t.checked&&e.push(/^SP_DB_([0-9]+)$/i.exec(t.id)[1]);let t=e.length;return t>0?n.confirmBox(`–í—ã –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å ${t} ${i(t)}?`,!0,async()=>{let s=t;for(let o of e)n.messageBox(`–û—Å—Ç–∞–ª–æ—Å—å —É–¥–∞–ª–∏—Ç—å ${t--} –∏–∑ ${s} ${i(t)}`,'–ü–æ–¥–æ–∂–¥–∏—Ç–µ –Ω–µ–º–Ω–æ–≥–æ... <span style="padding-right: 10px" class="ico ico_spinner"></span>',!1),await n.http("GET",`${r.SPACES}/diary/delete/?CK=${r.DATA.CK}&id=${o}&Sure=1`,!0).then(e=>{n.logger.info("–£–¥–∞–ª–∏–ª–∏ –±–ª–æ–≥",e)});document.location.reload()}):n.messageBox("–í–Ω–∏–º–∞–Ω–∏–µ!","–û—Ç–º–µ—Ç—å—Ç–µ –≥–∞–ª–æ—á–∫–æ–π, —Ç–µ –±–ª–æ–≥–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑",!0,5),!1}});o.appendChild(c),o.appendChild(a),n.qs('input[id^="SP_DB_"')&&n.qs("#main").after(o)}}catch(e){n.logger.error("deleteBlogs.ts",e)}};const i=e=>"–±–ª–æ–≥"+n.declOfNum(e,["","–∞","–æ–≤"])},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.firstLaunch=void 0;const n=s(0),r=s(1);t.firstLaunch=()=>{try{if(void 0===n.getCookie("SP_LAUNCH")&&"spaces-blogs.com"!==r.BASE_URL&&"spac1.net"!==r.BASE_URL){if(n.messageBox("–°–ø–∞—Å–∏–±–æ –∑–∞ —É—Å—Ç–∞–Ω–æ–≤–∫—É Spaces+",`\n                <b style="color: #f86934">–í–ù–ò–ú–ê–ù–ò–ï!</b></br></br>\n                –í–æ –∏–∑–±–µ–∂–∞–Ω–∏—è –ø–æ–¥–¥–µ–ª–æ–∫, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –≤–æ—Ä–æ–≤–∞—Ç—å –ø–∞—Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —Å–∫—Ä–∏–ø—Ç —Å–∫–∞—á–∏–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ <a href="https://spaces-dev.github.io" target="_blank">—Å–∞–π—Ç–∞</a></br></br>\n                –° –≤–æ–ø—Ä–æ—Å–∞–º–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —Å–∫—Ä–∏–ø—Ç–∞, –ø–∏—Å–∞—Ç—å –≤ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ <a href="${r.SPACES}/soo/extension/" target="_blank">Spaces+</a></br></br>\n                <div id="SP_LAUNCH_BUTTON" class="pad_t_a"></div>\n                `,!0),n.qs("#SP_LAUNCH_BUTTON")){const e=n.ce("a",{href:r.SPACES+"/settings/?sp_plus_settings=1",class:"btn btn_white btn_input right sticker-close_btn",html:"–ü–µ—Ä–µ–π—Ç–∏ –∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º",onclick:()=>n.qs("#SP_PLUS_ALERT").remove()});n.qs("#SP_LAUNCH_BUTTON").appendChild(e)}n.setCookie("SP_LAUNCH","1")}}catch(e){n.logger.error("firstLaunch.ts",e)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.karmaAccept=void 0;const n=s(0),r=s(1);t.karmaAccept=()=>{try{n.qsa(`a[href^="${r.SPACES}/mysite/rate_n_karma/karma/?Accept="`).forEach(e=>{var t;e.click(),null===(t=e.parentElement)||void 0===t||t.remove(),n.logger.info("–°–æ–±—Ä–∞–ª–∏ –∫–∞—Ä–º—É!",e)})}catch(e){n.logger.error("karmaAccept.ts",e)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.soundNotify=void 0;const n=s(0),r=s(1),i=s(2);t.soundNotify=()=>{try{const e={mail:n.qs("#mail_notif_cnt"),journal:n.qs("#jour_notif_cnt"),feed:n.qs("#lent_notif_cnt")};let t=0;for(let s in e)e[s]&&i._SETTINGS.notifySet[s]&&""!==e[s].innerHTML&&!isNaN(e[s].innerHTML)&&(t+=parseInt(e[s].innerHTML,10));if(t>r.DATA.EVENTS){n.playSound(i._SETTINGS.notifySet.url,i._SETTINGS.notifySet.volume);let e=n.declOfNum(t,["–Ω–æ–≤–æ–µ —Å–æ–±—ã—Ç–∏–µ","–Ω–æ–≤—ã—Ö —Å–æ–±—ã—Ç–∏—è","–Ω–æ–≤—ã—Ö —Å–æ–±—ã—Ç–∏–π"]);n.notification(n.toUpper(e)+" –Ω–∞ Spaces!",`–£ –í–∞—Å ${t} ${e}!`,5),r.DATA.EVENTS=t}else t<r.DATA.EVENTS&&(r.DATA.EVENTS=t)}catch(e){n.logger.error("soundEvents.ts",e)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.betaFeatures=void 0;const n=s(0);t.betaFeatures=()=>{let e=n.qs("div.progress-item__label"),t=n.qs("div.progress-item__runner");if(e&&t&&!n.qs("#SP_BETA_FEATURES")){let s=e.textContent.split("/"),n=Math.round(Number(s[0])/Number(s[1])*100);n>30&&(e.style.color="#f5f5f5"),t.id="SP_BETA_FEATURES",t.style.width=n+"%"}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.blockedFiles=void 0;const n=s(0);t.blockedFiles=()=>{try{let e=n.qs('a[class*="__adv_download"'),t=n.qs('div[id^="download_wrap_"'),s=n.qs("#SP_LINK_SSL");if("files"===n.getPath(1)&&"view"===n.getPath(2)&&t&&!e&&!s){let e=n.ce("a",{href:"#",class:"list-link list-link-blue stnd-link_disabled c-blue",id:"SP_LINK_SSL",html:'\n                    <span class="ico bp ico_spinner"></span>\n                    <span class="t js-text">–ó–∞–≥—Ä—É–∑–∫–∞</span>\n                '});t.children[0].appendChild(e),n.http("GET",document.location.href,!0).then(t=>{var s;const r=null===(s=t.parsedBody)||void 0===s?void 0:s.info.file_widget;r&&(e.classList.remove("stnd-link_disabled"),e.href=r.preview.downloadLinkSSL,e.innerHTML=`\n                        <span class="js-ico ico ico_download2_blue"></span>\n                        <span class="t js-text">–°–∫–∞—á–∞—Ç—å (${r.downloadBox.weight})</span>\n                    `,n.logger.info("–ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞",t))})}}catch(e){n.logger.error("blockedFiles.ts",e)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.favoriteUser=void 0;const n=s(0),r=s(1);t.favoriteUser=async()=>{var e,t,s;try{let o=n.getPath(1),l=n.getPath(2),a=n.getPath(3),c=n.qsa("td.table__cell_last"),d=n.qs("#SP_PLUS_INFAVORITE");if(("mysite"===o||"anketa"===o&&"edit"!==l||"activity"===o)&&r.DATA.USERNAME!==n.trim(n.qs("#location_bar_1_0").textContent)&&a&&c.length>0&&!d){let o=n.ce("td",{class:"table__cell stnd-link_disabled",id:"SP_PLUS_INFAVORITE"}),l=n.ce("a",{href:"#",id:"SP_FV_LOADER",class:"stnd-link",html:'\n                        <span class="ico bp ico_spinner"></span>\n                        <span class="t js-text">–ó–∞–≥—Ä—É–∑–∫–∞</span>\n                    '});o.appendChild(l),null===(e=c[1].parentElement)||void 0===e||e.insertBefore(o,c[1]);let d=null===(s=null===(t=c[1])||void 0===t?void 0:t.parentElement)||void 0===s?void 0:s.childNodes;for(let e in d)"TD"===d[e].nodeName&&(d[e].width="25%");await n.http("GET",`${r.SPACES}/anketa/index/${a}`,!0).then(e=>{var t;const s=null===(t=e.parsedBody)||void 0===t?void 0:t.user_widget;if(void 0!==s){let e=n.ce("a",{href:`${r.SPACES}/bookmarks/add/?object_id=${s.id}&object_type=11`,class:"stnd-link",attr:{title:"–î–æ–±–∞–≤–∏—Ç—å –≤ –∑–∞–∫–ª–∞–¥–∫–∏"},html:'<span class="sp sp-fav"></span> B –∑–∞–∫–ª–∞–¥–∫–∏',onclick:()=>(n.confirmBox(`–î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è <b>${s.name}</b> –≤ –∑–∞–∫–ª–∞–¥–∫–∏?`,!1,async()=>{await n.http("POST",r.SPACES+"/ajax/bookmarks/add/",!1,`object_id=${s.id}&object_type=11&show_all_tags_state=0&new_tags=–õ—é–¥–∏&cfms=–î–æ–±–∞–≤–∏—Ç—å&CK=${r.DATA.CK}`).then(e=>{200===e.status?i(s.id,s.name,o):n.logger.error("bookmarks/add",e)})}),!1)});i(s.id,s.name,o),l.remove(),o.classList.remove("stnd-link_disabled"),o.appendChild(e)}else l.parentElement.style.display="none";n.logger.info("anketa/index",e)})}}catch(e){n.logger.error("favoriteUser.ts",e)}};const i=async(e,t,s)=>{try{await n.http("GET",`${r.SPACES}/bookmarks/add/?object_id=${e}&object_type=11`,!0).then(e=>{var r;const i=null===(r=e.parsedBody)||void 0===r?void 0:r.delete_link;i&&(s.firstElementChild.href=i.delete_URL,s.firstElementChild.title="–£–¥–∞–ª–∏—Ç—å –∏–∑ –∑–∞–∫–ª–∞–¥–æ–∫",s.firstElementChild.innerHTML='<span class="sp sp-fav-on"></span><span style="color: #61a961"> –í –∑–∞–∫–ª–∞–¥–∫–∞—Ö</span>',s.onclick=()=>(n.confirmBox(`–í—ã –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è <b>${t}</b> –∏–∑ –∑–∞–∫–ª–∞–¥–æ–∫?`,!1,async()=>{await n.http("GET",i.delete_URL,!1).then(e=>{200===e.status?document.location.reload():n.logger.error("bookmarks/remove",e)})}),!1)),n.logger.info("–í –∑–∞–∫–ª–∞–¥–∫–∞—Ö?",e)})}catch(e){n.logger.error("isFav",e)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.freeStickers=void 0;const n=s(0);t.freeStickers=e=>{if(e&&!n.qs("#SP_PLUS_STICKERS")){let e=n.ce("script",{type:"text/javascript",id:"SP_PLUS_STICKERS",html:'var open=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(e,o,t){var n=open.apply(this,arguments);return-1==o.indexOf("mail/sendMessage")&&-1==o.indexOf("diary/new")&&-1==o.indexOf("comments/add")||this.setRequestHeader("X-Proxy","spaces"),n};'});document.getElementsByTagName("head")[0].appendChild(e)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.recentSmiles=void 0;const n=s(0),r=s(1),i=s(2);t.recentSmiles=()=>{let e=n.qs("#SP_RECENT_SMILES"),t=n.qs(".smiles_menu-header"),s=JSON.parse(localStorage.getItem("sp_recent_smiles")||"{}");try{if(t){let e=document.querySelectorAll('img[smile^=":"]');e&&o(e,s)}if(t&&!e){let e=document.querySelectorAll('a[href^="#sm-tab="]');for(let t of e)t.addEventListener("click",()=>{i._SETTINGS.sticker&&document.querySelectorAll(".stickers_list>div").forEach(e=>e.remove());let e=document.querySelectorAll('img[smile^=":"]');e&&o(e,s);let t=document.querySelectorAll('a[href^="#sm-cat="]');for(let n of t)n.addEventListener("click",()=>{o(e,s)})});let l=n.qs(".smiles_menu-body"),a=n.ce("span",{class:"sp sp-grey-del trash-btn",onclick:()=>{n.confirmBox("–í—ã –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ö–æ—Ç–∏—Ç–µ –æ—á–∏—Å—Ç–∏—Ç—å —Ä–∞–Ω–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ —Å–º–∞–π–ª–∏–∫–∏?",!0,()=>{localStorage.removeItem("sp_recent_smiles"),document.location.reload()})}}),c=n.ce("img",{id:"SP_RECENT_SMILES",class:"sp_recent-smile-btn",attr:{src:r.HTTP+"//spac.me/i/mail/restore_grey.png",title:"–†–∞–Ω–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ"},onclick:()=>{if(l.innerHTML="",Object.keys(s).length>0)for(let[e,t]of Object.entries(s)){let s=n.ce("img",{class:"sp_recent-smile",attr:{src:e,smile:t},onclick:()=>{var e;(null!==(e=n.qs('textarea[tabindex="1"]'))&&void 0!==e?e:n.qs('textarea[name="msg"]')).value+=t+" "}});l.append(s)}else{let e=n.ce("div",{style:"color: #a4b7c4; text-align: center",html:`<img src="${r.HTTP}//spac.me/i/st/compdude11.gif"></br></br>–°–ø–∏—Å–æ–∫ —Ä–∞–Ω–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã—Ö —Å–º–∞–π–ª–∏–∫–æ–≤ –ø—É—Å—Ç</br>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–º–∞–π–ª–∏–∫–∏ –∏–∑ –º–µ–Ω—é —Å–º–∞–π–ª–∏–∫–æ–≤, —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å –∏—Ö —Å—é–¥–∞</br></br>`});l.append(e)}}});t.prepend(c),t.prepend(a),i._SETTINGS.recentSmiles.show&&Object.keys(s).length>0&&n.qs("#SP_RECENT_SMILES").click()}}catch(e){n.logger.error("recentSmiles.ts",e)}};const o=(e,t)=>{for(let s of e)s.addEventListener("click",()=>{let e=n.modifyObject(t,s.src,s.attributes.smile.value,0);localStorage.setItem("sp_recent_smiles",JSON.stringify(e))})}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.settingsMenu=void 0;const n=s(0),r=s(4),i=s(1),o=s(2);t.settingsMenu=()=>{var e,t;if("/settings/"===n.getPath()&&!n.qs("#SP_PLUS_SETLINK"))try{const s=n.qs(`a[href^="${i.SPACES}/settings/notification/"`);if(s){const l=n.getQuery("sp_plus_settings"),a=n.getQuery("sp_changelog"),c=n.getQuery("sp_backup"),d=n.ce("a",{href:i.SPACES+"/settings/?sp_plus_settings=1",id:"SP_PLUS_SETLINK",class:s.className,html:'\n                        <span>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ Spaces+</span>\n                        <span class="ico ico_arr ico_m"></span>\n                    ',onclick:()=>{var e,t,s;/(\&)sp_plus_settings=1/i.test(document.location.href)||n.historyPush({sp_plus_settings:l},i.SPACES+"/settings/?sp_plus_settings=1","–ù–∞—Å—Ç—Ä–æ–π–∫–∏ Spaces+");let d=null===(s=null===(t=null===(e=n.qs("#SP_PLUS_SETLINK").parentElement)||void 0===e?void 0:e.parentNode)||void 0===t?void 0:t.parentNode)||void 0===s?void 0:s.parentNode;"main"===d.id&&(n.qs("#header_path").innerHTML=n.qs("#header_path").innerHTML.replace("–ù–∞—Å—Ç—Ä–æ–π–∫–∏",`\n                                <a href="${i.SPACES}/settings/">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</a>\n                                <span class="location-bar__sep ico"></span>\n                                <span id="SP_PLUS_SETHEAD2">Spaces+</span>\n                            `),d.innerHTML=`\n                                <div class="widgets-group widgets-group_top js-container__block">\n                                    <div class="b-title cl b-title_center b-title_first oh">\n                                        <div class="b-title__item" id="SP_PLUS_SETHEAD">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ Spaces+</div>\n                                    </div>\n                                    <div class="content">\n                                        <div class="list f-c_fll">\n                                            <div id="SP_PLUS_SETAREA" class="no-select"></div>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div id="SP_PLUS_ABOUT"></div>\n                                <a id="SP_PLUS_SETBACK" href="${i.SPACES}/settings/?" class="link-return full_link">\n                                    <span class="ico ico_arrow-back"></span>\n                                    <span class="m">–ù–∞–∑–∞–¥</span>\n                                </a>\n                            `);const p=n.qs("#SP_PLUS_SETAREA");if(p){for(let e in o._SETTINGS)if(void 0!==o._SETSTRINGS[e]){let t=3===i.DEVICE.id&&("rscroll"===e||"hrightbar"===e||"weather"===e),s=n.ce("input",{id:e,type:"checkbox",class:"sp-checkbox-square",attr:{unsupported:t},checked:o._SETTINGS[e],onclick:e=>{const{id:t,checked:s}=e.target;if("true"===e.target.attributes.unsupported.value&&s)return n.messageBox("–í–Ω–∏–º–∞–Ω–∏–µ!","–î–ª—è —Ä–∞–±–æ—Ç—ã –¥–∞–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω—É—é –≤–µ—Ä—Å–∏—é —Å–∞–π—Ç–∞",!0,5),!1;switch(n.setSettings(t,s),t){case"rscroll":r.scrollMove(s);break;case"hrightbar":r.hiddenRightbar(s);break;case"friendsOn":r.friendsOnline(s),s?r.settingsFriends(e.target):n.qs("#SP_PLUS_MAXFRIENDS").remove();break;case"sticker":s?r.freeStickers(s):n.qs("#SP_PLUS_STICKERS").remove();break;case"stickyheader":r.stickyHeader(s);break;case"oldheader":r.oldHeader(s);break;case"bodystyle":s?r.settingsBackground(e.target):(n.qs("#SP_PLUS_BODYSTYLE").remove(),n.qs("#SP_PLUS_INJSTYLE").remove());break;case"weather":s?r.settingsWeather(e.target):(n.qs("#SP_WIDGET_WEATHER").remove(),n.qs("#SP_WEATHER_SETTINGS").remove())}}}),l=n.ce("label",{html:o._SETSTRINGS[e],attr:{for:e}}),a=n.ce("label",{class:"stnd-link bstrwrap"+(t?" sp_unsupported":"")});if(a.appendChild(s),a.appendChild(l),void 0!==o._DESCSTRINGS[e]){let t=n.ce("a",{href:"#",class:"sp sp-info sp_info-btn",onclick:()=>(n.messageBox(o._SETSTRINGS[e],o._DESCSTRINGS[e],!0),!1)});a.appendChild(t)}p.appendChild(a),p.appendChild(a),t&&o._SETTINGS[e]&&n.qs("#"+e).click()}o._SETTINGS.friendsOn&&r.settingsFriends(n.qs("#friendsOn")),o._SETTINGS.bodystyle&&r.settingsBackground(n.qs("#bodystyle")),o._SETTINGS.notify&&r.settingsNotify(n.qs("#notify")),o._SETTINGS.weather&&r.settingsWeather(n.qs("#weather"));let e=n.ce("div",{class:"sp_plus_line",html:'<span class="sp_plus_text">–í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Å–∞–π—Ç–∞</span>'}),t=n.ce("div",{class:"sp_plus_line",html:'<span class="sp_plus_text">–ü—Ä–æ—á–µ–µ</span>'});p.appendChild(e),r.settingsFeatures(p),p.appendChild(t);const s=n.ce("a",{href:i.SPACES+"/settings/?sp_plus_settings=1&sp_backup=1",class:"stnd-link stnd-link_arr sp_font_sm",id:"sp_backup",html:'\n                                    <span class="b" style="color: #2e7d32">\n                                        <span class="sp sp-backup-g mr-14"></span>–ò–º–ø–æ—Ä—Ç –∏ —ç–∫—Å–ø–æ—Ä—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫\n                                        <span class="ico ico_arr ico_m"></span>\n                                    </span>\n                                ',onclick:()=>(n.qs("#SP_PLUS_SETHEAD").innerHTML="–ò–º–ø–æ—Ä—Ç –∏ —ç–∫—Å–ø–æ—Ä—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫",n.qs("#SP_PLUS_SETHEAD2").innerHTML=`\n                                        <a href="${i.SPACES}/settings/?sp_plus_settings=1">Spaces+</a>\n                                        <span class="location-bar__sep ico"></span> –ò–º–ø–æ—Ä—Ç –∏ —ç–∫—Å–ø–æ—Ä—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫\n                                    `,n.qs("#SP_PLUS_SETBACK").href=i.SPACES+"/settings/?sp_plus_settings=1",/(\&)sp_backup=1/i.test(document.location.href)||n.historyPush({sp_plus_settings:l,sp_backup:c},i.SPACES+"/settings/?sp_plus_settings=1&sp_backup=1","Spaces+: –ò–º–ø–æ—Ä—Ç –∏ —ç–∫—Å–ø–æ—Ä—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫"),r.settingsBackupMenu("#SP_PLUS_SETAREA"),!1)});p.appendChild(s);const d=n.ce("a",{href:i.SPACES+"/settings/?sp_plus_settings=1&sp_changelog=1",class:"stnd-link stnd-link_arr sp_font_sm",id:"sp_changelog",html:'\n                                    <span class="b" style="color: #2196f3">\n                                        <span class="sp sp-restore-blue mr-14"></span>–ò—Å—Ç–æ—Ä–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π\n                                        <span class="ico ico_arr ico_m"></span>\n                                    </span>\n                                ',onclick:()=>(n.qs("#SP_PLUS_SETHEAD").innerHTML="–ò—Å—Ç–æ—Ä–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π",n.qs("#SP_PLUS_SETHEAD2").innerHTML=`\n                                        <a href="${i.SPACES}/settings/?sp_plus_settings=1">Spaces+</a>\n                                        <span class="location-bar__sep ico"></span> –ò—Å—Ç–æ—Ä–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π\n                                    `,n.qs("#SP_PLUS_SETBACK").href=i.SPACES+"/settings/?sp_plus_settings=1",/(\&)sp_changelog=1/i.test(document.location.href)||n.historyPush({sp_plus_settings:l,sp_changelog:a},i.SPACES+"/settings/?sp_plus_settings=1&sp_changelog=1","Spaces+: –ò—Å—Ç–æ—Ä–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π"),r.settingsLogMenu("#SP_PLUS_SETAREA"),!1)});p.appendChild(d);const u=n.ce("a",{href:"#",class:"stnd-link stnd-link_arr sp_font_sm",id:"sp_plus_reset",html:'\n                                    <span class="b" style="color: #f86934">\n                                        <span class="sp sp-alert mr-14"></span>–°–±—Ä–æ—Å –Ω–∞—Å—Ç—Ä–æ–µ–∫\n                                        <span class="ico ico_arr ico_m"></span>\n                                    </span>\n                                ',onclick:()=>(n.confirmBox("–í—ã –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ö–æ—Ç–∏—Ç–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–±—Ä–æ—Å–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏?",!0,()=>{n.delCookie("SP_PLUS_SET"),n.delCookie("SP_WEATHER"),n.delCookie("gp_left_btn"),n.delCookie("force_ajax_transport"),n.delCookie("sandbox"),document.location.reload()}),!1)});p.appendChild(u);let _=0,f=n.ce("div",{class:"widgets-group widgets-group_top nl wbg no-select"}),g=n.ce("div",{style:"float: right",html:"v"+i.PKG_VERSION}),h=n.ce("div",{class:"content-item3"}),S=n.ce("div",{html:"‚ù§Ô∏è",class:"heart",onclick:()=>{++_>=10&&(document.location.href="https://t.me/spaces_dev")}}),b=n.ce("div",{class:"grey",html:'Developed by <a href="https://crashmax.ru" target="_blank">crashmax</a> with love '});f.appendChild(h),b.appendChild(S),h.appendChild(b),b.appendChild(g),n.qs("#SP_PLUS_ABOUT").appendChild(f)}return!1}});s.before(d);let p=document.createEvent("MouseEvent");l&&(document.title="–ù–∞—Å—Ç—Ä–æ–π–∫–∏ Spaces+",p.initEvent("click",!0,!0),d.dispatchEvent(p)),c&&(document.title="Spaces+: –ò–º–ø–æ—Ä—Ç –∏ —ç–∫—Å–ø–æ—Ä—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫",p.initEvent("click",!0,!0),null===(e=n.qs("#sp_backup"))||void 0===e||e.dispatchEvent(p)),a&&(document.title="Spaces+: –ò—Å—Ç–æ—Ä–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π",p.initEvent("click",!0,!0),null===(t=n.qs("#sp_changelog"))||void 0===t||t.dispatchEvent(p))}}catch(e){n.logger.error("settingsMenu.ts",e)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stickyHeader=void 0;const n=s(0);t.stickyHeader=e=>{try{let t=n.qs("#wrap_all"),s=n.qs("#left_nav"),r=n.qs("#header_elements"),i=n.qs("#main_shadow"),o=n.qs("#top_info_block"),l=n.qs("div.sidebar-logo");if(e&&!r.hasAttribute("sp-sticky-header")){new ResizeObserver(e=>{window.requestAnimationFrame(()=>{Array.isArray(e)&&e.length&&(n.css(i,"padding-top: 45px"),n.css(o,`\n                        position: fixed;\n                        width: ${i.clientWidth}px;\n                        z-index: 9999\n                    `),n.css(l,`\n                        position: fixed;\n                        width: ${s.clientWidth+1}px;\n                        left: ${t.offsetLeft}px;\n                        top: 0px;\n                        box-shadow: 0px 2px 2px rgba(93,109,157,0.2);\n                        z-index: 9999\n                    `),n.css(r,`\n                        position: fixed;\n                        width: ${i.clientWidth-s.clientWidth+1}px;\n                        left: ${t.offsetLeft+s.clientWidth}px;\n                        top: 0px;\n                        box-shadow: 0px 2px 2px rgba(93,109,157,0.2);\n                        z-index: 9999\n                    `))})}).observe(document.body),r.setAttribute("sp-sticky-header","1")}else r.hasAttribute("sp-sticky-header")&&(r.removeAttribute("style"),o.removeAttribute("style"),i.removeAttribute("style"),l.removeAttribute("style"),r.removeAttribute("sp-sticky-header"))}catch(e){n.logger.error("stickyHeader.ts",e)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bypassProfile=void 0;const n=s(0),r=s(1);t.bypassProfile=()=>{var e,t,s,l;try{let a=n.qsa("td.table__cell_last"),c=n.qs(`a[href^="${r.SPACES}/blacklist/"`),d=n.qs(`a[href^="${r.SPACES}/info/rules/"`),p=n.qs("div.ico_noaccess_xlarge"),u=n.qs("#SP_PLUS_INBL");if("mysite"===n.getPath(1)&&a){let l=n.getPath(3);if(c&&!u){let o=n.ce("td",{class:"table__cell",id:"SP_PLUS_INBL",html:'\n                        <a href="#" class="stnd-link" title="–ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å">\n                        <span class="sp sp-eye-grey"></span> –ü–æ–∫–∞–∑–∞—Ç—å</a>\n                    ',onclick:()=>(o.after(n.ce("td",{class:"table__cell",id:"SP_PLUS_INBL",attr:{width:"25%"},html:'\n                                <a href="#" class="stnd-link stnd-link_disabled" title="–ó–∞–≥—Ä—É–∑–∫–∞">\n                                <span class="ico bp ico_spinner"></span> –ó–∞–≥—Ä—É–∑–∫–∞</a>\n                            ',onclick:()=>!1})),o.remove(),i(l),!1)});null===(e=a[1].parentElement)||void 0===e||e.insertBefore(o,a[1]);let c=null===(s=null===(t=a[1])||void 0===t?void 0:t.parentElement)||void 0===s?void 0:s.childNodes;for(let e in c)"TD"===c[e].nodeName&&(c[e].width="25%");r.DATA.NICKNAME===l&&n.qs("#SP_PLUS_INBL").click()}!d&&!p||c||n.qs("#SP_LIST_LINK")||(n.qs("div.user__tools").style.borderTop="none",o(n.trim(n.qs("#location_bar_1_0").textContent),c,d))}else null===(l=n.qs("#SP_LIST_LINK"))||void 0===l||l.remove()}catch(e){n.logger.error("bypassProfile.ts",e)}};const i=async e=>{var t,s,i;if(r.DATA.NICKNAME===e&&void 0!==r.DATA.CONTENT||(r.DATA.NICKNAME=e,await n.http("GET",`https://crashmax.ru/api/proxy?url=${r.SPACES}/ajax/mysite/index/${e}/`,!1).then(e=>{var t;200===(null===(t=e.parsedBody)||void 0===t?void 0:t.status.http_code)?r.DATA.CONTENT=e.parsedBody.contents.content.replace(/spac1\.net|spaces-blogs\.com/gi,e=>r.BASE_URL):n.messageBox("–ü—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–æ—Ñ–∏–ª–µ–π","–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è! –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É",!0),n.logger.info("–ü—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–æ—Ñ–∏–ª–µ–π",e)})),null!==r.DATA.CONTENT){n.qs("#main_content").innerHTML=r.DATA.CONTENT;let e=n.qs('img[data-s*="101.100.0"');e.src=e.dataset.s,n.qs("div.user__tools").remove(),null===(s=null===(t=n.qs('span[class$="ico_gifts"').parentElement)||void 0===t?void 0:t.parentElement)||void 0===s||s.remove(),null===(i=n.qs(`a[href^="${r.SPACES}/activity"`).parentElement)||void 0===i||i.remove(),n.qs("div.btn-single__wrap").remove()}},o=(e,t,s)=>{let i=[{ico:"forum",text:"–¢–µ–º—ã –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏",path:"/forums/search_user/?query="+e},{ico:"comm",text:"–°–æ–æ–±—â–µ—Å—Ç–≤–∞",path:"/comm/list/user/"+e},{ico:"friends",text:"–î—Ä—É–∑—å—è",path:"/friends/?name="+e},{ico:"readers",text:"–ß–∏—Ç–∞—Ç–µ–ª–∏",path:"/lenta/readers/?user="+e},{ico:"gifts",text:"–ü–æ–¥–∞—Ä–∫–∏",path:"/gifts/user_list/"+e}];null===t&&null===s&&(i=[{ico:"blog",text:"–õ–∏—á–Ω—ã–π –±–ª–æ–≥",path:`/diary/view/user/${e}/list/-/`},{ico:"photo",text:"–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏",path:`/pictures/user/${e}/list/-/`},{ico:"music",text:"–ú—É–∑—ã–∫–∞",path:`/music/user/${e}/list/-/`},{ico:"video",text:"–í–∏–¥–µ–æ",path:`/video/user/${e}/list/-/`},{ico:"file",text:"–§–∞–π–ª—ã",path:`/files/user/${e}/list/-/`}].concat(i));let o=n.ce("div",{id:"SP_LIST_LINK",class:"widgets-group links-group"});n.qs("div.js-pending-item").append(o);for(let e of i){const{ico:t,text:s,path:i}=e;let l=n.ce("a",{href:r.SPACES+i,class:"list-link stnd-link_arr list-link-darkblue c-darkblue",html:`\n                <span class="js-ico ico ico_${t}"></span>\n                <span class="t js-text">${s}</span>\n                <span class="ico ico_arr"></span>\n            `});o.append(l)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteReaders=void 0;const n=s(0),r=s(1);t.deleteReaders=()=>{try{let e=n.qs("#SP_PLUS_BUTTONS_R"),t=n.qsa(`a[href^="${r.SPACES}/lenta/reader_delete/"`);if("/lenta/readers/"===n.getPath()&&t&&!e){let e=[];for(let s of t){let t=n.ce("label",{class:"stnd-link icon-link sp-ch-readers"}),r=n.getParams(s.href).user,i=n.ce("input",{type:"checkbox",class:"sp-cbfr sp-checkbox-square",id:r}),o=n.ce("label",{attr:{for:r}});t.appendChild(i),t.appendChild(o),s.after(t),e.push(i)}if(n.qs(".sp-ch-readers")){let t=n.ce("div",{class:"user__tools_last",id:"SP_PLUS_BUTTONS_R"});const s=n.ce("button",{style:"border-right: unset",class:"user__tools-link table__cell sp_btn-list",html:'\n                        <span class="sp sp-ok-blue"></span>\n                        <span class="sp-ch-text">–í—ã–±—Ä–∞—Ç—å –≤—Å–µ</span>\n                    ',onclick:t=>{if(t.target instanceof Element){let s="SPAN"===t.target.nodeName?t.target.parentNode:t.target;for(let t of e)t.checked=-1!==s.innerHTML.indexOf("–í—ã–±—Ä–∞—Ç—å –≤—Å–µ");s.innerHTML=`\n                                <span class="sp sp-ok-blue"></span>\n                                <span class="sp-ch-text">\n                                    ${-1!==s.innerHTML.indexOf("–í—ã–±—Ä–∞—Ç—å –≤—Å–µ")?"–°–Ω—è—Ç—å –æ—Ç–º–µ—Ç–∫–∏":"–í—ã–±—Ä–∞—Ç—å –≤—Å–µ"}\n                                </span>\n                            `}}}),o=n.ce("button",{class:"user__tools-link table__cell sp_btn_line sp_btn-list",html:'\n                        <span class="sp sp-remove-red"></span>\n                        <span class="sp-del-text">–£–¥–∞–ª–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö</span>\n                    ',onclick:()=>{let t=[];for(let s of e)s.checked&&t.push(s.id);let s=t.length;s>0?n.confirmBox(`–í—ã –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å ${s} ${i(s)}?`,!0,async()=>{let e=s;for(let o of t)n.messageBox(`–û—Å—Ç–∞–ª–æ—Å—å —É–¥–∞–ª–∏—Ç—å ${s--} –∏–∑ ${e} ${i(s)}`,'–ü–æ–¥–æ–∂–¥–∏—Ç–µ –Ω–µ–º–Ω–æ–≥–æ... <span style="padding-right: 10px" class="ico ico_spinner"></span>',!1),await n.http("POST",`${r.SPACES}/lenta/reader_delete/?user=${o}`,!1,`&CK=${r.DATA.CK}&cfms=–£–¥–∞–ª–∏—Ç—å`).then(e=>{n.logger.info("–£–¥–∞–ª–∏–ª–∏ —á–∏—Ç–∞—Ç–µ–ª—è",e)});document.location.reload()}):n.messageBox("–í–Ω–∏–º–∞–Ω–∏–µ!","–û—Ç–º–µ—Ç—å—Ç–µ –≥–∞–ª–æ—á–∫–æ–π, —Ç–µx —á–∏—Ç–∞—Ç–µ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã—Ö –≤—ã —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑",!0,5)}});t.appendChild(o),t.appendChild(s);let l=n.qs("div.pgn-wrapper"),a=n.qs("#main");l?l.prepend(t):a&&(t.classList.add("widgets-group"),a.prepend(t))}}}catch(e){n.logger.error("deleteReaders.ts",e)}};const i=e=>"—á–∏—Ç–∞—Ç–µ–ª"+n.declOfNum(e,["—è","—è","–µ–π"])},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.friendsOnline=void 0;const n=s(0),r=s(1),i=s(2);t.friendsOnline=e=>{var t,s;try{let o=n.qs("#friends_cnt"),l=n.qs("#SP_PLUS_FRIENDS_B"),a=0;if(o&&(a=Number(o.textContent)),e&&a>0){let e=null===(s=null===(t=null==o?void 0:o.parentNode)||void 0===t?void 0:t.parentNode)||void 0===s?void 0:s.parentNode;l=l||n.ce("div",{id:"SP_PLUS_FRIENDS_B",class:"list-link__wrap"}),n.http("GET",r.SPACES+"/friends/?S=3",!0).then(e=>{var t;const s=null===(t=e.parsedBody)||void 0===t?void 0:t.tabbed_panel.tabs[1].content.list;if(s){let t=!!n.qs("span.s_i_exit"),o=s,a=i._SETTINGS.friendsSet.max>o.length?o.length:i._SETTINGS.friendsSet.max;for(let e=0;e<a;e++)l.appendChild(n.ce("a",{href:`${r.SPACES}/mysite/index/${o[e].name}`,class:"li",html:(t?`<span class="comm_ava m for_avatar"><img src="${o[e].avatar.previewURL}" class="preview s21_20"></span>`:"")+`<span class="online-status m"><img class="p14 online_status_ico" src="${r.HTTP}//spac.me/i/${o[e].online_status.on_img}" alt="(ON)"></span><span class="block-item__title m break-word">${o[e].name}</span>`}));n.logger.info("–ü–∞–Ω–µ–ª—å –¥—Ä—É–∑–µ–π –æ–Ω–ª–∞–π–Ω",e)}}),null==e||e.appendChild(l)}else null==l||l.remove()}catch(e){n.logger.error("friendsOnline.ts",e)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.galleryRotate=void 0;const n=s(0),r=s(2);t.galleryRotate=()=>{let e=n.qs("#gallery-container"),t=n.qs("#SP_IMAGE_ROTATE"),s=n.qs(".player-dummy_wrap");try{if(e&&!t&&!s){let t=n.ce("a",{class:"gallery__tools_button",id:"SP_IMAGE_ROTATE",title:"–ü–æ–≤–µ—Ä–Ω—É—Ç—å",html:'<span class="ico_gallery ico_gallery_reload m"></span>',onclick:()=>(n.setSettings("angle",(r._SETTINGS.angle+90)%360),e.className="accel-3d rotate"+r._SETTINGS.angle,!1)});n.qs("#g_dloadlink").after(t)}}catch(e){n.logger.error("galleryRotate.ts",e)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sidebarButton=void 0;const n=s(0),r=s(1);t.sidebarButton=()=>{n.qsa(`li.li>a[href^="${r.SPACES}/services/"]`).forEach(e=>{var t;let s=n.qs("span.s_i_exit")?'<span class="sp sp-ico"></span>':"",i=n.ce("li",{class:"li",html:`\n                <a href="${r.SPACES}/settings/?sp_plus_settings=1" title="–ù–∞—Å—Ç—Ä–æ–π–∫–∏ Spaces+">\n                ${s}\n                <span class="m s_i_text"> Spaces+</span></a>\n            `});null===(t=e.parentElement)||void 0===t||t.after(i)})}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.weatherWidget=void 0;const n=s(0),r=s(10),i=s(2);t.weatherWidget=()=>{let e=n.qs("#SP_WIDGET_WEATHER"),t=n.qs("#page_rightbar");if(o()-i._SETTINGS.weatherSet.time>i._SETTINGS.weatherSet.interval&&null!==i._SETTINGS.weatherSet.city&&(i._SETTINGS.weatherSet.time=o(),r.getWeather()),!e&&t&&l()){let{id:e,name:s,main:r,wind:i,weather:o,clouds:a}=l(),c=n.ce("div",{class:"widgets-group_top js-container__block",style:"box-shadow: 0px 3px 5px rgba(93,109,157,0.3)",id:"SP_WIDGET_WEATHER"}),d=n.ce("div",{class:"b-title cl b-title_first oh",html:`\n                <a href="https://openweathermap.org/city/${e}" target="_blank" class="b-title__link" style="white-space: unset">\n                    <h6 class="span">–ü–æ–≥–æ–¥–∞ –≤ –≥. ${s}</h6>\n                </a>\n            `}),p=n.ce("div",{class:"content",style:"padding: 0px 16px 16px 16px",html:`\n                <img src="https://openweathermap.org/img/wn/${o[0].icon}@2x.png" class="sp_img-center">\n                <div class="grey sp_weather-container">\n                    <p>${Math.round(r.temp)}¬∞C</p>\n                    <p>${n.toUpper(o[0].description)}</p>\n                </div>\n                <table class="grey sp_weather-table">\n                    <tbody>\n                        <tr>\n                            <td>–û–±–ª–∞—á–Ω–æ—Å—Ç—å: </td>\n                            <td>${a.all}%</td>\n                        </tr>\n                        <tr>\n                            <td>–í–ª–∞–∂–Ω–æ—Å—Ç—å: </td>\n                            <td>${r.humidity}%</td>\n                        </tr>\n                        <tr>\n                            <td>–î–∞–≤–ª–µ–Ω–∏–µ: </td>\n                            <td>${Math.round(.75*r.pressure)}mmHg</td>\n                        </tr>\n                        <tr>\n                            <td>–í–µ—Ç–µ—Ä: </td>\n                            <td>${i.speed}m/sec</td>\n                        </tr>\n                    </tbody>\n                </table>\n            `});c.appendChild(d),c.appendChild(p),t.appendChild(c)}};const o=()=>Math.round((new Date).getTime()/1e3),l=()=>{const e=n.getCookie("SP_WEATHER");if(void 0!==e)return JSON.parse(e);r.ipWhois()}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteComments=void 0;const n=s(0),r=s(1);t.deleteComments=()=>{var e,t,s,o,l,a,c,d,p,u,_,f;try{let g=n.qs("h2.span"),h=n.qsa("span.comment_date"),S=n.qs(`a[href^="${r.SPACES}/comment/delete/"`),b=n.qs(`a[href^="${r.SPACES}/forums/moder/ban/"`),m="–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏"===(null==g?void 0:g.textContent),v="–£–¥–∞–ª–∏—Ç—å"===(null==S?void 0:S.textContent),y="–ë–∞–Ω"===(null==b?void 0:b.textContent);if(h&&m&&(v||y)){for(let i of h)if(!i.getElementsByTagName("input").length){let g=4===r.DEVICE.id?null===(l=null===(o=null===(s=null===(t=null===(e=i.parentElement)||void 0===e?void 0:e.parentElement)||void 0===t?void 0:t.parentElement)||void 0===s?void 0:s.parentElement)||void 0===o?void 0:o.parentElement)||void 0===l?void 0:l.id:null===(f=null===(_=null===(u=null===(p=null===(d=null===(c=null===(a=i.parentElement)||void 0===a?void 0:a.parentElement)||void 0===c?void 0:c.parentElement)||void 0===d?void 0:d.parentElement)||void 0===p?void 0:p.parentElement)||void 0===u?void 0:u.parentElement)||void 0===_?void 0:_.parentElement)||void 0===f?void 0:f.id;if(parseInt(g)){let e=n.ce("input",{type:"checkbox",class:"sp-cbfc sp-checkbox-square",id:"DC_"+g});i.appendChild(e),i.appendChild(n.ce("label",{attr:{for:"DC_"+g}}))}}if(!n.qs("#SP_PLUS_BUTTONS")){let e=n.ce("div",{class:"widgets-group user__tools_last",id:"SP_PLUS_BUTTONS"});const t=n.ce("button",{class:"user__tools-link table__cell sp_btn-list",html:'\n                        <span class="sp sp-ok-blue"></span>\n                        <span class="sp-ch-text">–í—ã–±—Ä–∞—Ç—å –≤—Å–µ</span>\n                    ',onclick:e=>{if(e.target instanceof Element){let t=n.qsa('input[id^="DC_"]'),s="SPAN"===e.target.nodeName?e.target.parentNode:e.target;for(let e of t)e.checked=-1!==s.innerHTML.indexOf("–í—ã–±—Ä–∞—Ç—å –≤—Å–µ");s.innerHTML=`\n                                <span class="sp sp-ok-blue"></span>\n                                    <span class="sp-ch-text">\n                                    ${-1!==s.innerHTML.indexOf("–í—ã–±—Ä–∞—Ç—å –≤—Å–µ")?"–°–Ω—è—Ç—å –æ—Ç–º–µ—Ç–∫–∏":"–í—ã–±—Ä–∞—Ç—å –≤—Å–µ"}\n                                </span>\n                            `}}}),s=n.ce("button",{class:"user__tools-link table__cell sp_btn_line sp_btn-list",html:'\n                        <span class="sp sp-remove-red"></span>\n                        <span class="sp-del-text">–£–¥–∞–ª–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ</span>\n                    ',onclick:()=>{var e,t,s,o,l,a,c,d,p,u,_;let f=n.qsa('input[id^="DC_"]'),g=[];for(let n of f)n.checked&&Array.prototype.slice.call(null===(_=4===r.DEVICE.id?null===(o=null===(s=null===(t=null===(e=null==n?void 0:n.parentNode)||void 0===e?void 0:e.parentNode)||void 0===t?void 0:t.parentNode)||void 0===s?void 0:s.parentNode)||void 0===o?void 0:o.parentNode:null===(u=null===(p=null===(d=null===(c=null===(a=null===(l=null==n?void 0:n.parentNode)||void 0===l?void 0:l.parentNode)||void 0===a?void 0:a.parentNode)||void 0===c?void 0:c.parentNode)||void 0===d?void 0:d.parentNode)||void 0===p?void 0:p.parentNode)||void 0===u?void 0:u.parentNode)||void 0===_?void 0:_.querySelectorAll(`a[href^="${r.SPACES}/comment/delete/"]`)).filter(e=>{"–£–¥–∞–ª–∏—Ç—å"===e.textContent&&g.push(e.href)});let h=g.length;return h>0?n.confirmBox(`–í—ã –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å ${h} ${i(h)}?`,!0,async()=>{let e=h;for(let t of g)n.messageBox(`–û—Å—Ç–∞–ª–æ—Å—å —É–¥–∞–ª–∏—Ç—å ${h--} –∏–∑ ${e} ${i(h)}`,'–ü–æ–¥–æ–∂–¥–∏—Ç–µ –Ω–µ–º–Ω–æ–≥–æ... <span style="padding-right: 10px" class="ico ico_spinner"></span>',!1),await n.http("GET",t,!0).then(e=>{n.logger.info("–£–¥–∞–ª–∏–ª –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π",e)});document.location.reload()}):n.messageBox("–í–Ω–∏–º–∞–Ω–∏–µ!","–û—Ç–º–µ—Ç—å—Ç–µ –≥–∞–ª–æ—á–∫–æ–π, —Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑",!0,5),!1}});e.appendChild(s),e.appendChild(t),n.qs("div.js-comments-pgn").after(e)}}}catch(e){n.logger.error("deleteComments.ts",e)}};const i=e=>"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏"+n.declOfNum(e,["–π","—è","–µ–≤"])},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hiddenRightbar=void 0;const n=s(0),r=s(2);t.hiddenRightbar=e=>{let t=n.qs("#page_rightbar");e&&r._SETTINGS.weather&&n.qs("#weather").click();try{e&&!t.hasAttribute("sp-hidden-rightbar")?(t.style.display="none",t.setAttribute("sp-hidden-rightbar","1")):t.hasAttribute("sp-hidden-rightbar")&&(t.style.display="block",t.removeAttribute("sp-hidden-rightbar"))}catch(e){n.logger.error("hidderRightbar.ts",e)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.playerDownload=void 0;const n=s(0),r=s(1);t.playerDownload=()=>{var e;try{let t=0,s=sessionStorage.getItem("music:track"),i=sessionStorage.getItem("music:playlist"),o=n.qs("#SP_MUSIC_DOWN");if(n.qs("#gp_main_player")&&s&&i){let l=JSON.parse(s),a=JSON.parse(i);t=parseInt(l.id,10);let c=a.playlist.playlist[t].src,d=n.qs("a.js-music_repeat");if(d&&!o){r.DATA.PLAYER=t;let s=n.ce("td",{id:"SP_MUSIC_DOWN",class:"ico_td",innerHTML:'<span style="margin: 0px 6px 0px 0px !important" class="sp sp-download-darkblue" title="–°–∫–∞—á–∞—Ç—å"></span>',onclick:()=>location.href=c});null===(e=d.parentElement)||void 0===e||e.after(s)}else o&&r.DATA.PLAYER!==t&&(r.DATA.PLAYER=t,o.onclick=()=>location.href=c,n.logger.info("–û–±–Ω–æ–≤–∏–ª–∏ —Å—Å—ã–ª–∫—É –Ω–∞ —Ç—Ä–µ–∫",l))}}catch(e){n.logger.error("playerDownload.ts",e)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.settingsNotify=void 0;const n=s(0),r=s(1),i=s(2);t.settingsNotify=e=>{var t;try{"Notification"in window?"denied"!==Notification.permission.toLowerCase()?Notification.requestPermission(e=>{"granted"!==e.toLowerCase()&&n.messageBox("–í–Ω–∏–º–∞–Ω–∏–µ!",`–†–∞–∑—Ä–µ—à–∏—Ç–µ –±—Ä–∞—É–∑–µ—Ä—É –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Å —Å–∞–π—Ç–∞ ${r.BASE_URL}, —á—Ç–æ–±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Ñ—É–Ω–∫—Ü–∏–µ–π`,!0,5)}):n.messageBox("–í–Ω–∏–º–∞–Ω–∏–µ!","–í—ã –∑–∞–ø—Ä–µ—Ç–∏–ª–∏ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è —Å–∞–π—Ç–∞ "+r.BASE_URL,!0,5):n.messageBox("–í–Ω–∏–º–∞–Ω–∏–µ!","–í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è",!0,5);let s=n.ce("div",{id:"SP_PLUS_EVENTS"}),o=n.ce("label",{html:'–°—Å—ã–ª–∫–∞ –Ω–∞ –∞—É–¥–∏–æ—Ñ–∞–π–ª:<div class="label__desc">.ogg –∏–ª–∏ .wav</div>',style:"margin-right: -17px",class:"label"}),l=n.ce("label",{html:"–ì—Ä–æ–º–∫–æ—Å—Ç—å:",class:"label"}),a=n.ce("div",{class:"text-input__wrap",style:"margin: 15px"}),c=n.ce("div",{style:"margin: 15px"}),d=n.ce("label",{class:"stnd-link sp_noborder"}),p=n.ce("label",{class:"stnd-link sp_noborder"}),u=n.ce("label",{class:"stnd-link sp_noborder"}),_=n.ce("input",{type:"text",value:i._SETTINGS.notifySet.url,class:"text-input"});_.addEventListener("input",e=>{n.isValidUrl(e.target.value)&&/\.(ogg|mp3|wav)$/i.test(e.target.value)?(n.setSettings("notifySet.url",e.target.value),_.classList.remove("sp-input-error")):_.classList.add("sp-input-error")});let f=n.ce("span",{class:"text-input__btn",html:'<span class="sp sp-play-green"></span>',style:"top: 23px",title:"–ü—Ä–æ—Å–ª—É—à–∞—Ç—å",onclick:()=>n.playSound(i._SETTINGS.notifySet.url,i._SETTINGS.notifySet.volume)}),g=n.ce("div",{class:"label__desc",html:i._SETTINGS.notifySet.volume+"%"}),h=n.ce("input",{type:"range",min:0,max:100,step:1,value:i._SETTINGS.notifySet.volume});h.addEventListener("input",e=>{if(!isNaN(e.target.value)){let t=parseInt(e.target.value,10);(t<0||t>100)&&(t=70),g.innerHTML=t+"%",n.setSettings("notifySet.volume",t)}});let S=n.ce("input",{type:"checkbox",id:"sp_event_mail",class:"sp-checkbox-square",checked:i._SETTINGS.notifySet.mail,onclick:e=>n.setSettings("notifySet.mail",e.target.checked)}),b=n.ce("label",{attr:{for:"sp_event_mail"},html:"–£–≤–µ–¥–æ–º–ª—è—Ç—å –æ –ø–æ—á—Ç–µ"}),m=n.ce("input",{type:"checkbox",id:"sp_event_journal",class:"sp-checkbox-square",checked:i._SETTINGS.notifySet.journal,onclick:e=>n.setSettings("notifySet.journal",e.target.checked)}),v=n.ce("label",{attr:{for:"sp_event_journal"},html:"–£–≤–µ–¥–æ–º–ª—è—Ç—å –æ –∂—É—Ä–Ω–∞–ª–µ"}),y=n.ce("input",{type:"checkbox",id:"sp_event_feed",class:"sp-checkbox-square",checked:i._SETTINGS.notifySet.feed,onclick:e=>n.setSettings("notifySet.feed",e.target.checked)}),E=n.ce("label",{attr:{for:"sp_event_feed"},html:"–£–≤–µ–¥–æ–º–ª—è—Ç—å –æ –ª–µ–Ω—Ç–µ"});a.appendChild(o),a.appendChild(_),a.appendChild(f),l.appendChild(g),c.appendChild(l),c.appendChild(h),s.appendChild(a),s.appendChild(c),d.appendChild(S),d.appendChild(b),p.appendChild(m),p.appendChild(v),u.appendChild(y),u.appendChild(E),s.appendChild(d),s.appendChild(p),s.appendChild(u),null===(t=e.parentElement)||void 0===t||t.after(s)}catch(e){n.logger.error("settingsNotify.ts",e)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.disableRedirect=void 0;const n=s(0),r=s(1);t.disableRedirect=()=>{n.qsa(`a[href^="${r.SPACES}/redirect/"`).forEach(e=>e.href=n.getParams(e).redirect)}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.settingsLogMenu=void 0;const n=s(0),r=s(11),i=s(1);t.settingsLogMenu=e=>{window.scrollTo(0,0);const t=n.qs(e);if(t)try{t.innerHTML="";let e=n.ce("div",{class:"wbg error__item_wrapper sp_plus_c_wrap"}),s=n.ce("div",{class:"pad_t_a"}),o=n.ce("div",{class:"js-input_error_wrap"}),l=n.ce("div",{class:"t_center",id:"SP_JSON_PRELOADER",html:`<img src="${i.HTTP}//spac.me/i/preloader.gif">`});o.appendChild(s),e.appendChild(o),t.appendChild(e),e.appendChild(l),r.getUpdater(e=>{for(let t of e.history){let e=n.ce("label",{class:"label sp_plus_line_c",html:`v${n.rever(t.build)}<div class="label__desc">${t.date}</div>`}),r=n.ce("div",{class:"grey sp_plus_c_desc",html:t.changes});s.appendChild(e),s.appendChild(r)}n.qs("#SP_JSON_PRELOADER").remove()})}catch(e){n.logger.error("settingsLogMenu.ts",e)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.settingsFriends=void 0;const n=s(0),r=s(2);t.settingsFriends=e=>{var t;try{let s=n.ce("div",{id:"SP_PLUS_MAXFRIENDS"}),i=n.ce("div",{class:"sp_settings-wrap"}),o=n.ce("input",{type:"text",class:"text-input",size:4,attr:{maxlength:2},value:r._SETTINGS.friendsSet.max});o.addEventListener("change",e=>{/^([1-9]|1[0-5])$/i.test(e.target.value)?(n.setSettings("friendsSet.max",e.target.value),o.classList.remove("sp-input-error")):o.classList.add("sp-input-error")});let l=n.ce("label",{html:'–í—ã–≤–æ–¥–∏—Ç—å –¥—Ä—É–∑–µ–π:<div class="label__desc">–æ—Ç 1 –¥–æ 15</div>',class:"label"});i.appendChild(l),i.appendChild(o),s.appendChild(i),null===(t=e.parentElement)||void 0===t||t.after(s)}catch(e){n.logger.error("settingsFriends.ts",e)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.settingsFeatures=void 0;const n=s(0),r=s(67),i=s(2),o=s(1);t.settingsFeatures=e=>{let t=n.ce("div",{id:"wrap_spaces_option"}),s=n.ce("a",{href:"#",class:"stnd-link stnd-link_arr sp_font_sm",html:l(i._SETTINGS.apidebug?'<span class="sp sp-remove-grey mr-14"></span>–û—Ç–∫–ª—é—á–∏—Ç—å –æ—Ç–ª–∞–¥—á–∏–∫':'<span class="sp sp-settings mr-14"></span>–í–∫–ª—é—á–∏—Ç—å –æ—Ç–ª–∞–¥—á–∏–∫'),onclick:()=>(n.setSettings("apidebug",!i._SETTINGS.apidebug),document.location.reload(),!1)});const a=n.getCookie("sandbox");let c=n.ce("a",{href:"#",class:"stnd-link stnd-link_arr sp_font_sm",id:"sp_spacesAction_beta",html:l(a?'<span class="sp sp-exit-grey mr-14"></span>–í—ã–π—Ç–∏ –∏–∑ –ø–µ—Å–æ—á–Ω–∏—Ü—ã':'<span class="sp sp-enter-grey mr-14"></span>–í–æ–π—Ç–∏ –≤ –ø–µ—Å–æ—á–Ω–∏—Ü—É'),onclick:()=>(a?n.delCookie("sandbox"):n.setCookie("sandbox","beta"),document.location.reload(),!1)});const d=n.getCookie("force_ajax_transport");let p=n.ce("a",{href:"#",class:"stnd-link stnd-link_arr sp_font_sm",id:"sp_spacesFAT",html:l(d?'<span class="sp sp-remove-grey mr-14"></span>–£–±—Ä–∞—Ç—å –ø–æ–ª–æ—Å—É –∑–∞–≥—Ä—É–∑–∫–∏':'<span class="sp sp-ok-grey mr-14"></span>–î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–æ—Å—É –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã'),onclick:()=>(d?n.delCookie("force_ajax_transport"):n.setCookie("force_ajax_transport","1"),document.location.reload(),!1)});const u=n.getCookie("gp_left_btn");let _=n.ce("a",{href:"#",class:"stnd-link stnd-link_arr sp_last_btn",id:"sp_spacesGLB",html:l(u?'<span class="sp sp-remove-grey mr-14"></span>–£–±—Ä–∞—Ç—å –ø–ª–µ–µ—Ä –∏–∑ –ª–µ–≤–æ–π –ø–∞–Ω–µ–ª–∏':'<span class="sp sp-ok-grey mr-14"></span>–ó–∞–∫—Ä–µ–ø–∏—Ç—å –ø–ª–µ–µ—Ä –Ω–∞ –ª–µ–≤–æ–π –ø–∞–Ω–µ–ª–∏'),onclick:()=>(u?n.delCookie("gp_left_btn"):n.setCookie("gp_left_btn","1"),document.location.reload(),!1)}),f=n.ce("a",{href:"#",style:"display: none",id:"sp_newbequest_togl",class:"stnd-link stnd-link_arr sp_line sp_last_btn sp_newbq_l",html:l('<span class="sp sp-remove-grey mr-14"></span>–°–∫—Ä—ã—Ç—å –∫–≤–µ—Å—Ç –Ω–æ–≤–∏—á–∫–∞'),onclick:()=>(n.confirmBox("–í—ã –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ö–æ—Ç–∏—Ç–µ —Å–∫—Ä—ã—Ç—å –∫–≤–µ—Å—Ç –Ω–æ–≤–∏—á–∫–∞?",!0,()=>{n.http("GET",`${o.SPACES}/newbequest/?CK=${o.DATA.CK}`,!0).then(e=>{200===e.status&&n.messageBox("–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!","–ö–≤–µ—Å—Ç –Ω–æ–≤–∏—á–∫–∞ –±—ã–ª —É—Å–ø–µ—à–Ω–æ —Å–∫—Ä—ã—Ç",!0,5)})}),!1)});t.appendChild(s),t.appendChild(c),t.appendChild(p),t.appendChild(_),t.appendChild(f),e.appendChild(t),r.newbeeQuest()};const l=e=>`<span class="b">${e}<span class="ico ico_arr ico_m"></span></span>`},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.newbeeQuest=void 0;const n=s(0),r=s(1);t.newbeeQuest=async()=>{let e=n.qs("#sp_newbequest_togl");if(e)try{await n.http("GET",r.SPACES+"/mysite/",!0).then(t=>{var s;(null===(s=t.parsedBody)||void 0===s?void 0:s.owner_widget.newbee_quest_widget)&&(e.style.display="block"),n.logger.info("–ö–≤–µ—Å—Ç –Ω–æ–≤–∏—á–∫–∞",t)})}catch(e){n.logger.error("newbeeQuest.ts",e)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.videoSpeedPlayback=void 0;const n=s(0),r=s(2);t.videoSpeedPlayback=()=>{let e=n.qs("span.jwcontrols"),t=n.qs("#SP_PLAYBACK_VIDEO");try{if(t&&(n.qs("video").playbackRate=r._SETTINGS.videoSpeed),e&&!t){let e=n.qs('span[class*="jwtext jwduration jwhidden"]'),t=n.ce("span",{class:"jwtext jwduration jwhidden",id:"SP_PLAYBACK_VIDEO",html:"x"+r._SETTINGS.videoSpeed,onclick:()=>{let e=(r._SETTINGS.videoSpeed+.25)%2.25;return 0===e&&(e=.5),n.setSettings("videoSpeed",e),t.innerHTML="x"+e,!1}});e.after(t)}}catch(e){n.logger.error("videoSpeedPlayback.ts",e)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.settingsBackground=void 0;const n=s(0),r=s(9),i=s(2),o=s(1);t.settingsBackground=e=>{var t;try{let s=n.ce("div",{class:"text-input__wrap"}),o=n.ce("div",{id:"SP_PLUS_BODYSTYLE"}),c=n.ce("label",{class:"stnd-link",style:"border-bottom: none"}),d=n.ce("label",{class:"stnd-link",style:"border-bottom: none"}),p=n.ce("div",{class:"bstrwrap",style:"border-bottom: none; padding: 15px"}),u=n.ce("label",{html:'–°—Å—ã–ª–∫–∞ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ:<div class="label__desc">.jpg –∏–ª–∏ .png</div>',style:"margin-right: -17px",class:"label"}),_=n.ce("label",{html:'–¶–≤–µ—Ç —Ñ–æ–Ω–∞:<div class="label__desc">#RRGGBB</div>',style:"margin-right: -17px",class:"label"}),f=n.ce("input",{type:"text",id:"image-input",value:i._SETTINGS.bodystyleSet.url,style:"margin-bottom: 7px",class:"text-input"});f.addEventListener("change",e=>{n.isValidUrl(e.target.value)&&/\.(jpg|jpeg|png|gif)$/i.test(e.target.value)?(n.setSettings("bodystyleSet.url",e.target.value),r.setStyles(),f.classList.remove("sp-input-error")):f.classList.add("sp-input-error")});let g=n.ce("input",{type:"text",class:"text-input",id:"color-input",value:i._SETTINGS.bodystyleSet.color});g.addEventListener("input",e=>{/^\#([A-Za-z0-9]{3,6})$/i.test(e.target.value)?(n.setSettings("bodystyleSet.color",e.target.value),r.setStyles(),g.classList.remove("sp-input-error")):g.classList.add("sp-input-error")});let h=n.ce("input",{type:"radio",id:"sp_set_bodystyle_URL",checked:i._SETTINGS.bodystyleSet.urlchecked,class:"sp-checkbox-circle",onclick:e=>{n.setSettings("bodystyleSet.urlchecked",e.target.checked),e.target.checked&&S.checked&&(S.checked=!1,n.setSettings("bodystyleSet.colorchecked",!1)),i._SETTINGS.bodystyleSet.urlchecked?(r.setStyles(),l()):n.qs("#SP_WRAP_IMAGE").remove()}}),S=n.ce("input",{type:"radio",id:"sp_set_bodystyle_color",checked:i._SETTINGS.bodystyleSet.colorchecked,class:"sp-checkbox-circle",onclick:e=>{n.setSettings("bodystyleSet.colorchecked",e.target.checked),e.target.checked&&h.checked&&(h.checked=!1,n.setSettings("bodystyleSet.urlchecked",!1)),i._SETTINGS.bodystyleSet.colorchecked?(r.setStyles(),a()):n.qs("#SP_WRAP_COLOR").remove()}}),b=n.ce("label",{attr:{for:"sp_set_bodystyle_URL"},html:"–í—ã–±—Ä–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ"}),m=n.ce("label",{attr:{for:"sp_set_bodystyle_color"},html:"–ü–æ–¥–æ–±—Ä–∞—Ç—å —Ü–≤–µ—Ç"});s.appendChild(u),s.appendChild(f),s.appendChild(_),s.appendChild(g),c.appendChild(h),c.appendChild(b),d.appendChild(S),d.appendChild(m),p.appendChild(s),o.appendChild(p),o.appendChild(c),o.appendChild(d),null===(t=e.parentElement)||void 0===t||t.after(o),i._SETTINGS.bodystyleSet.urlchecked&&l(),i._SETTINGS.bodystyleSet.colorchecked&&a()}catch(e){n.logger.error("settingsBackground.ts",e)}};const l=async()=>{try{if(!n.qs("#SP_WRAP_IMAGE")){n.qs("#SP_WRAP_COLOR")&&(n.qs("#SP_WRAP_COLOR").remove(),n.qs("#SP_PLUS_CP_STYLE").remove());let e=n.ce("link",{rel:"stylesheet",type:"text/css",id:"SP_PLUS_IMAGE_STYLE",href:`${o.ENV_PATH}/css/bodystyle.css?r=${o.REVISION}`});document.getElementsByTagName("head")[0].appendChild(e);let t=n.qs("#SP_PLUS_BODYSTYLE"),s=n.ce("div",{class:"js-gallery_skip wbg oh tiles_block tiles_wrapper"}),i=n.ce("div",{id:"SP_WRAP_IMAGE",style:"border-top: 1px solid #cdd4e1"});await n.http("GET",`${o.ENV_PATH}/data.json?r=${o.REVISION}`,!1).then(e=>{var l,a;if(200===e.status&&(null===(l=e.parsedBody)||void 0===l?void 0:l.backgrounds)){for(let t of null===(a=e.parsedBody)||void 0===a?void 0:a.backgrounds){let e=n.ce("div",{class:"js-file_item tiled_item tiled_item-200"}),i=n.ce("div",{class:"tiled_inner t_center relative"}),l=n.ce("span",{class:"relative sp_bg-items"}),a=n.ce("div",{class:"tiled-preview border"}),c=n.ce("img",{class:"preview s201_200",style:"cursor: pointer",src:`${o.ENV_PATH}/backgrounds/${t}`,onclick:e=>{n.qs("#image-input").value=e.target.src,n.setSettings("bodystyleSet.url",e.target.src),r.setStyles()}});a.appendChild(c),l.appendChild(a),i.appendChild(l),e.appendChild(i),s.appendChild(e)}i.appendChild(s),t.appendChild(i)}r.setStyles()})}}catch(e){n.logger.error("setImage",e)}},a=()=>{try{if(!n.qs("#SP_WRAP_COLOR")){n.qs("#SP_WRAP_IMAGE")&&(n.qs("#SP_WRAP_IMAGE").remove(),n.qs("#SP_PLUS_IMAGE_STYLE").remove());let e=n.ce("link",{rel:"stylesheet",type:"text/css",id:"SP_PLUS_CP_STYLE",href:`${o.ENV_PATH}/css/user-content.css?r=${o.REVISION}`});document.getElementsByTagName("head")[0].appendChild(e);let t=n.ce("div",{class:"stnd-block"}),s=n.qs("#SP_PLUS_BODYSTYLE"),l=n.ce("div",{id:"SP_WRAP_COLOR",style:"border-top: 1px solid #cdd4e1"}),a=n.ce("table",{class:"table__wrap bb-colorpicker"}),d=n.ce("tbody"),p=n.ce("tr"),u=n.ce("td",{class:"table__cell"});const _=[["#90CAF9","#80DEEA","#A5D6A7","#FFF59D","#FFCC80","#FFAB91","#CE93D8"],["#2196F3","#00BCD4","#4CAF50","#FFEB3B","#FF9800","#F44336","#9C27B0"],["#1565C0","#00838F","#2E7D32","#F9A825","#EF6C00","#C62828","#6A1B9A"],["#ECF0F1","#CFD8DC","#B0BEC5","#97A6B0","#546E7A","#44565E","#3A474C"]];for(let e of _){for(let s in e){let r=n.ce("div",{style:"background-color: "+e[s],class:"js-bb_color toolbar-color pointer",attr:{"data-val":e[s],"data-tag":"fon"}});t.appendChild(r)}t.appendChild(n.ce("br"))}u.appendChild(t),p.appendChild(u);let f=n.ce("td",{class:"table__cell table__cell_last"}),g=n.ce("div",{class:"stnd-block"}),h=n.ce("div",{class:"js-bb_colorpicker"});g.appendChild(h),f.appendChild(g),p.appendChild(f),d.appendChild(p),a.appendChild(d),l.appendChild(a),s.appendChild(l),setTimeout(()=>{let e=new CP(h,!1,h);n.qs("#color-input").addEventListener("change",t=>{/^\#([A-Za-z0-9]{3}|[A-Za-z0-9]{6})$/i.test(t.target.value)?(n.setSettings("bodystyleSet.color",t.target.value),r.setStyles(),e.set(i._SETTINGS.bodystyleSet.color),t.target.classList.remove("sp-input-error")):t.target.classList.add("sp-input-error")}),e.enter(),e.set(i._SETTINGS.bodystyleSet.color),e.on("change",e=>{const t="#"+e.toUpperCase();c(t),n.setSettings("bodystyleSet.color",t),r.setStyles()});const t=document.querySelectorAll(".js-bb_color");for(let s of t)s.addEventListener("click",t=>{let s=t.target.getAttribute("data-val");c(s),n.setSettings("bodystyleSet.color",s),r.setStyles(),e.set(s)})},100)}}catch(e){n.logger.error("setColor",e)}},c=e=>{n.qs("input[name=color]").value=e,n.qs("#color-input").value=e,n.qs(".colorpicker-color").style.backgroundColor=e}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.settingsBackupMenu=void 0;const n=s(0),r=s(2);t.settingsBackupMenu=e=>{var t;window.scrollTo(0,0);const i=n.qs(e),o=s(71);if(i)try{if(i.innerHTML="",!r._SETTINGS.hideNotify.configImport){let e=n.ce("span",{class:"sp sp-remove-grey pointer right notif_close close_h",style:"margin: 10px",title:"–ü–æ–Ω—è—Ç–Ω–æ, –±–æ–ª—å—à–µ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å.",onclick:()=>{n.setSettings("hideNotify.configImport",!0),n.qs("#SP_CONFIG_JSON").remove()}}),t=n.ce("div",{class:"stnd-block-yellow",style:"padding: 16px",html:'<span class="sp sp-alert"></span>–í–Ω–∏–º–∞–Ω–∏–µ!</br></br><div style="font-size: small">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–ª—å–∫–æ –¥–ª—è –æ–ø—ã—Ç–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π! –ü–µ—Ä–µ–¥ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º —Ñ–∞–π–ª–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫, —Å–ª–µ–¥—É–µ—Ç —Å–¥–µ–ª–∞—Ç—å –≠–∫—Å–ø–æ—Ä—Ç, –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫, —Å–ª–µ–¥—É–µ—Ç —Å–¥–µ–ª–∞—Ç—å –ò–º–ø–æ—Ä—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫.</div>'}),s=n.ce("div",{id:"SP_CONFIG_JSON"});s.appendChild(e),i.appendChild(s),s.appendChild(t)}let e=n.ce("div",{style:"padding: 16px 16px 14px 16px"}),s=n.ce("div",{class:"widgets-group user__tools_last",id:"SP_PLUS_BOTTOM_DIVB"}),l=n.ce("div",{class:"widgets-group user__tools_last",style:"margin: unset"}),a=n.ce("div",{class:"text-input__wrap"}),c=n.ce("div",{class:"cl"}),d=n.ce("button",{class:"user__tools-link table__cell sp_btn",style:"border-right: none; border-top: 1px solid #cdd4e1",html:'\n                    <span class="sp sp-ok-darkblue"></span>\n                    <span style="color: #0E3C87; padding-left: 10px">–ü—Ä–∏–º–µ–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</span>\n                ',onclick:()=>{var e;let t,s=n.qs("#SP_BACKUP_JSON").value;try{t=JSON.parse(s),null===(e=n.qs("#SP_PLUS_ALERT"))||void 0===e||e.remove(),n.setCookie("SP_PLUS_SET",s),n.messageBox("–ò–º–ø–æ—Ä—Ç –∏ —ç–∫—Å–ø–æ—Ä—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫","–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±—ã–ª–∏ —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã",!0,3)}catch(e){n.messageBox("–û—à–∏–±–∫–∞ —Ä–∞–∑–±–æ—Ä–∞ —Ñ–∞–π–ª–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫",e,!0)}}}),p=n.ce("input",{id:"SP_IMPORT",attr:{type:"file",accept:"application/JSON"},style:"display: none"});p.addEventListener("change",()=>{let e,t=n.qs("#SP_BACKUP_JSON"),s=n.qs("#SP_IMPORT").files[0];const r=new FileReader;r.onload=s=>{try{e=JSON.parse(s.target.result),n.setCookie("SP_PLUS_SET",s.target.result),t.value=o(e,null,4),n.messageBox("–ò–º–ø–æ—Ä—Ç –∏ —ç–∫—Å–ø–æ—Ä—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫","–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±—ã–ª–∏ —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã",!0,3)}catch(s){n.messageBox("–û—à–∏–±–∫–∞ —Ä–∞–∑–±–æ—Ä–∞ —Ñ–∞–π–ª–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫",s,!0)}},r.readAsText(s)},!1);let u=n.ce("button",{class:"user__tools-link table__cell sp_btn_line sp_btn-list",html:'\n                    <span class="sp sp-restore-g"></span>\n                    <span style="color: #3CA93C; padding-left: 10px">–ò–º–ø–æ—Ä—Ç</span>\n                ',onclick:()=>n.qs("#SP_IMPORT").click()}),_=n.ce("button",{class:"user__tools-link sp_btn-list",html:'\n                    <span class="sp sp-download-blue"></span>\n                    <span style="color: #57A3EA; padding-left: 10px">–≠–∫—Å–ø–æ—Ä—Ç</span>\n                ',onclick:()=>{n.confirmBox("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ñ–∞–π–ª –Ω–∞—Å—Ç—Ä–æ–µ–∫?",!1,()=>{let e=n.ce("a",{attr:{href:URL.createObjectURL(new Blob([o(r._SETTINGS,null,4)],{type:"text/plain"})),download:`spaces-plus-${+new Date}.json`}});e.click(),e.remove()})}}),f=n.ce("textarea",{class:"text-input",id:"SP_BACKUP_JSON",rows:20,html:o(r._SETTINGS,null,4)});i.appendChild(e),e.appendChild(a),a.appendChild(c),c.appendChild(f),l.appendChild(d),i.appendChild(l),s.appendChild(p),s.appendChild(u),s.appendChild(_),null===(t=n.qs("#SP_PLUS_ABOUT").previousElementSibling)||void 0===t||t.after(s)}catch(e){n.logger.error("settingsBackupMenu.ts",e)}}},function(e,t){var s,n,r,i=/[\\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function l(e){return i.lastIndex=0,i.test(e)?'"'+e.replace(i,(function(e){var t=o[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+e+'"'}e.exports=function(e,t,i,o){var a;if(s="",n="",o||(o=0),"number"!=typeof o)throw new Error("beaufifier: limit must be a number");if("number"==typeof i)for(a=0;a<i;a+=1)n+=" ";else"string"==typeof i&&(n=i);if(r=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("beautifier: wrong replacer parameter");return function e(t,i,o){var a,c,d,p,u,_=s,f=i[t];switch(f&&"object"==typeof f&&"function"==typeof f.toJSON&&(f=f.toJSON(t)),"function"==typeof r&&(f=r.call(i,t,f)),typeof f){case"string":return l(f);case"number":return isFinite(f)?String(f):"null";case"boolean":case"null":return String(f);case"object":if(!f)return"null";if(s+=n,u=[],"[object Array]"===Object.prototype.toString.apply(f)){for(p=f.length,a=0;a<p;a+=1)u[a]=e(a,f,o)||"null";return d=0===u.length?"[]":s?s.length+u.join(", ").length+4>o?"[\n"+s+u.join(",\n"+s)+"\n"+_+"]":"[ "+u.join(", ")+" ]":"["+u.join(",")+"]",s=_,d}if(r&&"object"==typeof r)for(p=r.length,a=0;a<p;a+=1)"string"==typeof r[a]&&(d=e(c=r[a],f,o))&&u.push(l(c)+(s?": ":":")+d);else for(c in f)Object.prototype.hasOwnProperty.call(f,c)&&(d=e(c,f,o))&&u.push(l(c)+(s?": ":":")+d);return d=0===u.length?"{}":s?s.length+u.join(", ").length+4>o?"{\n"+s+u.join(",\n"+s)+"\n"+_+"}":"{ "+u.join(", ")+" }":"{"+u.join(",")+"}",s=_,d}}("",{"":e},o)}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.settingsRecentSmiles=void 0;const n=s(0),r=s(2);t.settingsRecentSmiles=e=>{var t;let s=n.ce("div",{id:"SP_RECENTS_SETTINGS",class:"sp_settings-wrap"}),i=n.ce("label",{html:'–°–æ—Ö—Ä–∞–Ω—è—Ç—å —Å–º–∞–π–ª–∏–∫–æ–≤:<div class="label__desc">–æ—Ç 10 –¥–æ 60</div>',class:"label"}),o=n.ce("input",{type:"text",class:"text-input",size:4,attr:{maxlength:2},value:r._SETTINGS.recentSmiles.max});o.addEventListener("change",e=>{/^([1-5][0-9]|60)$/i.test(e.target.value)?(n.setSettings("recentSmiles.max",e.target.value),o.classList.remove("sp-input-error")):o.classList.add("sp-input-error")}),s.appendChild(i),s.appendChild(o),null===(t=e.parentElement)||void 0===t||t.after(s)}}]);