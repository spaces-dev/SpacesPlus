(function(){"use strict";const ce={name:"spaces-plus",description:"\u{1F680} Powerful userscript for Spaces.ru",homepage:"https://spaces-dev.github.io/SpacesPlus/",version:"3.2.0",license:"MIT",type:"module",author:{name:"Vitalij Ryndin",email:"sys@crashmax.ru",url:"https://crashmax.ru"},scripts:{dev:"vite build --watch --mode development",build:"npm run type-check && vite build","type-check":"tsc --noEmit",format:'prettier --write "**/*.{js,ts,tsx,json}"'},devDependencies:{"@crashmax/prettier-config":"5.0.2","@crashmax/tsconfig":"2.1.0",typescript:"5.4.5",vite:"5.2.11","vite-userscript-plugin":"1.10.0"},dependencies:{"json-beautify":"^1.1.1","zero-dependency":"0.9.9"}},j=document.location.protocol,B=document.location.hostname,h=`${j}//${B}`,X=ce.version,Be=ce.homepage,H=Number(new Date),R=window.Device||unsafeWindow.Device,N=Be,y={CK:"",SID:"",USERNAME:"",BANNED:null,ONLINE:null,NICKNAME:null,CONTENT:null,EVENTS:0,PLAYER:0,VERSION:Number(X.split(".").join(""))},r=(e,t)=>{const s=document.createElement(e);return Object.assign(s,t),Object.assign(s.style,t?.style),s},n=e=>document.querySelector(e),E=e=>document.querySelectorAll(e),K=(e,t)=>Object.assign(e.style,t);function He(e){return Object.entries(e)}function je(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}const pe={info:"#2ecc71",debug:"#7f8c8d",warn:"#f39c12",error:"#c0392b"};function De(e){return[`background: ${pe[e]}`,"border-radius: 0.5em","color: white","font-weight: bold","padding: 2px 0.5em","font-family: cursive"].join(";")}function Fe(e){return He(pe).reduce((t,[s])=>(t[s]=(...a)=>{console[s](`%c${e}`,De(s),...a)},t),{})}const u=Fe(`Spaces+ ${X}`);async function T(e,t,s,a){const l=new Headers;s?l.append("X-Proxy","spaces"):l.append("Content-Type","application/x-www-form-urlencoded");const i=await fetch(t,{method:e,headers:l,body:a});try{i.parsedBody=await i.json()}catch(d){u.error("http.ts",d)}return i}const de=e=>e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),_e=(e,t)=>{for(let s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);return e},ue=e=>e&&e.toString().split("").join("."),L=(e,t,s,a)=>{let l=n("#SP_PLUS_ALERT"),i=n("#SP_PLUS_CONFIRM"),d=r("div",{className:`sticker w400 ${i||l?"":"fadeIn"}`,id:"SP_PLUS_ALERT"});l?.remove(),i?.remove();let c=r("div",{className:"content-item3 wbg oh",innerHTML:(s?'<span id="modal-close" class="sp sp-remove-grey pointer right notif_close close_h" title="\u0417\u0430\u043A\u0440\u044B\u0442\u044C"></span>':"")+`${e}<div class="pad_t_a"></div><span style="font-size: 13px" class="grey">${t}</span>`});d.appendChild(c),document.body.appendChild(d),n("#modal-close")?.addEventListener("click",()=>{J()}),a!==void 0&&setTimeout(()=>{J()},a*1e3)},M=(e,t,s)=>{let a=n("#SP_PLUS_ALERT"),l=n("#SP_PLUS_CONFIRM"),i=r("div",{id:"SP_PLUS_CONFIRM",className:`sticker ${l||a?"":"fadeIn"}`}),d=r("div",{className:"content-item3 wbg oh",innerHTML:e+'<div class="pad_t_a"></div>'}),c=r("button",{innerHTML:"\u0414\u0430",href:"#",className:"btn btn_red btn_input"}),o=r("a",{innerHTML:"\u041E\u0442\u043C\u0435\u043D\u0430",href:"#",className:"btn btn_white btn_input right sticker-close_btn"}),p=r("small",{className:"pad_t_a grey",innerHTML:"\u042D\u0442\u043E \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u043D\u0435\u043B\u044C\u0437\u044F \u0431\u0443\u0434\u0435\u0442 \u043E\u0442\u043C\u0435\u043D\u0438\u0442\u044C."}),f=r("div",{className:"pad_t_a"});a?.remove(),l?.remove(),c.onclick=()=>(J(),s(),!1),o.onclick=()=>(J(),!1),t&&d.appendChild(p),d.appendChild(f),d.appendChild(c),d.appendChild(o),i.appendChild(d),document.body.appendChild(i)},J=()=>{let e=n("#SP_PLUS_ALERT")||n("#SP_PLUS_CONFIRM");e&&(e.classList.contains("fadeIn")||e.classList.add("fadeIn"),e.classList.replace("fadeIn","fadeOut"),e.addEventListener("animationend",()=>{e.remove()}))};function D(e){let t=document.cookie.match(new RegExp(`(?:^|; )${e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")}=([^;]*)`));return t?decodeURIComponent(t[1]):void 0}function w(e,t,s){s=_e({path:"/",expires:365,secure:!1,domain:"."+B},s),s.expires&&!(s.expires instanceof Date)&&(s.expires=new Date(+new Date+1e3*3600*24*s.expires));let a=t!==null?encodeURIComponent(e)+"="+encodeURIComponent(t):encodeURIComponent(e)+"=";s.expires&&(a+="; expires="+s.expires.toUTCString()),s.domain&&(a+="; domain="+s.domain),s.path&&(a+="; path="+s.path),s.secure&&(a+="; secure"),document.cookie=a}function I(e){w(e,null,{expires:-1})}const We=e=>e[0].toUpperCase()+e.substring(1),C=e=>{let t=document.location.pathname,s=t.replace(/\/\s*$/,"").split("/");return e?s[e]:t},fe={blogsd:`\u0424\u0443\u043D\u043A\u0446\u0438\u044F \u043F\u043E\u0437\u0432\u043E\u043B\u044F\u0435\u0442 \u0443\u0434\u0430\u043B\u044F\u0442\u044C \u0441\u0440\u0430\u0437\u0443 \u043D\u0435\u0441\u043A\u043E\u043B\u044C\u043A\u043E \u0431\u043B\u043E\u0433\u043E\u0432.</br></br><img src="${N}/screens/sort-blogs.png"></br>\u0420\u0430\u0431\u043E\u0442\u0430\u0435\u0442 \u0442\u043E\u043B\u044C\u043A\u043E \u0432 <a href="${h}/diary/view/?Short=0&sort=0">"\u0420\u0430\u0441\u0448\u0438\u0440\u0435\u043D\u043D\u043E\u043C \u0432\u0438\u0434\u0435"</a> (\u043D\u0430\u0436\u043C\u0438\u0442\u0435 \u043D\u0430 \u0441\u0441\u044B\u043B\u043A\u0443, \u0447\u0442\u043E\u0431\u044B \u0432\u043A\u043B\u044E\u0447\u0438\u0442\u044C \u044D\u0442\u043E\u0442 \u0432\u0438\u0434 - \u043E\u0442\u043A\u0440\u043E\u0435\u0442\u0441\u044F \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0430 \u0441 \u0432\u0430\u0448\u0438\u043C\u0438 \u0431\u043B\u043E\u0433\u0430\u043C\u0438).`,readersd:"\u0424\u0443\u043D\u043A\u0446\u0438\u044F \u043F\u043E\u0437\u0432\u043E\u043B\u044F\u0435\u0442 \u0443\u0434\u0430\u043B\u044F\u0442\u044C \u0441\u0440\u0430\u0437\u0443 \u043D\u0435\u0441\u043A\u043E\u043B\u044C\u043A\u043E \u0447\u0438\u0442\u0430\u0442\u0435\u043B\u0435\u0439, \u043C\u043E\u0436\u0435\u0442 \u0431\u044B\u0442\u044C \u0432\u0430\u043C \u044D\u0442\u043E \u043F\u0440\u0438\u0433\u043E\u0434\u0438\u0442\u044C\u0441\u044F.",comments:"\u0424\u0443\u043D\u043A\u0446\u0438\u044F \u0431\u0443\u0434\u0435\u0442 \u043F\u043E\u043B\u0435\u0437\u043D\u0430 \u0442\u0435\u043C, \u043A\u0442\u043E \u0447\u0430\u0441\u0442\u043E \u0443\u0434\u0430\u043B\u044F\u0435\u0442 \u043C\u043D\u043E\u0433\u043E \u043A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0435\u0432. \u0420\u0430\u0431\u043E\u0442\u0430\u0435\u0442 \u0432 \u043B\u044E\u0431\u043E\u043C \u043C\u0435\u0441\u0442\u0435, \u0433\u0434\u0435 \u0443 \u0412\u0430\u0441 \u0435\u0441\u0442\u044C \u0432\u043E\u0437\u043C\u043E\u0436\u043D\u043E\u0441\u0442\u044C \u0443\u0434\u0430\u043B\u044F\u0442\u044C \u043A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0438, \u0431\u0443\u0434\u044C \u044D\u0442\u043E \u0432\u0430\u0448 \u0431\u043B\u043E\u0433 \u0438\u043B\u0438 \u0433\u043E\u0441\u0442\u0435\u0432\u0430\u044F.",blockedfiles:"\u0424\u0443\u043D\u043A\u0446\u0438\u044F \u043F\u043E\u0437\u0432\u043E\u043B\u044F\u0435\u0442 \u0441\u043A\u0430\u0447\u0438\u0432\u0430\u0442\u044C \u0444\u0430\u0439\u043B\u044B \u0437\u0430\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u043D\u043D\u044B\u0435 \u0430\u043D\u0442\u0438\u0432\u0438\u0440\u0443\u0441\u043E\u043C (Spaces+ \u043D\u0435 \u043D\u0435\u0441\u0435\u0442 \u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043D\u043D\u043E\u0441\u0442\u044C \u0437\u0430 \u0441\u043A\u0430\u0447\u0438\u0432\u0430\u043D\u0438\u0435 \u0444\u0430\u0439\u043B\u043E\u0432 \u0441 \u0432\u0438\u0440\u0443\u0441\u0430\u043C\u0438!).",oldheader:"\u0424\u0443\u043D\u043A\u0446\u0438\u044F \u043C\u0435\u043D\u044F\u0435\u0442 \u043A\u043D\u043E\u043F\u043A\u0443 \u043F\u043E\u0447\u0442\u044B \u0438 \u043B\u0435\u043D\u0442\u044B \u043C\u0435\u0441\u0442\u0430\u043C\u0438, \u043A\u0430\u043A \u0431\u044B\u043B\u043E \u0440\u0430\u043D\u044C\u0448\u0435.",playerdn:`<img src="${N}/screens/player-download.png"></br>\u0414\u043E\u0431\u0430\u0432\u043B\u044F\u0435\u0442\u0441\u044F \u043A\u043D\u043E\u043F\u043A\u0430 \u0432 \u0430\u0443\u0434\u0438\u043E\u043F\u043B\u0435\u0435\u0440, \u043A\u043E\u0442\u043E\u0440\u0430\u044F \u043F\u043E\u0437\u0432\u043E\u043B\u044F\u0435\u0442 \u0441\u043A\u0430\u0447\u0438\u0432\u0430\u0442\u044C \u0432\u043E\u0441\u043F\u0440\u043E\u0438\u0437\u0432\u0435\u0434\u0435\u043D\u043D\u044B\u0439 \u0432\u0430\u043C\u0438 \u0442\u0440\u0435\u043A.`,dredirect:"\u0424\u0443\u043D\u043A\u0446\u0438\u044F \u0438\u0437\u0431\u0430\u0432\u043B\u044F\u0435\u043C \u0412\u0430\u0441 \u043E\u0442 \u043D\u0430\u0437\u043E\u0439\u043B\u0438\u0432\u043E\u0433\u043E \u043F\u0440\u0435\u0434\u0443\u043F\u0440\u0435\u0436\u0434\u0435\u043D\u0438\u044F, \u043A\u043E\u0433\u0434\u0430 \u0432\u044B \u0445\u043E\u0442\u0438\u0442\u0435 \u043F\u0435\u0440\u0435\u0439\u0442\u0438 \u043F\u043E \u0432\u043D\u0435\u0448\u043D\u0435\u0439 \u0441\u0441\u044B\u043B\u043A\u0435.",online:"\u0424\u0443\u043D\u043A\u0446\u0438\u044F \u043F\u043E\u0437\u0432\u043E\u043B\u044F\u0435\u0442 \u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u0442\u043E\u0447\u043D\u043E\u0435 \u0432\u0440\u0435\u043C\u044F \u043E\u043D\u043B\u0430\u0439\u043D \u0443 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0435\u0439 \u0432 \u0430\u043D\u043A\u0435\u0442\u0430\u0445.",coins:"\u0424\u0443\u043D\u043A\u0446\u0438\u044F \u0432 \u0430\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u043E\u043C \u0440\u0435\u0436\u0438\u043C\u0435 \u0438\u0449\u0435\u0442 \u0438 \u0441\u043E\u0431\u0438\u0440\u0430\u0435\u0442 \u0431\u043E\u043D\u0443\u0441\u043D\u044B\u0435 \u043C\u043E\u043D\u0435\u0442\u044B.",rscroll:"\u041F\u0435\u0440\u0435\u043C\u0435\u0449\u0430\u0435\u0442 \u043F\u043E\u043B\u043E\u0441\u0443 \u0430\u0432\u0442\u043E\u0441\u043A\u0440\u043E\u043B\u043B\u0430 \u043D\u0430 \u043F\u0440\u0430\u0432\u0443\u044E \u0441\u0442\u043E\u0440\u043E\u043D\u0443.",hrightbar:'\u0424\u0443\u043D\u043A\u0446\u0438\u044F \u0441\u043A\u0440\u044B\u0432\u0430\u0435\u0442 \u043F\u0440\u0430\u0432\u043E\u0435 \u043C\u0435\u043D\u044E (\u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0430 \u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u044C\u0441\u044F \u043D\u0430 25% \u0448\u0438\u0440\u0435).</br></br>\u041A\u043E\u043D\u0444\u043B\u0438\u043A\u0442\u0443\u0435\u0442 c \u0444\u0443\u043D\u043A\u0446\u0438\u0435\u0439 "\u0412\u0438\u0434\u0436\u0435\u0442 \u043F\u043E\u0433\u043E\u0434\u044B".',favorite:`<img src="${N}/screens/favorite-user.png"></br>\u0424\u0443\u043D\u043A\u0446\u0438\u044F \u0434\u043E\u0431\u0430\u0432\u043B\u044F\u0435\u0442 \u043D\u0430 \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0443 \u043A\u0430\u0436\u0434\u043E\u0433\u043E \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F \u043A\u043D\u043E\u043F\u043A\u0443 "\u0412 \u0437\u0430\u043A\u043B\u0430\u0434\u043A\u0438". \u041F\u043E\u0432\u0442\u043E\u0440\u043D\u043E \u043D\u0430\u0436\u0430\u0432 \u043D\u0430 \u043A\u043D\u043E\u043F\u043A\u0443, \u0412\u044B \u0441\u043C\u043E\u0436\u0435\u0442\u0435 \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F \u0438\u0437 \u0437\u0430\u043A\u043B\u0430\u0434\u043E\u043A.`,userbypass:`<img src="${N}/screens/bypass-profile.png"></br>\u0424\u0443\u043D\u043A\u0446\u0438\u044F \u043F\u043E\u0437\u0432\u043E\u043B\u044F\u0435\u0442 \u043F\u0440\u043E\u0441\u043C\u0430\u0442\u0440\u0438\u0432\u0430\u0442\u044C \u0440\u0430\u0437\u0434\u0435\u043B\u044B \u0443 \u0437\u0430\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u043D\u043D\u044B\u0445/\u0443\u0434\u0430\u043B\u0435\u043D\u043D\u044B\u0445 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0435\u0439, \u0434\u0430\u0436\u0435 \u0435\u0441\u043B\u0438 \u043E\u043D \u0443 \u0412\u0430\u0441 \u0432 \u0447\u0435\u0440\u043D\u043E\u043C \u0441\u043F\u0438\u0441\u043A\u0435.`,grotate:`<img src="${N}/screens/rotate-image.png"></br>\u0414\u043E\u0431\u0430\u0432\u043B\u044F\u0435\u0442\u0441\u044F \u043A\u043D\u043E\u043F\u043A\u0430 \u0432 \u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440\u0449\u0438\u043A \u0444\u043E\u0442\u043E\u0433\u0440\u0430\u0444\u0438\u0439, \u0441 \u043F\u043E\u043C\u043E\u0449\u044C\u044E \u0435\u0435 \u043C\u043E\u0436\u043D\u043E \u043F\u043E\u0432\u043E\u0440\u0430\u0447\u0438\u0432\u0430\u0442\u044C \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435.`,adblock:"\u0424\u0443\u043D\u043A\u0446\u0438\u044F \u043F\u043E\u043B\u043D\u043E\u0441\u0442\u044C\u044E \u0441\u043A\u0440\u044B\u0432\u0430\u0435\u0442 \u043D\u0430\u0437\u043E\u0439\u043B\u0438\u0432\u0443\u044E \u0440\u0435\u043A\u043B\u0430\u043C\u0443 \u0438 \u043D\u0435 \u0442\u043E\u043B\u044C\u043A\u043E.",stickyheader:"\u0424\u0443\u043D\u043A\u0446\u0438\u044F \u0437\u0430\u043A\u0440\u0435\u043F\u043B\u044F\u0435\u0442 \u0448\u0430\u043F\u043A\u0443 \u0441\u0430\u0439\u0442\u0430.",playback:`<img src="${N}/screens/video-speed.png"></br>\u0412 \u0432\u0438\u0434\u0435\u043E\u043F\u043B\u0435\u0435\u0440\u0435 \u0434\u043E\u0431\u0430\u0432\u043B\u044F\u0435\u0442\u0441\u044F \u043A\u043D\u043E\u043F\u043A\u0430 \u0443\u0441\u043A\u043E\u0440\u0435\u043D\u0438\u044F \u0432\u0438\u0434\u0435\u043E, \u043F\u0440\u0438\u043C\u0435\u0440\u043D\u043E \u043A\u0430\u043A \u043D\u0430 YouTube.`,recents:`<img src="${N}/screens/recent-smiles.png"></br>\u0412 \u043C\u0435\u043D\u044E \u0441\u043C\u0430\u0439\u043B\u0438\u043A\u043E\u0432 \u0434\u043E\u0431\u0430\u0432\u043B\u044F\u0435\u0442\u0441\u044F \u0440\u0430\u0437\u0434\u0435\u043B \u0441 \u0440\u0430\u043D\u0435\u0435 \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u043D\u044B\u043C\u0438 \u0441\u043C\u0430\u0439\u043B\u0438\u043A\u0430\u043C\u0438, \u0434\u043B\u044F \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0438\u044F \u0432 \u0440\u0430\u0437\u0434\u0435\u043B, \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 \u0441\u043C\u0430\u0439\u043B\u0438\u043A\u0438/\u0441\u0442\u0438\u043A\u0435\u0440\u044B \u0438\u0437 \u043C\u0435\u043D\u044E \u0441\u043C\u0430\u0439\u043B\u0438\u043A\u043E\u0432.`,karma:"\u0424\u0443\u043D\u043A\u0446\u0438\u044F \u0432 \u0430\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u043E\u043C \u0440\u0435\u0436\u0438\u043C\u0435 \u043F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0430\u0435\u0442 \u043D\u0430\u0437\u043E\u0439\u043B\u0438\u0432\u0443\u044E \u043A\u0430\u0440\u043C\u0443.",friendsOn:`<img src="${N}/screens/friends-online.png"></br>\u0424\u0443\u043D\u043A\u0446\u0438\u044F \u0434\u043E\u0431\u0430\u0432\u043B\u044F\u0435\u0442 \u0432 \u043B\u0435\u0432\u043E\u0435 \u043C\u0435\u043D\u044E \u043F\u0430\u043D\u0435\u043B\u044C \u0441 \u0434\u0440\u0443\u0437\u044C\u044F\u043C\u0438 \u043E\u043D\u043B\u0430\u0439\u043D. \u0414\u043B\u044F \u0440\u0430\u0431\u043E\u0442\u044B \u043D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C\u043E \u0432\u043A\u043B\u044E\u0447\u0438\u0442\u044C \u0440\u0430\u0437\u0434\u0435\u043B <a href="${h}/sidebar/links/?T=4">\u0414\u0440\u0443\u0437\u044C\u044F</a>, \u0435\u0441\u043B\u0438 \u043E\u043D \u0443 \u0432\u0430\u0441 \u0432\u044B\u043A\u043B\u044E\u0447\u0435\u043D.</br></br>\u041F\u0430\u043D\u0435\u043B\u044C \u043E\u0433\u0440\u0430\u043D\u0438\u0447\u0435\u043D\u0430 \u043E\u0442 1 \u0434\u043E 15 \u0434\u0440\u0443\u0437\u0435\u0439 \u043E\u043D\u043B\u0430\u0439\u043D.`,bodystyle:"\u041F\u043E\u0437\u0432\u043E\u043B\u044F\u0435\u0442 \u0443\u043A\u0440\u0430\u0448\u0430\u0442\u044C \u0444\u043E\u043D \u0441\u0430\u0439\u0442\u0430 \u043D\u0430 \u0441\u0432\u043E\u0439 \u0432\u043A\u0443\u0441. \u0412 \u043F\u043E\u0434\u0431\u043E\u0440\u043A\u0435 \u0438\u043C\u0435\u0435\u0442\u0441\u044F 20 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0439 \u0434\u043B\u044F \u0444\u043E\u043D\u0430, \u0442\u0430\u043A\u0436\u0435 \u0412\u044B \u043C\u043E\u0436\u0435\u0442\u0435 \u043F\u0435\u0440\u0435\u043A\u043B\u044E\u0447\u0438\u0442\u044C\u0441\u044F \u043D\u0430 \u0446\u0432\u0435\u0442\u043D\u043E\u0439 \u0444\u043E\u043D.",weather:`<img src="${N}/screens/weather-widget.png"></br>\u041E\u0442\u043E\u0431\u0440\u0430\u0436\u0430\u0435\u0442 \u0438\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044E \u043E \u0442\u0435\u043A\u0443\u0449\u0435\u043C \u0441\u043E\u0441\u0442\u043E\u044F\u043D\u0438\u0438 \u043F\u043E\u0433\u043E\u0434\u044B, \u0442\u0435\u043C\u043F\u0435\u0440\u0430\u0442\u0443\u0440\u0430, \u043E\u0431\u043B\u0430\u0447\u043D\u043E\u0441\u0442\u044C, \u0432\u043B\u0430\u0436\u043D\u043E\u0441\u0442\u044C, \u0434\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u0438 \u0432\u0435\u0442\u0435\u0440.</br></br>\u0418\u043C\u0435\u0435\u0442\u0441\u044F \u0432\u043E\u0437\u043C\u043E\u0436\u043D\u043E\u0441\u0442\u044C \u0438\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u0433\u043E\u0440\u043E\u0434, API-\u041A\u043B\u044E\u0447 \u0438 \u0438\u043D\u0442\u0435\u0440\u0432\u0430\u043B \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u044F \u043F\u043E\u0433\u043E\u0434\u044B.`,sticker:`\u0424\u0443\u043D\u043A\u0446\u0438\u044F \u043F\u043E\u0437\u0432\u043E\u043B\u044F\u0435\u0442 \u0431\u0435\u0441\u043F\u043B\u0430\u0442\u043D\u043E \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u044C \u0441\u0442\u0438\u043A\u0435\u0440\u044B. \u0420\u0430\u0431\u043E\u0442\u0430\u0435\u0442 \u0432 \u043F\u043E\u0447\u0442\u0435 (\u043F\u0440\u0438 \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0438 \u0438\u0437 <a href="${h}/mail/write/">"\u041D\u043E\u0432\u043E\u0435 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u0435"</a> \u043D\u0435 \u0440\u0430\u0431\u043E\u0442\u0430\u0435\u0442!), \u0432 \u043A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u044F\u0445, \u043F\u0440\u0438 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u0438 \u0431\u043B\u043E\u0433\u043E\u0432 \u0438\u043B\u0438 \u0442\u0435\u043C \u043D\u0430 \u0444\u043E\u0440\u0443\u043C\u0435.`},ee={blogsd:"\u041F\u0430\u043A\u0435\u0442\u043D\u043E\u0435 \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u0435 \u0431\u043B\u043E\u0433\u043E\u0432",readersd:"\u041F\u0430\u043A\u0435\u0442\u043D\u043E\u0435 \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u0435 \u0447\u0438\u0442\u0430\u0442\u0435\u043B\u0435\u0439",comments:"\u041F\u0430\u043A\u0435\u0442\u043D\u043E\u0435 \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u0435 \u043A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0435\u0432",blockedfiles:"\u0421\u0441\u044B\u043B\u043A\u0438 \u043D\u0430 \u0437\u0430\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u043D\u043D\u044B\u0435 \u0444\u0430\u0439\u043B\u044B",oldheader:"\u0421\u0442\u0430\u0440\u043E\u0435 \u043F\u043E\u043B\u043E\u0436\u0435\u043D\u0438\u0435 \u043A\u043D\u043E\u043F\u043E\u043A \u0432 \u0448\u0430\u043F\u043A\u0435",playerdn:"\u041A\u043D\u043E\u043F\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u0442\u0440\u0435\u043A\u0430 \u0438\u0437 \u043F\u043B\u0435\u0435\u0440\u0430",dredirect:"\u0412\u043D\u0435\u0448\u043D\u0438\u0435 \u0441\u0441\u044B\u043B\u043A\u0438 \u0431\u0435\u0437 \u0440\u0435\u0434\u0438\u0440\u0435\u043A\u0442\u0430",online:"\u0422\u043E\u0447\u043D\u043E\u0435 \u0432\u0440\u0435\u043C\u044F \u043E\u043D\u043B\u0430\u0439\u043D \u0432 \u0430\u043D\u043A\u0435\u0442\u0430\u0445",coins:"\u0421\u043E\u0431\u0438\u0440\u0430\u0442\u044C \u0431\u043E\u043D\u0443\u0441\u043D\u044B\u0435 \u043C\u043E\u043D\u0435\u0442\u044B",rscroll:"\u041F\u0440\u043E\u043A\u0440\u0443\u0442\u043A\u0430 \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u044B \u0441\u043F\u0440\u0430\u0432\u0430",hrightbar:"\u0421\u043A\u0440\u044B\u0442\u044C \u043F\u0440\u0430\u0432\u043E\u0435 \u043C\u0435\u043D\u044E",favorite:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0432 \u0437\u0430\u043A\u043B\u0430\u0434\u043A\u0438",userbypass:"\u041F\u0440\u043E\u0441\u043C\u043E\u0442\u0440 \u043F\u0440\u043E\u0444\u0438\u043B\u0435\u0439",grotate:"\u041F\u043E\u0432\u043E\u0440\u043E\u0442 \u0444\u043E\u0442\u043E\u0433\u0440\u0430\u0444\u0438\u0439",adblock:"\u0421\u043A\u0440\u044B\u0432\u0430\u0442\u044C \u0440\u0435\u043A\u043B\u0430\u043C\u0443",stickyheader:"\u0417\u0430\u043A\u0440\u0435\u043F\u0438\u0442\u044C \u0448\u0430\u043F\u043A\u0443",playback:"\u041A\u043D\u043E\u043F\u043A\u0430 \u0443\u0441\u043A\u043E\u0440\u0435\u043D\u0438\u044F \u0432\u0438\u0434\u0435\u043E",recents:"\u0420\u0430\u043D\u0435\u0435 \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u043D\u044B\u0435 \u0441\u043C\u0430\u0439\u043B\u0438\u043A\u0438",karma:"\u0421\u043E\u0431\u0438\u0440\u0430\u0442\u044C \u043A\u0430\u0440\u043C\u0443",friendsOn:"\u041F\u0430\u043D\u0435\u043B\u044C \u0434\u0440\u0443\u0437\u0435\u0439 \u043E\u043D\u043B\u0430\u0439\u043D",bodystyle:"\u0424\u043E\u043D \u0441\u0430\u0439\u0442\u0430",weather:"\u0412\u0438\u0434\u0436\u0435\u0442 \u043F\u043E\u0433\u043E\u0434\u044B",sticker:"\u0411\u0435\u0441\u043F\u043B\u0430\u0442\u043D\u044B\u0435 \u0441\u0442\u0438\u043A\u0435\u0440\u044B"},_={blogsd:!1,readersd:!1,comments:!1,blockedfiles:!0,oldheader:!0,playerdn:!0,dredirect:!0,online:!0,coins:!0,rscroll:!1,hrightbar:!1,favorite:!0,grotate:!0,angle:0,userbypass:!0,adblock:!0,stickyheader:!0,apidebug:!1,karma:!0,sticker:!0,playback:!0,videoSpeed:1,upVersion:y.VERSION,beta:!1,hideNotify:{configImport:!1},recents:!0,recentSmiles:{show:!1,max:60},friendsOn:!0,friendsSet:{max:10},bodystyle:!0,bodystyleSet:{url:`${N}/backgrounds/default.png`,color:"#DAE1E8",urlchecked:!0,colorchecked:!1},weather:!1,weatherSet:{interval:3600,time:0,city:null,language:"ru",units:"metric",key:"5f11ea40424990937175d20a072e0c72"}},qe=()=>{let e=D("SP_PLUS_SET");try{e?_e(_,JSON.parse(e)):w("SP_PLUS_SET",JSON.stringify(_))}catch(t){u.error("readSettings",t)}},v=(e,t)=>{try{if(e.indexOf(".")!==-1){let s=e.split(".");_[s[0]][s[1]]=t}else _[e]=t;w("SP_PLUS_SET",JSON.stringify(_))}catch(s){u.error("setSettings",s)}},te=e=>{let t,s=document.location.search;try{return e=e.toLowerCase(),s.toLowerCase().indexOf(e)!==-1&&s.substring(1).split("&").forEach(a=>{let l=a.split("=");l[0].toLowerCase()===e&&(t=l[1])}),t}catch(a){u.error("getQuery.ts",a)}},se=(e,t)=>{let s=[2,0,1,1,1,2];return t[e%100>4&&e%100<20?2:s[e%10<5?e%10:5]]},ae=e=>{const t={};let s=document.createElement("a");s.href=e;let l=s.search.substring(1).split("&");for(let i=0;i<l.length;i++){let d=l[i].split("=");t[d[0]]=decodeURIComponent(d[1])}return t},Ge=e=>e.match(/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)/g)!==null,ne=(e,t,s)=>{try{document.title=s,history.pushState(e,s,t)}catch(a){u.error("historyPush.ts",a)}},Ke=(e,t,s,a)=>{let l={},i=0;for(let d in e)e.hasOwnProperty(d)&&(i===a&&t&&s&&(l[t]=s),l[d]=e[d],i++);return t&&s&&(l[t]=s),l},Je=()=>{try{let e=n("#more_menu > div > div");if(C(1)==="mysite"&&e&&!n("#SP_QR_BUTTON")){let t=r("a",{className:"list-link",id:"SP_QR_BUTTON",innerHTML:`
                    <span class="sp sp-qrcode"></span>
                    <span class="t js-text">\u041F\u043E\u043B\u0443\u0447\u0438\u0442\u044C QR-\u043A\u043E\u0434</span>
                `,onclick:()=>{L("\u0421\u043A\u0430\u043D\u0438\u0440\u0443\u0439\u0442\u0435 QR-\u043A\u043E\u0434 c \u0442\u0435\u043B\u0435\u0444\u043E\u043D\u0430",`
                            <div id="SP_QR_CODE">
                                <img src="${j}//spac.me/i/preloader.gif" class="sp_img-center" id="SP_QR_LOADER">
                            </div>
                        `,!0);let s=ze(`https://chart.googleapis.com/chart?cht=qr&chs=256x256&chl=${y.SID}`),a=n("#SP_QR_LOADER"),l=n("#SP_QR_CODE");return s.then(i=>{a.remove(),l.appendChild(i),l.appendChild(r("ol",{innerHTML:`
                                <li>\u0417\u0430\u043F\u0443\u0441\u0442\u0438\u0442\u0435 <b>OpenSpaces</b> \u043D\u0430 \u0442\u0435\u043B\u0435\u0444\u043E\u043D\u0435</li>
                                <li>\u041D\u0430 \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0435 \u0430\u0432\u0442\u043E\u0440\u0438\u0437\u0430\u0446\u0438\u0438 \u043D\u0430\u0436\u043C\u0438\u0442\u0435 \xAB<b>Login by QR code</b>\xBB</li>
                                <li>\u0421\u043A\u0430\u043D\u0438\u0440\u0443\u0439\u0442\u0435 \u044D\u0442\u043E\u0442 \u043A\u043E\u0434 \u0434\u043B\u044F \u0430\u0432\u0442\u043E\u0440\u0438\u0437\u0430\u0446\u0438\u0438</li>
                            `}))}),!1}});e.appendChild(t)}}catch(e){u.error("qrCode.ts",e)}},ze=e=>new Promise((t,s)=>{const a=new Image;a.src=e,a.className="sp_img-center",a.onload=()=>t(a),a.onerror=()=>s(u.error("qrCodeLoader",a))}),Ye=()=>{try{if(E('img[src$="static/i/close3.png"]').forEach(e=>e.parentElement?.parentElement?.remove()),E('a[title="\u0420\u0435\u043A\u043B\u0430\u043C\u0430"').forEach(e=>e.parentElement?.remove()),E("#vk_groups").forEach(e=>e.parentElement?.remove()),!n("#SP_PLUS_ADBLOCK")){let e=r("script",{type:"text/javascript",id:"SP_PLUS_ADBLOCK",innerHTML:'var rawOpen = XMLHttpRequest.prototype.open; XMLHttpRequest.prototype.open = function() { if (!this._hooked) { this._hooked = true; setupHook(this); }; rawOpen.apply(this, arguments); }; function setupHook(xhr) { function getter() { delete xhr.responseText; var ret = xhr.responseText; var json = JSON.parse(ret); json.reklama = ""; json.rightbar_reklama = ""; json.rightbar_app = ""; json.sidebar_reklama = ""; ret = JSON.stringify(json); setup(); return ret; }; function setup() { Object.defineProperty(xhr, "responseText", { get: getter, configurable: true }); } setup(); };'});document.getElementsByTagName("head")[0].appendChild(e)}}catch(e){u.error("adBlock.ts",e)}},Ve=()=>{try{const e=n(".ico_logo_newyear");if(e){let t=1;setInterval(()=>{e.classList.replace(`ico_logo_newyear_${t}`,`ico_logo_newyear_${t>5?1:t+1}`),t++,t>6&&(t=1)},1e4)}}catch(e){u.error("newYear",e)}},he=e=>{E("span.horiz-menu__link-text").forEach(l=>l.remove());let t=E("a.horiz-menu__link"),s=t[2].cloneNode(!0),a=t[4].cloneNode(!0);(e||t[2].pathname==="/mail/")&&(t[4].replaceWith(s),t[2].replaceWith(a))},A=()=>{let e=n("#SP_PLUS_INJSTYLE")||r("style",{id:"SP_PLUS_INJSTYLE",type:"text/css"});if(!n("#SP_STICKER_CSS")){let t=r("link",{rel:"stylesheet",type:"text/css",id:"SP_STICKER_CSS",href:`${N}/css/sticker.css?r=${H}`});document.getElementsByTagName("head")[0].appendChild(t)}if(!n("#SP_PLUS_MENU")){let t=r("link",{rel:"stylesheet",type:"text/css",id:"SP_PLUS_MENU",href:`${N}/css/menu.css?r=${H}`});document.getElementsByTagName("head")[0].appendChild(t)}_.bodystyle&&(_.bodystyleSet.url&&_.bodystyleSet.urlchecked&&(e.innerHTML=`body,#main_wrap{background-image:url(${_.bodystyleSet.url})}`),_.bodystyleSet.color&&_.bodystyleSet.colorchecked&&(e.innerHTML=`body,#main_wrap{background-color:${_.bodystyleSet.color}}`)),document.getElementsByTagName("head")[0].appendChild(e)},me=e=>{let t=n("#scroll_page");try{e&&!t.hasAttribute("sp-replace")?(t.style.left="auto",t.style.right="0",t.setAttribute("sp-replace","1")):!_.rscroll&&t?.hasAttribute("sp-replace")&&(t.style.left="0",t.style.right="auto",t.removeAttribute("sp-replace"))}catch(s){u.error("scrollMove.ts",s)}},Qe=e=>{let t=r("div",{innerHTML:"\u0414\u043B\u044F \u0440\u0430\u0431\u043E\u0442\u044B <b>Spaces+</b> \u043D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C\u0430 \u0430\u0432\u0442\u043E\u0440\u0438\u0437\u0430\u0446\u0438\u044F!"});if(R.id===1||R.id===2){let s=r("div",{className:"oh busi",innerHTML:"\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0435\u043C\u0430\u044F \u0432\u0435\u0440\u0441\u0438\u044F \u0441\u0430\u0439\u0442\u0430 \u043D\u0435 \u043F\u043E\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044F \u0434\u043B\u044F \u0440\u0430\u0431\u043E\u0442\u044B <b>Spaces+</b>",style:{border:"1px solid #ff9a95",background:"#fdf3ef"}});return e==="01001"&&s.prepend(t),n("#main_wrap").prepend(s),!1}if((R.id===3||R.id===4)&&e==="01001"){let s=r("div",{className:"oh nl system-message",style:{border:"1px solid #ff9a95",background:"#fdf3ef"}});return s.prepend(t),n("#top_info_block").prepend(s),!1}return!0},Ze=()=>{let e=C(),t=C(3),s=`/anketa/index/${t}/`;if(e===s&&y.ONLINE!==t){let a=Array.from(E("div.info-item__title")).filter(l=>l.textContent==="\u0412\u0440\u0435\u043C\u044F \u043E\u043D\u043B\u0430\u0439\u043D:");if(t&&a){y.ONLINE=t;try{T("GET",`${h}/anketa/index/${t}/`,!0).then(l=>{const i=l.parsedBody?.user_widget?.online_time;if(i){let d=(i/3600).toFixed(2).split("."),c=d[0]>0?`${d[0]} \u0447, ${Math.trunc(d[1]/(100/60))} \u043C\u0438\u043D`:`${Math.trunc(d[1]/(100/60))} \u043C\u0438\u043D`;a[0].nextElementSibling.textContent=c,u.info(`\u0412\u0440\u0435\u043C\u044F \u043E\u043D\u043B\u0430\u0439\u043D: ${c}`,l)}})}catch(l){u.error("userOnline.ts",l)}}}else e!==s&&(y.ONLINE=null)},Xe=e=>{if(e&&!n("#spaces_api_debugger")){let t=r("script",{type:"text/javascript",innerHTML:`var Arr=['<div class="widgets-group widgets-group_top js-container__block" id="spaces_api_debugger"><div class="content"><a href="#" class="list-link list-link-blue c-blue" id="api_debug-button"><div class="text-gray"><span class="sp"></span><span class="t darkblue c-darkblue b js-text" style="margin-left: 5px">API Debugger</span></div></a><div id="api_debug-place"></div></div></div>',"append","parent","#location_header","debugger"];$(Arr[3])[Arr[2]]()[Arr[1]](Arr[0]),require(Arr[4]);void(0);`});document.getElementsByTagName("head")[0].appendChild(t)}},et=()=>{try{E(`a[href^="${h}/services/gift_get/"`).forEach(e=>{e.click(),e.parentElement?.remove(),u.info("\u0421\u043E\u0431\u0440\u0430\u043B\u0438 \u043C\u043E\u043D\u0435\u0442\u043A\u0443",e)})}catch(e){u.error("coinsAccept.ts",e)}},tt=()=>{let e=C().split("/"),t=n("#SP_PLUS_BUTTONS_B"),s=E(`a[href^="${h}/diary/editaccess/"`);try{if(e[2]!=="view"&&t&&t.remove(),e[1]==="diary"&&e[2]==="view"&&s&&!n('input[id^="SP_DB_"')){let a=[];for(let c of s){let o=`SP_DB_${ae(c.href).id}`,p=r("input",{className:"sp-cbfb sp-checkbox-square",type:"checkbox",id:o});c.parentElement?.appendChild(p),c.parentElement?.appendChild(r("label",{className:"sp-ch-blogs",htmlFor:o,style:{margin:"2px"}})),a.push(p)}let l=r("div",{className:"widgets-group user__tools_last",id:"SP_PLUS_BUTTONS_B"});const i=r("button",{className:"user__tools-link table__cell sp_btn-list",innerHTML:`
                    <span class="sp sp-ok-blue"></span>
                    <span class="sp-ch-text">\u0412\u044B\u0431\u0440\u0430\u0442\u044C \u0432\u0441\u0435</span>
                `,onclick:c=>{if(c.target instanceof Element){let o=c.target.nodeName==="SPAN"?c.target.parentNode:c.target;for(let p of a)p.checked=o.innerHTML.indexOf("\u0412\u044B\u0431\u0440\u0430\u0442\u044C \u0432\u0441\u0435")!==-1;o.innerHTML=`
                            <span class="sp sp-ok-blue"></span>
                                <span class="sp-ch-text">
                                ${o.innerHTML.indexOf("\u0412\u044B\u0431\u0440\u0430\u0442\u044C \u0432\u0441\u0435")!==-1?"\u0421\u043D\u044F\u0442\u044C \u043E\u0442\u043C\u0435\u0442\u043A\u0438":"\u0412\u044B\u0431\u0440\u0430\u0442\u044C \u0432\u0441\u0435"}
                            </span>
                        `}}}),d=r("button",{className:"user__tools-link table__cell sp_btn_line sp_btn-list",innerHTML:`
                    <span class="sp sp-remove-red"></span>
                    <span class="sp-del-text">\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u044B\u0435</span>
                `,onclick:()=>{let c=[];for(let p of a)p.checked&&c.push(/^SP_DB_([0-9]+)$/i.exec(p.id)[1]);let o=c.length;return o>0?M(`\u0412\u044B \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043B\u044C\u043D\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043B\u0438\u0442\u044C ${o} ${be(o)}?`,!0,async()=>{let p=o;for(let f of c)L(`\u041E\u0441\u0442\u0430\u043B\u043E\u0441\u044C \u0443\u0434\u0430\u043B\u0438\u0442\u044C ${o--} \u0438\u0437 ${p} ${be(o)}`,'\u041F\u043E\u0434\u043E\u0436\u0434\u0438\u0442\u0435 \u043D\u0435\u043C\u043D\u043E\u0433\u043E... <span style="padding-right: 10px" class="ico ico_spinner"></span>',!1),await T("GET",`${h}/diary/delete/?CK=${y.CK}&id=${f}&Sure=1`,!0).then(k=>{u.info("\u0423\u0434\u0430\u043B\u0438\u043B\u0438 \u0431\u043B\u043E\u0433",k)});document.location.reload()}):L("\u0412\u043D\u0438\u043C\u0430\u043D\u0438\u0435!","\u041E\u0442\u043C\u0435\u0442\u044C\u0442\u0435 \u0433\u0430\u043B\u043E\u0447\u043A\u043E\u0439, \u0442\u0435 \u0431\u043B\u043E\u0433\u0438, \u043A\u043E\u0442\u043E\u0440\u044B\u0435 \u0432\u044B \u0445\u043E\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u0438 \u043F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",!0,5),!1}});l.appendChild(d),l.appendChild(i),n('input[id^="SP_DB_"')&&n("#main").after(l)}}catch(a){u.error("deleteBlogs.ts",a)}},be=e=>"\u0431\u043B\u043E\u0433"+se(e,["","\u0430","\u043E\u0432"]),st=()=>{try{if(D("SP_LAUNCH")===void 0&&B!=="spaces-blogs.com"&&B!=="spac1.net"){L("\u0421\u043F\u0430\u0441\u0438\u0431\u043E \u0437\u0430 \u0443\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0443 Spaces+",`
                <b style="color: #f86934">\u0412\u041D\u0418\u041C\u0410\u041D\u0418\u0415!</b></br></br>
                \u0412\u043E \u0438\u0437\u0431\u0435\u0436\u0430\u043D\u0438\u044F \u043F\u043E\u0434\u0434\u0435\u043B\u043E\u043A, \u043A\u043E\u0442\u043E\u0440\u044B\u0435 \u043C\u043E\u0433\u0443\u0442 \u0432\u043E\u0440\u043E\u0432\u0430\u0442\u044C \u043F\u0430\u0440\u043E\u043B\u0438 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0435\u0439, \u0441\u043A\u0440\u0438\u043F\u0442 \u0441\u043A\u0430\u0447\u0438\u0432\u0430\u0442\u044C \u0442\u043E\u043B\u044C\u043A\u043E \u0441 \u043E\u0444\u0438\u0446\u0438\u0430\u043B\u044C\u043D\u043E\u0433\u043E <a href="https://spaces-dev.github.io" target="_blank">\u0441\u0430\u0439\u0442\u0430</a></br></br>
                \u0421 \u0432\u043E\u043F\u0440\u043E\u0441\u0430\u043C\u0438 \u043F\u043E \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u0438\u044E \u0441\u043A\u0440\u0438\u043F\u0442\u0430, \u043F\u0438\u0441\u0430\u0442\u044C \u0432 \u0441\u043E\u043E\u0431\u0449\u0435\u0441\u0442\u0432\u043E <a href="${h}/soo/extension/" target="_blank">Spaces+</a></br></br>
                `,!0);let e=r("div",{className:"pad_t_a"}),t=r("a",{href:`${h}/settings/?sp_plus_settings=1`,className:"btn btn_white btn_input right sticker-close_btn",innerHTML:"\u041F\u0435\u0440\u0435\u0439\u0442\u0438 \u043A \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0430\u043C",onclick:()=>n("#SP_PLUS_ALERT").remove()});e.appendChild(t),n("#SP_PLUS_ALERT")&&n("#SP_PLUS_ALERT > .content-item3").appendChild(e),w("SP_LAUNCH","1")}}catch(e){u.error("firstLaunch.ts",e)}},at=()=>{try{E(`a[href^="${h}/mysite/rate_n_karma/karma/?Accept="`).forEach(e=>{e.click(),e.parentElement?.remove(),u.info("\u0421\u043E\u0431\u0440\u0430\u043B\u0438 \u043A\u0430\u0440\u043C\u0443!",e)})}catch(e){u.error("karmaAccept.ts",e)}},ge=e=>{try{T("GET",`${N}/updater.json?r=${H}`,!1).then(t=>{const s=t.parsedBody;if(u.info("\u041F\u0440\u043E\u0432\u0435\u0440\u043A\u0430 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0439",t),t.status===200&&s?.history)return e(s)})}catch(t){u.error("getUpdater",t)}},nt=()=>{try{ge(e=>{let t=0;if(_.upVersion&&(t=_.upVersion),y.VERSION=Math.max(t,y.VERSION),e.history[0].build>y.VERSION&&(L(`\u0414\u043E\u0441\u0442\u0443\u043F\u043D\u0430 \u043D\u043E\u0432\u0430\u044F \u0432\u0435\u0440\u0441\u0438\u044F Spaces+ ${ue(e.history[0].build)}`,`<div class="pad_t_a"></div>${e.history[0].changes}<div id="SP_UPDATER_BUTTONS" class="pad_t_a"><a class="btn btn_green btn_input" href="${N}/spaces-plus.user.js?r=${H}" onclick="document.body.removeChild(this.parentNode.parentNode.parentNode.parentNode)">\u041E\u0431\u043D\u043E\u0432\u0438\u0442\u044C</a></div>`,!0),n("#SP_PLUS_ALERT"))){const s=r("a",{href:"#",className:"btn btn_white btn_input right sticker-close_btn",innerHTML:"\u0411\u043E\u043B\u044C\u0448\u0435 \u043D\u0435 \u043F\u043E\u043A\u0430\u0437\u044B\u0432\u0430\u0442\u044C",onclick:()=>(v("upVersion",e.history[0].build),n("#SP_PLUS_ALERT").remove(),!1)});n("#SP_UPDATER_BUTTONS").appendChild(s)}})}catch(e){u.error("checkUpdates.ts",e)}},rt=()=>{let e=n("div.progress-item__label"),t=n("div.progress-item__runner");if(e&&t&&!n("#SP_BETA_FEATURES")){let s=e.textContent.split("/"),a=Math.round(Number(s[0])/Number(s[1])*100);a>30&&(e.style.color="#f5f5f5"),t.id="SP_BETA_FEATURES",t.style.width=`${a}%`}},lt=()=>{try{let e=n('a[class*="__adv_download"'),t=n('div[id^="download_wrap_"'),s=n("#SP_LINK_SSL");if(C(1)==="files"&&C(2)==="view"&&t&&!e&&!s){let a=r("a",{href:"#",id:"SP_LINK_SSL",className:"list-link list-link-blue list-link_disabled c-blue",innerHTML:`
                    <span class="ico bp ico_spinner"></span>
                    <span class="t js-text">\u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430</span>
                `});t.children[0].appendChild(a),T("GET",document.location.href,!0).then(l=>{const i=l.parsedBody?.info.file_widget;i&&(a.classList.remove("list-link_disabled"),a.href=i.preview.downloadLinkSSL,a.innerHTML=`
                        <span class="js-ico ico ico_download2_blue"></span>
                        <span class="t js-text">\u0421\u043A\u0430\u0447\u0430\u0442\u044C (${i.downloadBox.weight})</span>
                    `,u.info("\u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430 \u0437\u0430\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u043D\u043D\u043E\u0433\u043E \u0444\u0430\u0439\u043B\u0430",l))})}}catch(e){u.error("blockedFiles.ts",e)}},it=async()=>{try{let e=C(1),t=C(2),s=C(3),a=E("td.table__cell_last"),l=n("#SP_PLUS_INFAVORITE");if((e==="mysite"||e==="anketa"&&t!=="edit"||e==="activity")&&y.USERNAME!==de(n("#location_bar_1_0").textContent)&&s&&a.length>0&&!l){let i=r("td",{className:"table__cell list-link_disabled",id:"SP_PLUS_INFAVORITE"}),d=r("a",{href:"#",id:"SP_FV_LOADER",className:"list-link",innerHTML:`
                        <span class="ico bp ico_spinner"></span>
                        <span class="t js-text">\u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430</span>
                    `});i.appendChild(d),a[1].parentElement?.insertBefore(i,a[1]);let c=a[1]?.parentElement?.childNodes;for(let o in c)c[o].nodeName==="TD"&&(c[o].width="25%");await T("GET",`${h}/anketa/index/${s}`,!0).then(o=>{const p=o.parsedBody?.user_widget;if(p!==void 0){let f=r("a",{href:`${h}/bookmarks/add/?object_id=${p.id}&object_type=11`,className:"list-link",title:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0432 \u0437\u0430\u043A\u043B\u0430\u0434\u043A\u0438",innerHTML:'<span class="sp sp-fav"></span> B \u0437\u0430\u043A\u043B\u0430\u0434\u043A\u0438',onclick:()=>(M(`\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F <b>${p.name}</b> \u0432 \u0437\u0430\u043A\u043B\u0430\u0434\u043A\u0438?`,!1,async()=>{await T("POST",`${h}/ajax/bookmarks/add/`,!1,`object_id=${p.id}&object_type=11&show_all_tags_state=0&new_tags=\u041B\u044E\u0434\u0438&cfms=\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C&CK=${y.CK}`).then(k=>{k.status===200?Se(p.id,p.name,i):u.error("bookmarks/add",k)})}),!1)});Se(p.id,p.name,i),d.remove(),i.classList.remove("list-link_disabled"),i.appendChild(f)}else d.parentElement.style.display="none";u.info("anketa/index",o)})}}catch(e){u.error("favoriteUser.ts",e)}},Se=async(e,t,s)=>{try{s=s.firstElementChild,await T("GET",`${h}/bookmarks/add/?object_id=${e}&object_type=11`,!0).then(a=>{const l=a.parsedBody?.delete_link;l&&(s.href=l.delete_URL,s.title="\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0438\u0437 \u0437\u0430\u043A\u043B\u0430\u0434\u043E\u043A",s.innerHTML='<span class="sp sp-fav-on"></span><span style="color: #61a961"> \u0412 \u0437\u0430\u043A\u043B\u0430\u0434\u043A\u0430\u0445</span>',s.onclick=()=>(M(`\u0412\u044B \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043B\u044C\u043D\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F <b>${t}</b> \u0438\u0437 \u0437\u0430\u043A\u043B\u0430\u0434\u043E\u043A?`,!1,async()=>{await T("GET",l.delete_URL,!1).then(i=>{i.status===200?document.location.reload():u.error("bookmarks/remove",i)})}),!1)),u.info("\u0412 \u0437\u0430\u043A\u043B\u0430\u0434\u043A\u0430\u0445?",a)})}catch(a){u.error("isFav",a)}},ye=e=>{if(e&&!n("#SP_PLUS_STICKERS")){let t=r("script",{type:"text/javascript",id:"SP_PLUS_STICKERS",innerHTML:'var open=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(e,o,t){var n=open.apply(this,arguments);return-1==o.indexOf("mail/sendMessage")&&-1==o.indexOf("diary/new")&&-1==o.indexOf("comments/add")||this.setRequestHeader("X-Proxy","spaces"),n};'});document.getElementsByTagName("head")[0].appendChild(t)}},ot=()=>{let e=n("#SP_RECENT_SMILES"),t=n(".smiles_menu-header"),s=JSON.parse(localStorage.getItem("sp_recent_smiles")||"{}");try{if(t){let a=document.querySelectorAll('img[smile^=":"]');a&&re(a,s)}if(t&&!e){let a=document.querySelectorAll('a[href^="#sm-tab="]');for(let c of a)c.addEventListener("click",()=>{_.sticker&&document.querySelectorAll(".stickers_list>div").forEach(f=>f.remove());let o=document.querySelectorAll('img[smile^=":"]');o&&re(o,s);let p=document.querySelectorAll('a[href^="#sm-cat="]');for(let f of p)f.addEventListener("click",()=>{re(o,s)})});let l=n(".smiles_menu-body"),i=r("span",{className:"sp sp-grey-del trash-btn",onclick:()=>{M("\u0412\u044B \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043B\u044C\u043D\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u043E\u0447\u0438\u0441\u0442\u0438\u0442\u044C \u0440\u0430\u043D\u0435\u0435 \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u043D\u044B\u0435 \u0441\u043C\u0430\u0439\u043B\u0438\u043A\u0438?",!0,()=>{localStorage.removeItem("sp_recent_smiles"),document.location.reload()})}}),d=r("img",{id:"SP_RECENT_SMILES",className:"sp_recent-smile-btn",src:`${j}//spac.me/i/mail/restore_grey.png`,title:"\u0420\u0430\u043D\u0435\u0435 \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u043D\u044B\u0435",onclick:()=>{if(l.innerHTML="",Object.keys(s).length>0)for(let[c,o]of Object.entries(s)){let p=r("img",{className:"sp_recent-smile",src:c,onclick:()=>{let f=n('textarea[tabindex="1"]')??n('textarea[name="msg"]');f.value+=o+" "}});p.setAttribute("smile",o),l.append(p)}else{let c=r("div",{innerHTML:`<img src="${j}//spac.me/i/st/compdude11.gif"></br></br>\u0421\u043F\u0438\u0441\u043E\u043A \u0440\u0430\u043D\u0435\u0435 \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u043D\u044B\u0445 \u0441\u043C\u0430\u0439\u043B\u0438\u043A\u043E\u0432 \u043F\u0443\u0441\u0442</br>\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 \u0441\u043C\u0430\u0439\u043B\u0438\u043A\u0438 \u0438\u0437 \u043C\u0435\u043D\u044E \u0441\u043C\u0430\u0439\u043B\u0438\u043A\u043E\u0432, \u0447\u0442\u043E\u0431\u044B \u0434\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0438\u0445 \u0441\u044E\u0434\u0430</br></br>`,style:{color:"#a4b7c4",textAlign:"center"}});l.append(c)}}});t.prepend(d),t.prepend(i),_.recentSmiles.show&&Object.keys(s).length>0&&n("#SP_RECENT_SMILES").click()}}catch(a){u.error("recentSmiles.ts",a)}},re=(e,t)=>{for(let s of e)s.addEventListener("click",()=>{let a=Ke(t,s.src,s.attributes.smile.value,0);localStorage.setItem("sp_recent_smiles",JSON.stringify(a))})},ct=()=>{if(C()==="/settings/"&&!n("#SP_PLUS_SETLINK"))try{const e=n(`a[href^="${h}/settings/notification/"`);if(e){const t=te("sp_plus_settings"),s=te("sp_changelog"),a=te("sp_backup"),l=r("a",{href:`${h}/settings/?sp_plus_settings=1`,id:"SP_PLUS_SETLINK",className:e.className,innerHTML:`
                        <span>\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 Spaces+</span>
                        <span class="ico ico_arr ico_m"></span>
                    `,onclick:()=>{/(\&)sp_plus_settings=1/i.test(document.location.href)||ne({sp_plus_settings:t},`${h}/settings/?sp_plus_settings=1`,"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 Spaces+");let d=n("#SP_PLUS_SETLINK").parentElement?.parentNode?.parentNode?.parentNode;d.id==="main"&&(n("#header_path").innerHTML=n("#header_path").innerHTML.replace("\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438",`
                                <a href="${h}/settings/">\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438</a>
                                <span class="location-bar__sep ico"></span>
                                <span id="SP_PLUS_SETHEAD2">Spaces+</span>
                            `),d.innerHTML=`
                                <div class="widgets-group widgets-group_top js-container__block">
                                    <div class="b-title cl b-title_center b-title_first oh">
                                        <div class="b-title__item" id="SP_PLUS_SETHEAD">\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 Spaces+</div>
                                    </div>
                                    <div class="content">
                                        <div class="list f-c_fll">
                                            <div id="SP_PLUS_SETAREA" class="no-select"></div>
                                        </div>
                                    </div>
                                </div>
                                <div id="SP_PLUS_ABOUT"></div>
                                <a id="SP_PLUS_SETBACK" href="${h}/settings/?" class="link-return full_link">
                                    <span class="ico ico_arrow-back"></span>
                                    <span class="m">\u041D\u0430\u0437\u0430\u0434</span>
                                </a>
                            `);const c=n("#SP_PLUS_SETAREA");if(c){for(let O in _){let F=O;if(ee[F]!==void 0){let oe=R.id===3&&(O==="rscroll"||O==="hrightbar"||O==="weather"),Ie=r("input",{id:O,type:"checkbox",className:"sp-checkbox-square",checked:_[F],onclick:G=>{const x=G.target.checked,Z=G.target,Ue=G.target.id;if(Z.attributes.getNamedItem("unsupported")&&x){L("\u0412\u043D\u0438\u043C\u0430\u043D\u0438\u0435!","\u0414\u043B\u044F \u0440\u0430\u0431\u043E\u0442\u044B \u0434\u0430\u043D\u043D\u043E\u0439 \u0444\u0443\u043D\u043A\u0446\u0438\u0438, \u043D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C\u043E \u043F\u0435\u0440\u0435\u043A\u043B\u044E\u0447\u0438\u0442\u044C\u0441\u044F \u043D\u0430 \u043A\u043E\u043C\u043F\u044C\u044E\u0442\u0435\u0440\u043D\u0443\u044E \u0432\u0435\u0440\u0441\u0438\u044E \u0441\u0430\u0439\u0442\u0430",!0,5);return}switch(v(Ue,x),Ue){case"rscroll":me(x);break;case"hrightbar":xe(x);break;case"friendsOn":Le(x),x?we(Z):n("#SP_PLUS_MAXFRIENDS").remove();break;case"sticker":x?ye(x):n("#SP_PLUS_STICKERS").remove();break;case"stickyheader":ke(x);break;case"oldheader":he(x);break;case"bodystyle":x?Ae(Z):(n("#SP_PLUS_BODYSTYLE").remove(),n("#SP_PLUS_INJSTYLE").remove());break;case"weather":x?Ne(Z):(n("#SP_WIDGET_WEATHER").remove(),n("#SP_WEATHER_SETTINGS").remove());break}}}),At=r("label",{innerHTML:ee[F],htmlFor:O}),Q=r("label",{className:`list-link ${oe?"sp_unsupported":""}`});if(oe&&Ie.setAttribute("unsupported",O),Q.appendChild(Ie),Q.appendChild(At),fe[F]!==void 0){let G=r("a",{href:"#",className:"sp sp-info sp_info-btn",onclick:()=>(L(ee[F],fe[F],!0),!1)});Q.appendChild(G)}c.appendChild(Q),oe&&_[O]&&n("#"+O).click()}}_.friendsOn&&we(n("#friendsOn")),_.bodystyle&&Ae(n("#bodystyle")),_.weather&&Ne(n("#weather"));let o=r("div",{className:"sp_plus_line",innerHTML:'<span class="sp_plus_text">\u0412\u0441\u0442\u0440\u043E\u0435\u043D\u043D\u044B\u0435 \u0432\u043E\u0437\u043C\u043E\u0436\u043D\u043E\u0441\u0442\u0438 \u0441\u0430\u0439\u0442\u0430</span>'}),p=r("div",{className:"sp_plus_line",innerHTML:'<span class="sp_plus_text">\u041F\u0440\u043E\u0447\u0435\u0435</span>'});c.appendChild(o),Lt(c),c.appendChild(p);const f=r("a",{href:`${h}/settings/?sp_plus_settings=1&sp_backup=1`,className:"list-link list-link_arr sp_font_sm",id:"sp_backup",innerHTML:`
                                    <span class="b" style="color: #2e7d32">
                                        <span class="sp sp-backup-g mr-14"></span>\u0418\u043C\u043F\u043E\u0440\u0442 \u0438 \u044D\u043A\u0441\u043F\u043E\u0440\u0442 \u043D\u0430\u0441\u0442\u0440\u043E\u0435\u043A
                                        <span class="ico ico_arr ico_m"></span>
                                    </span>
                                `,onclick:()=>(n("#SP_PLUS_SETHEAD").innerHTML="\u0418\u043C\u043F\u043E\u0440\u0442 \u0438 \u044D\u043A\u0441\u043F\u043E\u0440\u0442 \u043D\u0430\u0441\u0442\u0440\u043E\u0435\u043A",n("#SP_PLUS_SETHEAD2").innerHTML=`
                                        <a href="${h}/settings/?sp_plus_settings=1">Spaces+</a>
                                        <span class="location-bar__sep ico"></span> \u0418\u043C\u043F\u043E\u0440\u0442 \u0438 \u044D\u043A\u0441\u043F\u043E\u0440\u0442 \u043D\u0430\u0441\u0442\u0440\u043E\u0435\u043A
                                    `,n("#SP_PLUS_SETBACK").href=`${h}/settings/?sp_plus_settings=1`,/(\&)sp_backup=1/i.test(document.location.href)||ne({sp_plus_settings:t,sp_backup:a},`${h}/settings/?sp_plus_settings=1&sp_backup=1`,"Spaces+: \u0418\u043C\u043F\u043E\u0440\u0442 \u0438 \u044D\u043A\u0441\u043F\u043E\u0440\u0442 \u043D\u0430\u0441\u0442\u0440\u043E\u0435\u043A"),Tt("#SP_PLUS_SETAREA"),!1)});c.appendChild(f);const k=r("a",{href:`${h}/settings/?sp_plus_settings=1&sp_changelog=1`,className:"list-link list-link_arr sp_font_sm",id:"sp_changelog",innerHTML:`
                                    <span class="b" style="color: #2196f3">
                                        <span class="sp sp-restore-blue mr-14"></span>\u0418\u0441\u0442\u043E\u0440\u0438\u044F \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0439
                                        <span class="ico ico_arr ico_m"></span>
                                    </span>
                                `,onclick:()=>(n("#SP_PLUS_SETHEAD").innerHTML="\u0418\u0441\u0442\u043E\u0440\u0438\u044F \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0439",n("#SP_PLUS_SETHEAD2").innerHTML=`
                                        <a href="${h}/settings/?sp_plus_settings=1">Spaces+</a>
                                        <span class="location-bar__sep ico"></span> \u0418\u0441\u0442\u043E\u0440\u0438\u044F \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0439
                                    `,n("#SP_PLUS_SETBACK").href=`${h}/settings/?sp_plus_settings=1`,/(\&)sp_changelog=1/i.test(document.location.href)||ne({sp_plus_settings:t,sp_changelog:s},`${h}/settings/?sp_plus_settings=1&sp_changelog=1`,"Spaces+: \u0418\u0441\u0442\u043E\u0440\u0438\u044F \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0439"),kt("#SP_PLUS_SETAREA"),!1)});c.appendChild(k);const b=r("a",{href:"#",className:"list-link list-link_arr sp_font_sm",id:"sp_plus_reset",innerHTML:`
                                    <span class="b" style="color: #f86934">
                                        <span class="sp sp-alert mr-14"></span>\u0421\u0431\u0440\u043E\u0441 \u043D\u0430\u0441\u0442\u0440\u043E\u0435\u043A
                                        <span class="ico ico_arr ico_m"></span>
                                    </span>
                                `,onclick:()=>(M("\u0412\u044B \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043B\u044C\u043D\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u043F\u043E\u043B\u043D\u043E\u0441\u0442\u044C\u044E \u0441\u0431\u0440\u043E\u0441\u0438\u0442\u044C \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438?",!0,()=>{I("SP_PLUS_SET"),I("SP_WEATHER"),I("gp_left_btn"),I("force_ajax_transport"),I("sandbox"),document.location.reload()}),!1)});c.appendChild(b);let g=0,m=r("div",{className:"widgets-group widgets-group_top nl wbg no-select"}),S=r("div",{innerHTML:"v"+X,style:{float:"right"}}),$=r("div",{className:"content-item3"}),Re=r("div",{innerHTML:"\u2764\uFE0F",className:"heart",onclick:()=>{++g>=10&&(document.location.href="https://t.me/spaces_dev")}}),q=r("div",{className:"grey",innerHTML:'Developed by <a href="https://crashmax.ru" target="_blank">crashmax</a> with love '});m.appendChild($),q.appendChild(Re),$.appendChild(q),q.appendChild(S),n("#SP_PLUS_ABOUT").appendChild(m)}return!1}});e.before(l);let i=document.createEvent("MouseEvent");t&&(document.title="\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 Spaces+",i.initEvent("click",!0,!0),l.dispatchEvent(i)),a&&(document.title="Spaces+: \u0418\u043C\u043F\u043E\u0440\u0442 \u0438 \u044D\u043A\u0441\u043F\u043E\u0440\u0442 \u043D\u0430\u0441\u0442\u0440\u043E\u0435\u043A",i.initEvent("click",!0,!0),n("#sp_backup")?.dispatchEvent(i)),s&&(document.title="Spaces+: \u0418\u0441\u0442\u043E\u0440\u0438\u044F \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0439",i.initEvent("click",!0,!0),n("#sp_changelog")?.dispatchEvent(i))}}catch(e){u.error("settingsMenu.ts",e)}},ke=e=>{try{let t=n("#wrap_all"),s=n("#rightbar"),a=n("#header_elements"),l=n("#main_shadow"),i=n("#top_info_block"),d=n("div.sidebar-logo");e&&!a.hasAttribute("sp-sticky-header")?(new ResizeObserver(o=>{window.requestAnimationFrame(()=>{!Array.isArray(o)||!o.length||(K(l,{paddingTop:"45px"}),K(i,{position:"fixed",width:`${l.clientWidth}px`,zIndex:9999}),K(d,{position:"fixed",width:`${s.clientWidth+1}px`,left:`${t.offsetLeft}px`,top:"0px",boxShadow:"0px 2px 2px rgba(93,109,157,0.2)",zIndex:9999}),K(a,{position:"fixed",width:`${l.clientWidth-s.clientWidth+1}px`,left:`${t.offsetLeft+s.clientWidth}px`,top:"0px",boxShadow:"0px 2px 2px rgba(93,109,157,0.2)",zIndex:9999}))})}).observe(document.body),a.setAttribute("sp-sticky-header","1")):a.hasAttribute("sp-sticky-header")&&(a.removeAttribute("style"),i.removeAttribute("style"),l.removeAttribute("style"),d.removeAttribute("style"),a.removeAttribute("sp-sticky-header"))}catch(t){u.error("stickyHeader.ts",t)}},pt=()=>{try{let e=E("td.table__cell_last"),t=n(`a[href^="${h}/blacklist/"`),s=n(`a[href^="${h}/info/rules/"`),a=n("div.ico_noaccess_xlarge"),l=n("#SP_PLUS_INBL");if(C(1)==="mysite"&&e){let i=C(3);if(t&&!l){let d=r("td",{className:"table__cell",id:"SP_PLUS_INBL",innerHTML:`
                        <a href="#" class="stnd-link" title="\u041F\u043E\u043A\u0430\u0437\u0430\u0442\u044C \u043F\u0440\u043E\u0444\u0438\u043B\u044C">
                        <span class="sp sp-eye-grey"></span> \u041F\u043E\u043A\u0430\u0437\u0430\u0442\u044C</a>
                    `,onclick:()=>(d.after(r("td",{className:"table__cell",id:"SP_PLUS_INBL",width:"25%",innerHTML:`
                                <a href="#" class="stnd-link stnd-link_disabled" title="\u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430">
                                <span class="ico bp ico_spinner"></span> \u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430</a>
                            `,onclick:()=>!1})),d.remove(),dt(i),!1)});e[1].parentElement?.insertBefore(d,e[1]);let c=e[1]?.parentElement?.childNodes;for(let o in c)c[o].nodeName==="TD"&&(c[o].width="25%");y.NICKNAME===i&&n("#SP_PLUS_INBL").click()}if((s||a)&&!t&&!n("#SP_LIST_LINK")){let d=n("div.user__tools");d&&(d.style.borderTop="none"),_t(de(n("#location_bar_1_0").textContent),t,s)}}else n("#SP_LIST_LINK")?.remove()}catch(e){u.error("bypassProfile.ts",e)}},dt=async e=>{if((y.NICKNAME!==e||y.CONTENT===void 0)&&(y.NICKNAME=e,await T("GET",`https://crashmax.ru/api/proxy?url=${h}/ajax/mysite/index/${e}/`,!1).then(t=>{t.parsedBody?.status.http_code===200?y.CONTENT=t.parsedBody.contents.content.replace(/spac1\.net|spaces-blogs\.com/gi,a=>B):L("\u041F\u0440\u043E\u0441\u043C\u043E\u0442\u0440 \u043F\u0440\u043E\u0444\u0438\u043B\u0435\u0439","\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u043F\u0440\u043E\u0444\u0438\u043B\u044F! \u041E\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044C \u043A \u0440\u0430\u0437\u0440\u0430\u0431\u043E\u0442\u0447\u0438\u043A\u0443",!0),u.info("\u041F\u0440\u043E\u0441\u043C\u043E\u0442\u0440 \u043F\u0440\u043E\u0444\u0438\u043B\u0435\u0439",t)})),y.CONTENT!==null){n("#main_content").innerHTML=y.CONTENT;let t=n('img[data-s*="101.100.0"');t&&(t.src=t.dataset.s),n("div.user__tools").remove(),n('span[class$="ico_gifts"')?.parentElement?.parentElement?.remove(),n(`a[href^="${h}/activity"`)?.parentElement?.remove(),n("div.btn-single__wrap")?.remove()}},_t=(e,t,s)=>{let a=[{ico:"forum",text:"\u0422\u0435\u043C\u044B \u0438 \u043A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0438",path:`/forums/search_user/?query=${e}`},{ico:"comm",text:"\u0421\u043E\u043E\u0431\u0449\u0435\u0441\u0442\u0432\u0430",path:`/comm/list/user/${e}`},{ico:"friends",text:"\u0414\u0440\u0443\u0437\u044C\u044F",path:`/friends/?name=${e}`},{ico:"readers",text:"\u0427\u0438\u0442\u0430\u0442\u0435\u043B\u0438",path:`/lenta/readers/?user=${e}`},{ico:"gifts",text:"\u041F\u043E\u0434\u0430\u0440\u043A\u0438",path:`/gifts/user_list/${e}`}],l=[{ico:"blog",text:"\u041B\u0438\u0447\u043D\u044B\u0439 \u0431\u043B\u043E\u0433",path:`/diary/view/user/${e}/list/-/`},{ico:"photo",text:"\u0424\u043E\u0442\u043E\u0433\u0440\u0430\u0444\u0438\u0438",path:`/pictures/user/${e}/list/-/`},{ico:"music",text:"\u041C\u0443\u0437\u044B\u043A\u0430",path:`/music/user/${e}/list/-/`},{ico:"video",text:"\u0412\u0438\u0434\u0435\u043E",path:`/video/user/${e}/list/-/`},{ico:"file",text:"\u0424\u0430\u0439\u043B\u044B",path:`/files/user/${e}/list/-/`}];t===null&&s===null&&(a=l.concat(a));let i=r("div",{id:"SP_LIST_LINK",className:"widgets-group links-group"});n("div.js-pending-item").append(i);for(let d of a){const{ico:c,text:o,path:p}=d;let f=r("a",{href:h+p,className:"list-link stnd-link_arr list-link-darkblue c-darkblue",innerHTML:`
                <span class="js-ico ico ico_${c}"></span>
                <span class="t js-text">${o}</span>
                <span class="ico ico_arr"></span>
            `});i.append(f)}},ut=()=>{try{let e=n("#SP_PLUS_BUTTONS_R"),t=E(`a[href^="${h}/lenta/reader_delete/"`);if(C()==="/lenta/readers/"&&t&&!e){let s=[];for(let a of t){let l=r("label",{className:"list-link icon-link sp-ch-readers"}),i=ae(a.href).user,d=r("input",{type:"checkbox",className:"sp-cbfr sp-checkbox-square",id:i}),c=r("label",{htmlFor:i});l.appendChild(d),l.appendChild(c),a.after(l),s.push(d)}if(n(".sp-ch-readers")){let a=r("div",{className:"user__tools_last",id:"SP_PLUS_BUTTONS_R"});const l=r("button",{className:"user__tools-link table__cell sp_btn-list",innerHTML:`
                        <span class="sp sp-ok-blue"></span>
                        <span class="sp-ch-text">\u0412\u044B\u0431\u0440\u0430\u0442\u044C \u0432\u0441\u0435</span>
                    `,style:{borderRight:"unset"},onclick:o=>{if(o.target instanceof Element){let p=o.target.nodeName==="SPAN"?o.target.parentNode:o.target;for(let f of s)f.checked=p.innerHTML.indexOf("\u0412\u044B\u0431\u0440\u0430\u0442\u044C \u0432\u0441\u0435")!==-1;p.innerHTML=`
                                <span class="sp sp-ok-blue"></span>
                                <span class="sp-ch-text">
                                    ${p.innerHTML.indexOf("\u0412\u044B\u0431\u0440\u0430\u0442\u044C \u0432\u0441\u0435")!==-1?"\u0421\u043D\u044F\u0442\u044C \u043E\u0442\u043C\u0435\u0442\u043A\u0438":"\u0412\u044B\u0431\u0440\u0430\u0442\u044C \u0432\u0441\u0435"}
                                </span>
                            `}}}),i=r("button",{className:"user__tools-link table__cell sp_btn_line sp_btn-list",innerHTML:`
                        <span class="sp sp-remove-red"></span>
                        <span class="sp-del-text">\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u044B\u0445</span>
                    `,onclick:()=>{let o=[];for(let f of s)f.checked&&o.push(f.id);let p=o.length;p>0?M(`\u0412\u044B \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043B\u044C\u043D\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043B\u0438\u0442\u044C ${p} ${ve(p)}?`,!0,async()=>{let f=p;for(let k of o)L(`\u041E\u0441\u0442\u0430\u043B\u043E\u0441\u044C \u0443\u0434\u0430\u043B\u0438\u0442\u044C ${p--} \u0438\u0437 ${f} ${ve(p)}`,'\u041F\u043E\u0434\u043E\u0436\u0434\u0438\u0442\u0435 \u043D\u0435\u043C\u043D\u043E\u0433\u043E... <span style="padding-right: 10px" class="ico ico_spinner"></span>',!1),await T("POST",`${h}/lenta/reader_delete/?user=${k}`,!1,`&CK=${y.CK}&cfms=\u0423\u0434\u0430\u043B\u0438\u0442\u044C`).then(b=>{u.info("\u0423\u0434\u0430\u043B\u0438\u043B\u0438 \u0447\u0438\u0442\u0430\u0442\u0435\u043B\u044F",b)});document.location.reload()}):L("\u0412\u043D\u0438\u043C\u0430\u043D\u0438\u0435!","\u041E\u0442\u043C\u0435\u0442\u044C\u0442\u0435 \u0433\u0430\u043B\u043E\u0447\u043A\u043E\u0439, \u0442\u0435x \u0447\u0438\u0442\u0430\u0442\u0435\u043B\u0435\u0439, \u043A\u043E\u0442\u043E\u0440\u044B\u0445 \u0432\u044B \u0445\u043E\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u0438 \u043F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",!0,5)}});a.appendChild(i),a.appendChild(l);let d=n("div.pgn-wrapper"),c=n("#main");d?d.prepend(a):c&&(a.classList.add("widgets-group"),c.prepend(a))}}}catch(e){u.error("deleteReaders.ts",e)}},ve=e=>"\u0447\u0438\u0442\u0430\u0442\u0435\u043B"+se(e,["\u044F","\u044F","\u0435\u0439"]),Le=e=>{try{let t=n("#friends_cnt"),s=n("#SP_PLUS_FRIENDS_B"),a=0;if(t&&(a=Number(t.textContent)),e&&a>0){let l=t?.parentNode?.parentNode?.parentNode;s=s||r("div",{id:"SP_PLUS_FRIENDS_B",className:"list-link__wrap"}),T("GET",`${h}/friends/?S=3`,!0).then(i=>{const d=i.parsedBody?.tabbed_panel.tabs[1].content.list;if(d){let c=!!n("span.s_i_exit"),o=d,p=_.friendsSet.max>o.length?o.length:_.friendsSet.max;for(let f=0;f<p;f++)s.appendChild(r("a",{href:`${h}/mysite/index/${o[f].name}`,className:"li",innerHTML:(c?`<span class="comm_ava m for_avatar"><img src="${o[f].avatar.previewURL}" class="preview s21_20"></span>`:"")+`<span class="online-status m"><img class="p14 online_status_ico" src="${j}//spac.me/i/${o[f].online_status.on_img}" alt="(ON)"></span><span class="block-item__title m break-word">${o[f].name}</span>`}));u.info("\u041F\u0430\u043D\u0435\u043B\u044C \u0434\u0440\u0443\u0437\u0435\u0439 \u043E\u043D\u043B\u0430\u0439\u043D",i)}}),l?.appendChild(s)}else s?.remove()}catch(t){u.error("friendsOnline.ts",t)}},ft=()=>{let e=n("#gallery-container"),t=n("#SP_IMAGE_ROTATE"),s=n(".player-dummy_wrap");try{if(e&&!t&&!s){let a=r("a",{className:"gallery__tools_button",id:"SP_IMAGE_ROTATE",title:"\u041F\u043E\u0432\u0435\u0440\u043D\u0443\u0442\u044C",innerHTML:'<span class="ico_gallery ico_gallery_reload m"></span>',onclick:()=>(v("angle",(_.angle+90)%360),e.className="accel-3d rotate"+_.angle,!1)});n("#g_dloadlink").after(a)}}catch(a){u.error("galleryRotate.ts",a)}},ht=()=>{E(`li.li>a[href^="${h}/services/"]`).forEach(e=>{let t=n("span.s_i_exit")?'<span class="sp sp-ico"></span>':"",s=r("li",{className:"li",innerHTML:`
                <a href="${h}/settings/?sp_plus_settings=1" title="\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 Spaces+">
                ${t}
                <span class="m s_i_text"> Spaces+</span></a>
            `});e.parentElement?.after(s)})},Ne=async e=>{_.hrightbar&&n("#hrightbar").click(),_.weatherSet.city??Te();let t=r("div",{id:"SP_WEATHER_SETTINGS",className:"sp_settings-wrap"}),s=r("label",{innerHTML:'API-\u041A\u043B\u044E\u0447:<div class="label__desc"><a href="https://openweathermap.org/appid" target="_blank">\u041F\u043E\u043B\u0443\u0447\u0438\u0442\u044C \u043A\u043B\u044E\u0447</a></div>',className:"label"}),a=r("input",{type:"text",className:"text-input",size:32,value:_.weatherSet.key,style:{marginBottom:"7px"},onkeypress:o=>{const p=o.target.value;o.keyCode===13&&(/^[a-f0-9]{32}$/i.test(p)?(v("weatherSet.key",p),z(),a.classList.remove("sp-input-error")):a.classList.add("sp-input-error"))}}),l=r("label",{innerHTML:"\u0413\u043E\u0440\u043E\u0434:",className:"label"}),i=r("input",{type:"text",className:"text-input",size:32,id:"SP-CITY-INPUT",value:_.weatherSet.city??"\u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430...",style:{marginBottom:"7px"},onkeypress:o=>{const p=o.target.value;o.keyCode===13&&(/^([a-zA-Zа-яА-ЯёЁ]+[-]?[a-zA-Zа-яА-ЯёЁ]*[-]?[a-zA-Zа-яА-ЯёЁ]*[-]?[a-zA-Zа-яА-ЯёЁ]*)$/i.test(p)?(v("weatherSet.city",p),z(),i.classList.remove("sp-input-error")):i.classList.add("sp-input-error"))}}),d=r("label",{innerHTML:'\u0418\u043D\u0442\u0435\u0440\u0432\u0430\u043B \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u044F:<div class="label__desc">\u043E\u0442 1 \u0434\u043E 360 \u043C\u0438\u043D\u0443\u0442</a></div>',className:"label"}),c=r("input",{type:"text",className:"text-input",size:4,maxLength:3,value:_.weatherSet.interval/60,style:{marginBottom:"7px"},oninput:o=>{const p=o.target.value;/^([1-9]|[1-8][0-9]|9[0-9]|[12][0-9]{2}|3[0-5][0-9]|360)$/i.test(p)?(v("weatherSet.interval",Number(p)*60),c.classList.remove("sp-input-error")):c.classList.add("sp-input-error")}});t.appendChild(l),t.appendChild(i),t.appendChild(s),t.appendChild(a),t.appendChild(d),t.appendChild(c),e.parentElement?.after(t)},z=async()=>{const{language:e,units:t,city:s,key:a}=_.weatherSet;try{let l=`https://api.openweathermap.org/data/2.5/weather?lang=${e}&units=${t}&q=${s}&appid=${a}`;await T("GET",l,!1).then(i=>{const d=i.parsedBody;if(i.status===404){L("\u0412\u0438\u0434\u0436\u0435\u0442 \u043F\u043E\u0433\u043E\u0434\u044B",`\u0413\u043E\u0440\u043E\u0434 <b>${s}</b> \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D`,!0,5);return}if(d?.message){L("\u0412\u0438\u0434\u0436\u0435\u0442 \u043F\u043E\u0433\u043E\u0434\u044B",d.message,!0,5);return}n("#SP-CITY-INPUT")&&(n("#SP-CITY-INPUT").value=d.name),n("#SP_WIDGET_WEATHER")?.remove(),d?.cod===200&&(v("weatherSet.city",d.name),w("SP_WEATHER",JSON.stringify(d)))})}catch(l){u.error("openweathermap",l)}},Te=async()=>{try{await T("GET","https://ipwhois.app/json/?objects=city,success&lang=ru",!1).then(e=>{const t=e.parsedBody;t?.success?(v("weatherSet.city",t.city),z()):L("\u041E\u0448\u0438\u0431\u043A\u0430 ipWhois","\u041E\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044C \u043A \u0440\u0430\u0437\u0440\u0430\u0431\u043E\u0442\u0447\u0438\u043A\u0443!",!0)})}catch(e){u.error("ipWhois",e)}},mt=()=>{Ee()-_.weatherSet.time>_.weatherSet.interval&&_.weatherSet.city!==null&&(_.weatherSet.time=Ee(),z()),!n("#SP_WIDGET_WEATHER")&&_.weatherSet.city!==null&&bt()},bt=()=>{let e=n("#rightbar");if(e&&Pe()){let{id:t,name:s,main:a,wind:l,weather:i,clouds:d}=Pe(),c=r("div",{className:"widgets-group_top js-container__block",id:"SP_WIDGET_WEATHER",style:{boxShadow:"0px 3px 5px rgba(93,109,157,0.3)"}}),o=r("div",{className:"b-title cl b-title_first oh",innerHTML:`
                <a href="https://openweathermap.org/city/${t}" target="_blank" class="b-title__link" style="white-space: unset">
                    <h6 class="span">\u041F\u043E\u0433\u043E\u0434\u0430 \u0432 \u0433. ${s}</h6>
                </a>
            `}),p=r("div",{className:"content",style:{padding:"0px 16px 16px 16px"},innerHTML:`
                <img src="https://openweathermap.org/img/wn/${i[0].icon}@2x.png" class="sp_img-center">
                <div class="grey sp_weather-container">
                    <p>${Math.round(a.temp)}\xB0C</p>
                    <p>${We(i[0].description)}</p>
                </div>
                <table class="grey sp_weather-table">
                    <tbody>
                        <tr>
                            <td>\u041E\u0431\u043B\u0430\u0447\u043D\u043E\u0441\u0442\u044C: </td>
                            <td>${d.all}%</td>
                        </tr>
                        <tr>
                            <td>\u0412\u043B\u0430\u0436\u043D\u043E\u0441\u0442\u044C: </td>
                            <td>${a.humidity}%</td>
                        </tr>
                        <tr>
                            <td>\u0414\u0430\u0432\u043B\u0435\u043D\u0438\u0435: </td>
                            <td>${Math.round(a.pressure*.75)}mmHg</td>
                        </tr>
                        <tr>
                            <td>\u0412\u0435\u0442\u0435\u0440: </td>
                            <td>${l.speed}m/sec</td>
                        </tr>
                    </tbody>
                </table>
            `});c.appendChild(o),c.appendChild(p),e.appendChild(c)}},Ee=()=>Math.round(new Date().getTime()/1e3),Pe=()=>{const e=D("SP_WEATHER");if(e!==void 0)return JSON.parse(e);Te()},gt=()=>{try{let e=n("h2.span"),t=E("span.comment_date"),s=n(`a[href^="${h}/comment/delete/"`),a=n(`a[href^="${h}/forums/moder/ban/"`),l=e?.textContent==="\u041A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0438",i=s?.textContent==="\u0423\u0434\u0430\u043B\u0438\u0442\u044C",d=a?.textContent==="\u0411\u0430\u043D";if(t&&l&&(i||d)){for(let c of t)if(!c.getElementsByTagName("input").length){let o=R.id===4?c.parentElement?.parentElement?.parentElement?.parentElement?.parentElement?.id:c.parentElement?.parentElement?.parentElement?.parentElement?.parentElement?.parentElement?.parentElement?.id;if(parseInt(o)){let p=r("input",{type:"checkbox",className:"sp-cbfc sp-checkbox-square",id:`DC_${o}`});c.appendChild(p),c.appendChild(r("label",{htmlFor:`DC_${o}`}))}}if(!n("#SP_PLUS_BUTTONS")){let c=r("div",{className:"widgets-group user__tools_last",id:"SP_PLUS_BUTTONS"});const o=r("button",{className:"user__tools-link table__cell sp_btn-list",innerHTML:`
                        <span class="sp sp-ok-blue"></span>
                        <span class="sp-ch-text">\u0412\u044B\u0431\u0440\u0430\u0442\u044C \u0432\u0441\u0435</span>
                    `,onclick:f=>{if(f.target instanceof Element){let k=E('input[id^="DC_"]'),b=f.target.nodeName==="SPAN"?f.target.parentNode:f.target;for(let g of k)g.checked=b.innerHTML.indexOf("\u0412\u044B\u0431\u0440\u0430\u0442\u044C \u0432\u0441\u0435")!==-1;b.innerHTML=`
                                <span class="sp sp-ok-blue"></span>
                                    <span class="sp-ch-text">
                                    ${b.innerHTML.indexOf("\u0412\u044B\u0431\u0440\u0430\u0442\u044C \u0432\u0441\u0435")!==-1?"\u0421\u043D\u044F\u0442\u044C \u043E\u0442\u043C\u0435\u0442\u043A\u0438":"\u0412\u044B\u0431\u0440\u0430\u0442\u044C \u0432\u0441\u0435"}
                                </span>
                            `}}}),p=r("button",{className:"user__tools-link table__cell sp_btn_line sp_btn-list",innerHTML:`
                        <span class="sp sp-remove-red"></span>
                        <span class="sp-del-text">\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u044B\u0435</span>
                    `,onclick:()=>{let f=E('input[id^="DC_"]'),k=[];for(let g of f)g.checked&&Array.prototype.slice.call((R.id===4?g?.parentNode?.parentNode?.parentNode?.parentNode?.parentNode:g?.parentNode?.parentNode?.parentNode?.parentNode?.parentNode?.parentNode?.parentNode)?.querySelectorAll(`a[href^="${h}/comment/delete/"]`)).filter(m=>{m.textContent==="\u0423\u0434\u0430\u043B\u0438\u0442\u044C"&&k.push(m.href)});let b=k.length;return b>0?M(`\u0412\u044B \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043B\u044C\u043D\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043B\u0438\u0442\u044C ${b} ${Ce(b)}?`,!0,async()=>{let g=b;for(let m of k)L(`\u041E\u0441\u0442\u0430\u043B\u043E\u0441\u044C \u0443\u0434\u0430\u043B\u0438\u0442\u044C ${b--} \u0438\u0437 ${g} ${Ce(b)}`,'\u041F\u043E\u0434\u043E\u0436\u0434\u0438\u0442\u0435 \u043D\u0435\u043C\u043D\u043E\u0433\u043E... <span style="padding-right: 10px" class="ico ico_spinner"></span>',!1),await T("GET",m,!0).then(S=>{u.info("\u0423\u0434\u0430\u043B\u0438\u043B \u043A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0439",S)});document.location.reload()}):L("\u0412\u043D\u0438\u043C\u0430\u043D\u0438\u0435!","\u041E\u0442\u043C\u0435\u0442\u044C\u0442\u0435 \u0433\u0430\u043B\u043E\u0447\u043A\u043E\u0439, \u0442\u0435 \u043A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0438, \u043A\u043E\u0442\u043E\u0440\u044B\u0435 \u0432\u044B \u0445\u043E\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u0438 \u043F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",!0,5),!1}});c.appendChild(p),c.appendChild(o),n("div.js-comments-pgn").after(c)}}}catch(e){u.error("deleteComments.ts",e)}},Ce=e=>"\u043A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438"+se(e,["\u0439","\u044F","\u0435\u0432"]),xe=e=>{let t=n("#rightbar");e&&_.weather&&n("#weather").click();try{e&&!t.hasAttribute("sp-hidden-rightbar")?(t.style.display="none",t.setAttribute("sp-hidden-rightbar","1")):t?.hasAttribute("sp-hidden-rightbar")&&(t.style.display="block",t.removeAttribute("sp-hidden-rightbar"))}catch(s){u.error("hidderRightbar.ts",s)}},St=()=>{try{let e=0,t=sessionStorage.getItem("music:track"),s=sessionStorage.getItem("music:playlist"),a=n("#SP_MUSIC_DOWN");if(n("#gp_main_player")&&t&&s){let i=JSON.parse(t),d=JSON.parse(s);e=parseInt(i.id,10);let c=d.playlist.playlist[e].src,o=n("a.js-music_repeat");if(o&&!a){y.PLAYER=e;let p=r("td",{id:"SP_MUSIC_DOWN",className:"ico_td",innerHTML:'<span style="margin: 0px 6px 0px 0px !important" class="sp sp-download-darkblue" title="\u0421\u043A\u0430\u0447\u0430\u0442\u044C"></span>',onclick:()=>location.href=c});o.parentElement?.after(p)}else a&&y.PLAYER!==e&&(y.PLAYER=e,a.onclick=()=>location.href=c,u.info("\u041E\u0431\u043D\u043E\u0432\u0438\u043B\u0438 \u0441\u0441\u044B\u043B\u043A\u0443 \u043D\u0430 \u0442\u0440\u0435\u043A",i))}}catch(e){u.error("playerDownload.ts",e)}},yt=()=>{E(`a[href^="${h}/redirect/"`).forEach(e=>{e.href=ae(e.href).redirect})},kt=e=>{window.scrollTo(0,0);const t=n(e);if(t)try{t.innerHTML="";let s=r("div",{className:"wbg error__item_wrapper sp_plus_c_wrap"}),a=r("div",{className:"pad_t_a"}),l=r("div",{className:"js-input_error_wrap"}),i=r("div",{className:"t_center",id:"SP_JSON_PRELOADER",innerHTML:`<img src="${j}//spac.me/i/preloader.gif">`});l.appendChild(a),s.appendChild(l),t.appendChild(s),s.appendChild(i),ge(d=>{for(let c of d.history){let o=r("label",{className:"label sp_plus_line_c",innerHTML:`v${ue(c.build)}<div class="label__desc">${c.date}</div>`}),p=r("div",{className:"grey sp_plus_c_desc",innerHTML:c.changes});a.appendChild(o),a.appendChild(p)}n("#SP_JSON_PRELOADER").remove()})}catch(s){u.error("settingsLogMenu.ts",s)}},we=e=>{try{let t=r("div",{id:"SP_PLUS_MAXFRIENDS"}),s=r("div",{className:"sp_settings-wrap"}),a=r("input",{type:"text",className:"text-input",size:4,maxLength:2,value:_.friendsSet.max,oninput:i=>{const d=i.target.value;/^([1-9]|1[0-5])$/i.test(d)?(v("friendsSet.max",d),a.classList.remove("sp-input-error")):a.classList.add("sp-input-error")}}),l=r("label",{innerHTML:'\u0412\u044B\u0432\u043E\u0434\u0438\u0442\u044C \u0434\u0440\u0443\u0437\u0435\u0439:<div class="label__desc">\u043E\u0442 1 \u0434\u043E 15</div>',className:"label"});s.appendChild(l),s.appendChild(a),t.appendChild(s),e.parentElement?.after(t)}catch(t){u.error("settingsFriends.ts",t)}},vt=(e,t)=>{try{T("GET",`${h}/mysite/`,!0).then(s=>{s.parsedBody?.owner_widget.newbee_quest_widget&&e.appendChild(t),u.info("\u041A\u0432\u0435\u0441\u0442 \u043D\u043E\u0432\u0438\u0447\u043A\u0430",s)})}catch(s){u.error("newbeeQuest.ts",s)}},Lt=e=>{let t=r("div",{id:"wrap_spaces_option"}),s=r("a",{href:"#",className:"list-link list-link_arr sp_font_sm",innerHTML:W(_.apidebug?'<span class="sp sp-remove-grey mr-14"></span>\u041E\u0442\u043A\u043B\u044E\u0447\u0438\u0442\u044C \u043E\u0442\u043B\u0430\u0434\u0447\u0438\u043A':'<span class="sp sp-settings mr-14"></span>\u0412\u043A\u043B\u044E\u0447\u0438\u0442\u044C \u043E\u0442\u043B\u0430\u0434\u0447\u0438\u043A'),onclick:()=>(v("apidebug",!_.apidebug),document.location.reload(),!1)});const a=D("sandbox");let l=r("a",{href:"#",className:"list-link list-link_arr sp_font_sm",id:"sp_spacesAction_beta",innerHTML:W(a?'<span class="sp sp-exit-grey mr-14"></span>\u0412\u044B\u0439\u0442\u0438 \u0438\u0437 \u043F\u0435\u0441\u043E\u0447\u043D\u0438\u0446\u044B':'<span class="sp sp-enter-grey mr-14"></span>\u0412\u043E\u0439\u0442\u0438 \u0432 \u043F\u0435\u0441\u043E\u0447\u043D\u0438\u0446\u0443'),onclick:()=>(a?I("sandbox"):w("sandbox","beta"),document.location.reload(),!1)});const i=D("force_ajax_transport");let d=r("a",{href:"#",className:"list-link list-link_arr sp_font_sm",id:"sp_spacesFAT",innerHTML:W(i?'<span class="sp sp-remove-grey mr-14"></span>\u0423\u0431\u0440\u0430\u0442\u044C \u043F\u043E\u043B\u043E\u0441\u0443 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438':'<span class="sp sp-ok-grey mr-14"></span>\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043F\u043E\u043B\u043E\u0441\u0443 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u044B'),onclick:()=>(i?I("force_ajax_transport"):w("force_ajax_transport","1"),document.location.reload(),!1)});const c=D("gp_left_btn");let o=r("a",{href:"#",className:"list-link list-link_arr sp_last_btn",id:"sp_spacesGLB",innerHTML:W(c?'<span class="sp sp-remove-grey mr-14"></span>\u0423\u0431\u0440\u0430\u0442\u044C \u043F\u043B\u0435\u0435\u0440 \u0438\u0437 \u043B\u0435\u0432\u043E\u0439 \u043F\u0430\u043D\u0435\u043B\u0438':'<span class="sp sp-ok-grey mr-14"></span>\u0417\u0430\u043A\u0440\u0435\u043F\u0438\u0442\u044C \u043F\u043B\u0435\u0435\u0440 \u043D\u0430 \u043B\u0435\u0432\u043E\u0439 \u043F\u0430\u043D\u0435\u043B\u0438'),onclick:()=>(c?I("gp_left_btn"):w("gp_left_btn","1"),document.location.reload(),!1)}),p=r("a",{href:"#",id:"sp_newbequest_togl",className:"list-link list-link_arr sp_line sp_last_btn sp_newbq_l",innerHTML:W('<span class="sp sp-remove-grey mr-14"></span>\u0421\u043A\u0440\u044B\u0442\u044C \u043A\u0432\u0435\u0441\u0442 \u043D\u043E\u0432\u0438\u0447\u043A\u0430'),onclick:()=>(M("\u0412\u044B \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043B\u044C\u043D\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0441\u043A\u0440\u044B\u0442\u044C \u043A\u0432\u0435\u0441\u0442 \u043D\u043E\u0432\u0438\u0447\u043A\u0430?",!0,()=>{T("GET",`${h}/newbequest/?CK=${y.CK}`,!0).then(f=>{f.status===200&&L("\u041F\u043E\u0437\u0434\u0440\u0430\u0432\u043B\u044F\u0435\u043C!","\u041A\u0432\u0435\u0441\u0442 \u043D\u043E\u0432\u0438\u0447\u043A\u0430 \u0431\u044B\u043B \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043A\u0440\u044B\u0442",!0,5)})}),!1)});t.appendChild(s),t.appendChild(l),t.appendChild(d),t.appendChild(o),vt(t,p),e.appendChild(t)},W=e=>`<span class="b">${e}<span class="ico ico_arr ico_m"></span></span>`,Nt=()=>{let e=n("span.jwcontrols"),t=n("#SP_PLAYBACK_VIDEO");try{if(t&&(n("video").playbackRate=_.videoSpeed),e&&!t){let s=n('span[class*="jwtext jwduration jwhidden"]'),a=r("span",{className:"jwtext jwduration jwhidden",id:"SP_PLAYBACK_VIDEO",innerHTML:"x"+_.videoSpeed,onclick:()=>{let l=(_.videoSpeed+.25)%2.25;return l===0&&(l=.5),v("videoSpeed",l),a.innerHTML="x"+l,!1}});s.after(a)}}catch(s){u.error("videoSpeedPlayback.ts",s)}},Ae=e=>{try{let t=r("div",{className:"text-input__wrap"}),s=r("div",{id:"SP_PLUS_BODYSTYLE"}),a=r("label",{className:"list-link",style:{borderBottom:"none"}}),l=r("label",{className:"list-link",style:{borderBottom:"none"}}),i=r("div",{className:"bstrwrap",style:{borderBottom:"none",padding:"15px"}}),d=r("label",{innerHTML:'\u0421\u0441\u044B\u043B\u043A\u0430 \u043D\u0430 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435:<div class="label__desc">.jpg \u0438\u043B\u0438 .png</div>',className:"label",style:{marginRight:"-17px"}}),c=r("label",{innerHTML:'\u0426\u0432\u0435\u0442 \u0444\u043E\u043D\u0430:<div class="label__desc">#RRGGBB</div>',className:"label",style:{marginRight:"-17px"}}),o=r("input",{type:"text",id:"image-input",className:"text-input",value:_.bodystyleSet.url,style:{marginBottom:"7px"},oninput:m=>{const S=m.target.value;Ge(S)&&/\.(jpg|jpeg|png|gif)$/i.test(S)?(v("bodystyleSet.url",S),A(),o.classList.remove("sp-input-error")):o.classList.add("sp-input-error")}}),p=r("input",{type:"text",className:"text-input",id:"color-input",value:_.bodystyleSet.color,oninput:m=>{const S=m.target.value;/^\#([A-Za-z0-9]{3,6})$/i.test(S)?(v("bodystyleSet.color",S),A(),p.classList.remove("sp-input-error")):p.classList.add("sp-input-error")}}),f=r("input",{type:"radio",id:"sp_set_bodystyle_URL",checked:_.bodystyleSet.urlchecked,className:"sp-checkbox-circle",onclick:m=>{const S=m.target.checked;v("bodystyleSet.urlchecked",S),S&&k.checked&&(k.checked=!1,v("bodystyleSet.colorchecked",!1)),_.bodystyleSet.urlchecked?(A(),$e()):n("#SP_WRAP_IMAGE").remove()}}),k=r("input",{type:"radio",id:"sp_set_bodystyle_color",checked:_.bodystyleSet.colorchecked,className:"sp-checkbox-circle",onclick:m=>{const S=m.target.checked;v("bodystyleSet.colorchecked",S),S&&f.checked&&(f.checked=!1,v("bodystyleSet.urlchecked",!1)),_.bodystyleSet.colorchecked?(A(),Me()):n("#SP_WRAP_COLOR").remove()}}),b=r("label",{htmlFor:"sp_set_bodystyle_URL",innerHTML:"\u0412\u044B\u0431\u0440\u0430\u0442\u044C \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435"}),g=r("label",{htmlFor:"sp_set_bodystyle_color",innerHTML:"\u041F\u043E\u0434\u043E\u0431\u0440\u0430\u0442\u044C \u0446\u0432\u0435\u0442"});t.appendChild(d),t.appendChild(o),t.appendChild(c),t.appendChild(p),a.appendChild(f),a.appendChild(b),l.appendChild(k),l.appendChild(g),i.appendChild(t),s.appendChild(i),s.appendChild(a),s.appendChild(l),e.parentElement?.after(s),_.bodystyleSet.urlchecked&&$e(),_.bodystyleSet.colorchecked&&Me()}catch(t){u.error("settingsBackground.ts",t)}},$e=async()=>{try{if(!n("#SP_WRAP_IMAGE")){n("#SP_WRAP_COLOR")&&(n("#SP_WRAP_COLOR").remove(),n("#SP_PLUS_CP_STYLE").remove());let e=r("link",{rel:"stylesheet",type:"text/css",id:"SP_PLUS_IMAGE_STYLE",href:`${N}/css/bodystyle.css?r=${H}`});document.getElementsByTagName("head")[0].appendChild(e);let t=n("#SP_PLUS_BODYSTYLE"),s=r("div",{className:"js-gallery_skip wbg oh tiles_block tiles_wrapper"}),a=r("div",{id:"SP_WRAP_IMAGE",style:{borderTop:"1px solid #cdd4e1"}});await T("GET",`${N}/data.json?r=${H}`,!1).then(l=>{if(l.status===200&&l.parsedBody?.backgrounds){for(let i of l.parsedBody?.backgrounds){let d=r("div",{className:"js-file_item tiled_item tiled_item-200"}),c=r("div",{className:"tiled_inner t_center relative"}),o=r("span",{className:"relative sp_bg-items"}),p=r("div",{className:"tiled-preview border"}),f=r("img",{className:"preview s201_200",src:`${N}/backgrounds/${i}`,style:{cursor:"pointer"},onclick:k=>{const b=k.target.src;n("#image-input").value=b,v("bodystyleSet.url",b),A()}});p.appendChild(f),o.appendChild(p),c.appendChild(o),d.appendChild(c),s.appendChild(d)}a.appendChild(s),t.appendChild(a)}A()})}}catch(e){u.error("setImage",e)}},Me=()=>{try{if(!n("#SP_WRAP_COLOR")){n("#SP_WRAP_IMAGE")&&(n("#SP_WRAP_IMAGE").remove(),n("#SP_PLUS_IMAGE_STYLE").remove());let e=r("link",{rel:"stylesheet",type:"text/css",id:"SP_PLUS_CP_STYLE",href:`${N}/css/user-content.css?r=${H}`});document.getElementsByTagName("head")[0].appendChild(e);let t=r("div",{className:"stnd-block"}),s=n("#SP_PLUS_BODYSTYLE"),a=r("div",{id:"SP_WRAP_COLOR",style:{borderTop:"1px solid #cdd4e1"}}),l=r("table",{className:"table__wrap bb-colorpicker"}),i=r("tbody"),d=r("tr"),c=r("td",{className:"table__cell"});const o=[["#90CAF9","#80DEEA","#A5D6A7","#FFF59D","#FFCC80","#FFAB91","#CE93D8"],["#2196F3","#00BCD4","#4CAF50","#FFEB3B","#FF9800","#F44336","#9C27B0"],["#1565C0","#00838F","#2E7D32","#F9A825","#EF6C00","#C62828","#6A1B9A"],["#ECF0F1","#CFD8DC","#B0BEC5","#97A6B0","#546E7A","#44565E","#3A474C"]];for(let b of o){for(let g in b){let m=r("div",{className:"js-bb_color toolbar-color pointer",style:{backgroundColor:b[g]}});m.setAttribute("data-tag","fon"),m.setAttribute("data-val",b[g]),t.appendChild(m)}t.appendChild(r("br"))}c.appendChild(t),d.appendChild(c);let p=r("td",{className:"table__cell table__cell_last"}),f=r("div",{className:"stnd-block"}),k=r("div",{className:"js-bb_colorpicker"});f.appendChild(k),p.appendChild(f),d.appendChild(p),i.appendChild(d),l.appendChild(i),a.appendChild(l),s.appendChild(a),setTimeout(()=>{let b=new CP(k,!1,k);n("#color-input").addEventListener("change",m=>{/^\#([A-Za-z0-9]{3}|[A-Za-z0-9]{6})$/i.test(m.target.value)?(v(_.bodystyleSet.color,m.target.value),A(),b.set(_.bodystyleSet.color),m.target.classList.remove("sp-input-error")):m.target.classList.add("sp-input-error")}),b.enter(),b.set(_.bodystyleSet.color),b.on("change",m=>{const S=`#${m.toUpperCase()}`;Oe(S),v("bodystyleSet.color",S),A()});const g=document.querySelectorAll(".js-bb_color");for(let m of g)m.addEventListener("click",S=>{const $=S.target.getAttribute("data-val");Oe($),v("bodystyleSet.color",$),A(),b.set($)})},100)}}catch(e){u.error("setColor",e)}},Oe=e=>{n("input[name=color]").value=e,n("#color-input").value=e,n(".colorpicker-color").style.backgroundColor=e},Tt=async e=>{window.scrollTo(0,0);const t=n(e),s=(await Promise.resolve().then(()=>wt)).default;if(t)try{if(t.innerHTML="",!_.hideNotify.configImport){let g=r("span",{className:"sp sp-remove-grey pointer right notif_close close_h",title:"\u041F\u043E\u043D\u044F\u0442\u043D\u043E, \u0431\u043E\u043B\u044C\u0448\u0435 \u043D\u0435 \u043F\u043E\u043A\u0430\u0437\u044B\u0432\u0430\u0442\u044C.",style:{margin:"10px"},onclick:()=>{v("hideNotify.configImport",!0),n("#SP_CONFIG_JSON").remove()}}),m=r("div",{className:"stnd-block-yellow",innerHTML:'<span class="sp sp-alert"></span>\u0412\u043D\u0438\u043C\u0430\u043D\u0438\u0435!</br></br><div style="font-size: small">\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u0442\u043E\u043B\u044C\u043A\u043E \u0434\u043B\u044F \u043E\u043F\u044B\u0442\u043D\u044B\u0445 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0435\u0439! \u041F\u0435\u0440\u0435\u0434 \u0440\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435\u043C \u0444\u0430\u0439\u043B\u0430 \u043D\u0430\u0441\u0442\u0440\u043E\u0435\u043A, \u0441\u043B\u0435\u0434\u0443\u0435\u0442 \u0441\u0434\u0435\u043B\u0430\u0442\u044C \u042D\u043A\u0441\u043F\u043E\u0440\u0442, \u0435\u0441\u043B\u0438 \u0447\u0442\u043E-\u0442\u043E \u043F\u043E\u0448\u043B\u043E \u043D\u0435 \u0442\u0430\u043A, \u0441\u043B\u0435\u0434\u0443\u0435\u0442 \u0441\u0434\u0435\u043B\u0430\u0442\u044C \u0418\u043C\u043F\u043E\u0440\u0442 \u043D\u0430\u0441\u0442\u0440\u043E\u0435\u043A.</div>',style:{padding:"16px"}}),S=r("div",{id:"SP_CONFIG_JSON"});S.appendChild(g),t.appendChild(S),S.appendChild(m)}let a=r("div",{style:{padding:"16px 16px 14px 16px"}}),l=r("div",{className:"widgets-group user__tools_last",id:"SP_PLUS_BOTTOM_DIVB"}),i=r("div",{className:"widgets-group user__tools_last",style:{margin:"unset"}}),d=r("div",{className:"text-input__wrap"}),c=r("div",{className:"cl"}),o=r("button",{className:"user__tools-link table__cell sp_btn",innerHTML:`
                    <span class="sp sp-ok-darkblue"></span>
                    <span style="color: #0E3C87; padding-left: 10px">\u041F\u0440\u0438\u043C\u0435\u043D\u0438\u0442\u044C \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F</span>
                `,style:{borderRight:"none",borderTop:"1px solid #cdd4e1"},onclick:()=>{try{let g=JSON.parse(n("#SP_BACKUP_JSON").value);n("#SP_PLUS_ALERT")?.remove(),w("SP_PLUS_SET",JSON.stringify(g)),L("\u0418\u043C\u043F\u043E\u0440\u0442 \u0438 \u044D\u043A\u0441\u043F\u043E\u0440\u0442 \u043D\u0430\u0441\u0442\u0440\u043E\u0435\u043A","\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u0431\u044B\u043B\u0438 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u044B",!0,3)}catch(g){L("\u041E\u0448\u0438\u0431\u043A\u0430 \u0440\u0430\u0437\u0431\u043E\u0440\u0430 \u0444\u0430\u0439\u043B\u0430 \u043D\u0430\u0441\u0442\u0440\u043E\u0435\u043A",g,!0)}}}),p=r("input",{id:"SP_IMPORT",type:"file",accept:"application/JSON",style:{display:"none"},onchange:()=>{let g,m=n("#SP_BACKUP_JSON"),S=n("#SP_IMPORT").files[0];const $=new FileReader;$.onload=(Re=>()=>{try{g=$.result,JSON.parse(g),w("SP_PLUS_SET",g),m.value=s(JSON.parse(g),null,4),L("\u0418\u043C\u043F\u043E\u0440\u0442 \u0438 \u044D\u043A\u0441\u043F\u043E\u0440\u0442 \u043D\u0430\u0441\u0442\u0440\u043E\u0435\u043A","\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u0431\u044B\u043B\u0438 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u044B",!0,3)}catch(q){L("\u041E\u0448\u0438\u0431\u043A\u0430 \u0440\u0430\u0437\u0431\u043E\u0440\u0430 \u0444\u0430\u0439\u043B\u0430 \u043D\u0430\u0441\u0442\u0440\u043E\u0435\u043A",q,!0)}})(S),$.readAsText(S)}}),f=r("button",{className:"user__tools-link table__cell sp_btn_line sp_btn-list",innerHTML:`
                    <span class="sp sp-restore-g"></span>
                    <span style="color: #3CA93C; padding-left: 10px">\u0418\u043C\u043F\u043E\u0440\u0442</span>
                `,onclick:()=>n("#SP_IMPORT").click()}),k=r("button",{className:"user__tools-link sp_btn-list",innerHTML:`
                    <span class="sp sp-download-blue"></span>
                    <span style="color: #57A3EA; padding-left: 10px">\u042D\u043A\u0441\u043F\u043E\u0440\u0442</span>
                `,onclick:()=>{M("\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B, \u0447\u0442\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0441\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0444\u0430\u0439\u043B \u043D\u0430\u0441\u0442\u0440\u043E\u0435\u043A?",!1,()=>{let g=new Blob([s(_,null,4)],{type:"text/plain"}),m=r("a",{href:URL.createObjectURL(g),download:`spaces-plus-${+new Date}.json`});m.click(),m.remove()})}}),b=r("textarea",{className:"text-input",id:"SP_BACKUP_JSON",rows:20,innerHTML:s(_,null,4)});t.appendChild(a),a.appendChild(d),d.appendChild(c),c.appendChild(b),i.appendChild(o),t.appendChild(i),l.appendChild(p),l.appendChild(f),l.appendChild(k),n("#SP_PLUS_ABOUT").previousElementSibling?.after(l)}catch(a){u.error("settingsBackupMenu.ts",a)}};if(n("#main_wrap"))try{T("POST",`${h}/api/session/check`,!1).then(e=>{const t=e.parsedBody;t&&Qe(t.code)&&(y.USERNAME=t.attributes.name,y.CK=t.attributes.CK,y.SID=t?.attributes.sid,Et()),u.info("\u041F\u0440\u043E\u0432\u0435\u0440\u043A\u0430 \u0441\u0435\u0441\u0441\u0438\u0438",e)})}catch(e){u.error("main.ts",e)}const Et=()=>{window.onerror=()=>!1,nt(),ht(),qe(),A(),Ve(),st(),he(_.oldheader),Xe(_.apidebug),ye(_.sticker),Le(_.friendsOn),ke(_.stickyheader),R.id===4&&(me(_.rscroll),xe(_.hrightbar)),setInterval(()=>{_.adblock&&Ye(),_.beta&&rt(),_.coins&&et(),_.karma&&at(),_.online&&Ze(),_.recents&&ot(),_.grotate&&ft(),_.favorite&&it(),_.weather&&mt(),_.readersd&&ut(),_.comments&&gt(),_.playerdn&&St(),_.userbypass&&pt(),_.dredirect&&yt(),_.playback&&Nt(),(_.blogsd||B==="spaces-blogs.com")&&tt(),(_.blockedfiles||B==="spac1.net")&&lt(),ct(),Je()},200)};var le=/[\\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,P,Y,Pt={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},U;function ie(e){return le.lastIndex=0,le.test(e)?'"'+e.replace(le,function(t){var s=Pt[t];return typeof s=="string"?s:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function V(e,t,s){var a,l,i,d,c=P,o,p=t[e];switch(p&&typeof p=="object"&&typeof p.toJSON=="function"&&(p=p.toJSON(e)),typeof U=="function"&&(p=U.call(t,e,p)),typeof p){case"string":return ie(p);case"number":return isFinite(p)?String(p):"null";case"boolean":case"null":return String(p);case"object":if(!p)return"null";if(P+=Y,o=[],Object.prototype.toString.apply(p)==="[object Array]"){for(d=p.length,a=0;a<d;a+=1)o[a]=V(a,p,s)||"null";return i=o.length===0?"[]":P?P.length+o.join(", ").length+4>s?`[
`+P+o.join(`,
`+P)+`
`+c+"]":"[ "+o.join(", ")+" ]":"["+o.join(",")+"]",P=c,i}if(U&&typeof U=="object")for(d=U.length,a=0;a<d;a+=1)typeof U[a]=="string"&&(l=U[a],i=V(l,p,s),i&&o.push(ie(l)+(P?": ":":")+i));else for(l in p)Object.prototype.hasOwnProperty.call(p,l)&&(i=V(l,p,s),i&&o.push(ie(l)+(P?": ":":")+i));return i=o.length===0?"{}":P?P.length+o.join(", ").length+4>s?`{
`+P+o.join(`,
`+P)+`
`+c+"}":"{ "+o.join(", ")+" }":"{"+o.join(",")+"}",P=c,i}}function Ct(e,t,s,a){var l;if(P="",Y="",a||(a=0),typeof a!="number")throw new Error("beaufifier: limit must be a number");if(typeof s=="number")for(l=0;l<s;l+=1)Y+=" ";else typeof s=="string"&&(Y=s);if(U=t,t&&typeof t!="function"&&(typeof t!="object"||typeof t.length!="number"))throw new Error("beautifier: wrong replacer parameter");return V("",{"":e},a)}var xt=Ct;const wt=Object.freeze(Object.defineProperty({__proto__:null,default:je(xt)},Symbol.toStringTag,{value:"Module"}))})();
